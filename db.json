{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"themes/archer/source/CNAME","path":"CNAME","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/algolia_logo.svg","path":"assets/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/favicon.ico","path":"assets/favicon.ico","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/loading.svg","path":"assets/loading.svg","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/logo-36.png","path":"assets/logo-36.png","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/logo-48.png","path":"assets/logo-48.png","modified":0,"renderable":1},{"_id":"themes/archer/source/assets/logo-64.png","path":"assets/logo-64.png","modified":0,"renderable":1},{"_id":"themes/archer/source/css/mobile.css","path":"css/mobile.css","modified":0,"renderable":1},{"_id":"themes/archer/source/css/style.css","path":"css/style.css","modified":0,"renderable":1},{"_id":"themes/archer/source/font/Source Sans Pro.woff","path":"font/Source Sans Pro.woff","modified":0,"renderable":1},{"_id":"themes/archer/source/font/Source Sans Pro.woff2","path":"font/Source Sans Pro.woff2","modified":0,"renderable":1},{"_id":"themes/archer/source/images/favicon.ico","path":"images/favicon.ico","modified":0,"renderable":1},{"_id":"themes/archer/source/lib/webfontloader.min.js","path":"lib/webfontloader.min.js","modified":0,"renderable":1},{"_id":"themes/archer/source/scripts/search.js","path":"scripts/search.js","modified":0,"renderable":1},{"_id":"themes/archer/source/scripts/main.js","path":"scripts/main.js","modified":0,"renderable":1},{"_id":"themes/archer/source/scripts/share.js","path":"scripts/share.js","modified":0,"renderable":1},{"_id":"themes/archer/source/font/Oswald-Regular.ttf","path":"font/Oswald-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff","path":"font/SourceCodePro-Regular.ttf.woff","modified":0,"renderable":1},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff2","path":"font/SourceCodePro-Regular.ttf.woff2","modified":0,"renderable":1},{"_id":"themes/archer/source/images/bg_post.png","path":"images/bg_post.png","modified":0,"renderable":1},{"_id":"themes/archer/source/lib/jquery.min.js","path":"lib/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/archer/source/images/avatar1.png","path":"images/avatar1.png","modified":0,"renderable":1},{"_id":"themes/archer/source/images/wechat.png","path":"images/wechat.png","modified":0,"renderable":1},{"_id":"themes/archer/source/images/bg_site.jpg","path":"images/bg_site.jpg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1550808959469},{"_id":"source/.DS_Store","hash":"7a8f97280a3f1166befbf8e8d2d3f50d4a962af4","modified":1551000245177},{"_id":"source/404.md","hash":"577791aa24ecec4b33d17acca505d4e0849bfc02","modified":1549801924000},{"_id":"source/manifest.json","hash":"77bf0e97fabb77a4b3157589567da236006500c2","modified":1550744372310},{"_id":"themes/archer/.DS_Store","hash":"4e15ba49a799d94b130c2b5413f1289de3d41ca6","modified":1550812864070},{"_id":"themes/archer/LICENSE","hash":"0da0c361bf299375739c6b668a44af0f5faf37bb","modified":1549801924000},{"_id":"themes/archer/README.md","hash":"fa398e05b0318ae4a657256e6ec6738791358d4f","modified":1549801924000},{"_id":"themes/archer/_config.yml","hash":"3b3ce165db019772bc93668ca37d682d021b41aa","modified":1551858641653},{"_id":"themes/archer/gulpfile.js","hash":"88e2615c21ca95ae7bcdba499e50a54aebcd9f56","modified":1549801924000},{"_id":"themes/archer/package.json","hash":"80a1d936e347e61d9a41a4303ee32dc236017242","modified":1549801924000},{"_id":"themes/archer/webpack.config.js","hash":"d20b6350c50e2981484cb9356a3e21a2124bcd72","modified":1549801924000},{"_id":"themes/archer/webpack.prod.js","hash":"48de76cfa6274895801d3afc89ecbf04ee182a1c","modified":1549801924000},{"_id":"themes/archer/source/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1550809083470},{"_id":"source/_posts/.DS_Store","hash":"f16bc7e20c140961937b569d1d3375ac5bdb307d","modified":1550835606375},{"_id":"source/about/index.md","hash":"fb3569b1e15f42215a1a6c95a020ed1ac07ae250","modified":1550821550127},{"_id":"themes/archer/docs/README-en.md","hash":"ebd8845724cc9c524f1bdc617567bec2223abed6","modified":1549801924000},{"_id":"themes/archer/docs/develop-guide-en.md","hash":"0bb09c3c9d5f56820cb84e3316f60352b731d70c","modified":1549801924000},{"_id":"themes/archer/docs/develop-guide-zh.md","hash":"effc2bc9e0cecfd228b19283337ff29649ea5985","modified":1549801924000},{"_id":"themes/archer/layout/404.ejs","hash":"879641b1b5e49c43f2e096cad281f7d74df05127","modified":1549801924000},{"_id":"themes/archer/layout/about.ejs","hash":"06019d835c0a51fed8aa086d1dfcf368f9921b42","modified":1549801924000},{"_id":"themes/archer/layout/index.ejs","hash":"716ba4a30860e36077dfdfffa02c1cd60301d8a3","modified":1549801924000},{"_id":"themes/archer/layout/layout.ejs","hash":"6573c53b013e8ea12607fad7d3d8bd0236664176","modified":1549801924000},{"_id":"themes/archer/layout/post.ejs","hash":"3757106582e07473d05c9f4817a1f43629769fac","modified":1551666404942},{"_id":"themes/archer/layout/site-meta.ejs","hash":"1a200814c7ef027582ab9e4972726ef4a3347aed","modified":1549801924000},{"_id":"themes/archer/source/.DS_Store","hash":"116f15e722432867e3266273721ca892b740c5d6","modified":1550832447671},{"_id":"source/_posts/do something/.DS_Store","hash":"e6f93de9acddf64dd562a95b71bc5100758206d4","modified":1550835611378},{"_id":"source/_posts/do something/JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼.md","hash":"9b274890402a387bdad10b3bec520824b97bbf0a","modified":1551682502154},{"_id":"source/_posts/do something/å…³äºå°ç¨‹åºè·¯ç”±å°è£….md","hash":"b47b1c7e96ec2426219f577c93d2252083005b72","modified":1551666404941},{"_id":"source/_posts/do something/åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹.md","hash":"ee33ac75835fe89d0c10b9a97de9adb7fa6ed189","modified":1550976773593},{"_id":"source/_posts/do something/åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹.md","hash":"b6e0d2c4bcf9dc15be2e885be361493f22ae5374","modified":1550976773594},{"_id":"source/_posts/human beings/Is this internet winter.md","hash":"61ae6bf5572b456443ceb4bb1bdefb7d92f8a75a","modified":1551666404941},{"_id":"source/_posts/human beings/äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢.md","hash":"72fdfc906560317cc390118974d773b4faae78d6","modified":1550976773596},{"_id":"themes/archer/layout/_partial/algolia.ejs","hash":"2f5f9073378f628a9124792b5301c1540bc5a264","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-background-image.ejs","hash":"20044d7e2740a690181149d137b9aef8b9860b4d","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-footer.ejs","hash":"457d2c8efcbdd08eccc5ea14c7e89f151a5a4088","modified":1550824601490},{"_id":"themes/archer/layout/_partial/base-header.ejs","hash":"12e28693dc53cab5f6fd389f15ea0f811c9c37e9","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-head.ejs","hash":"efde86772642dff2bb777556775b516f0cdc6e99","modified":1550823882959},{"_id":"themes/archer/layout/_partial/base-preload-polyfill.ejs","hash":"2aea84cb43f4479131620b3c3dfd7cebe9be36ba","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-profile.ejs","hash":"d2a8ae42792ffd391f591dbcda3bdbc6fddebe02","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-social.ejs","hash":"2d068432031b3bebf9438c775370a2d1b4492d6b","modified":1549801924000},{"_id":"themes/archer/layout/_partial/base-title-tags.ejs","hash":"418559ab11726f69621c3a58cd21903adff1e48e","modified":1549801924000},{"_id":"themes/archer/layout/_partial/google-adsense.ejs","hash":"8d86c7decc6f39bc6eef13feafe4a1a820f7374b","modified":1549801924000},{"_id":"themes/archer/layout/_partial/intro-height.ejs","hash":"cd0d34a811dc4666980d57c00d70dd82bd5450eb","modified":1549801924000},{"_id":"themes/archer/src/js/browser.js","hash":"03017b1e89b59346e681464c7609593c9aafa54c","modified":1549801924000},{"_id":"themes/archer/src/js/fancybox.js","hash":"0ce36efa325767c0ee7d5e5dfa174c68dd606e72","modified":1549801924000},{"_id":"themes/archer/src/js/init.js","hash":"989dea03ce93962b6a52818ee770ca3891679322","modified":1549801924000},{"_id":"themes/archer/src/js/main.js","hash":"58329fe74df0d4411d9486ebfc4c5fbc457f073f","modified":1549801924000},{"_id":"themes/archer/src/js/initSidebar.js","hash":"522aba19524b49efd323a2199f6eaa7396f1bd48","modified":1551678880702},{"_id":"themes/archer/src/js/mobile.js","hash":"3c826a4385dc58ee878e5ea9bf3a25fac5d2b307","modified":1549801924000},{"_id":"themes/archer/src/js/scroll.js","hash":"11ae5ca33f6f84897ef4a01697a624770bea2025","modified":1549801924000},{"_id":"themes/archer/src/js/search.js","hash":"af9bdbff06987fdca8340ea49ccd91e993b9be53","modified":1549801924000},{"_id":"themes/archer/src/js/share.js","hash":"dff48b27ac212c4ea8e0c4c5ee323862c06c2882","modified":1549801924000},{"_id":"themes/archer/src/js/sidebar.js","hash":"ee761637d37b9b1c7934984438b38d39aeca53eb","modified":1551679019908},{"_id":"themes/archer/src/js/tag.js","hash":"156547cad5230c899cac12d3d29e60f5a103b7c4","modified":1549801924000},{"_id":"themes/archer/src/js/toc.js","hash":"2a01f07f302ccea3d36787571e34fd070ac42797","modified":1549801924000},{"_id":"themes/archer/src/js/util.js","hash":"1c244b8def678df797ab3c049a03998db4f9dabb","modified":1549801924000},{"_id":"themes/archer/src/scss/_common.scss","hash":"71aa8bf9d5c66a432fd32b96a0953d53fcb533d2","modified":1549801924000},{"_id":"themes/archer/src/scss/_mixin.scss","hash":"27d5380e6a190071c0877a3651f3d877b91e03a1","modified":1549801924000},{"_id":"themes/archer/src/scss/_normalize.scss","hash":"b33d0d7e2e2807f50735f43e742f3c33471d38f7","modified":1549801924000},{"_id":"themes/archer/src/scss/_variables.scss","hash":"edd9e3dd34837f9c4e5f45eee8dc051b4caa8d28","modified":1549801924000},{"_id":"themes/archer/src/scss/mobile.scss","hash":"76a65f93c8bbcd5bc5fb7fca55919a12e7543a2b","modified":1549801924000},{"_id":"themes/archer/src/scss/style.scss","hash":"2d959b9c6a3a5b70df1bfa4ba0a6b8b758454e74","modified":1549801924000},{"_id":"themes/archer/source/assets/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1550809961832},{"_id":"themes/archer/source/assets/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1549801924000},{"_id":"themes/archer/source/assets/favicon.ico","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1541991527057},{"_id":"themes/archer/source/assets/loading.svg","hash":"45be17d07697d604d8981890eb21e308530c7a38","modified":1549801924000},{"_id":"themes/archer/source/assets/logo-36.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1541991527057},{"_id":"themes/archer/source/assets/logo-48.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1541991527057},{"_id":"themes/archer/source/assets/logo-64.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1541991527057},{"_id":"themes/archer/source/css/mobile.css","hash":"0b7ac34da7d703064423480fc0526d91fa5716bc","modified":1549801924000},{"_id":"themes/archer/source/css/style.css","hash":"9b9e9ab4195f4f22bd52895ebedfa51b2182cab0","modified":1549801924000},{"_id":"themes/archer/source/font/Source Sans Pro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1549801924000},{"_id":"themes/archer/source/font/Source Sans Pro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1549801924000},{"_id":"themes/archer/source/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1550832464601},{"_id":"themes/archer/source/images/favicon.ico","hash":"6484806109ed1950f6700639a86b96c6681d6f9e","modified":1547608978327},{"_id":"themes/archer/source/lib/webfontloader.min.js","hash":"bc6ffe9c0d8b3285564619a445c6ca575eb9d0f5","modified":1549801924000},{"_id":"themes/archer/source/scripts/search.js","hash":"d5f739e261e8ce74f993c6157b248663bda122bf","modified":1549801924000},{"_id":"themes/archer/source/scripts/main.js","hash":"258b08f308c2a78f6cc0a81cf353994da771966a","modified":1549801924000},{"_id":"themes/archer/source/scripts/share.js","hash":"bb5bb37ce7f47f8c084b232df3e5fe2378d7ca01","modified":1549801924000},{"_id":"themes/archer/package-lock.json","hash":"229960bd92beff7974f422f7cb2025ae610a2191","modified":1549801924000},{"_id":"themes/archer/layout/_partial/comment/custom.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1549801924000},{"_id":"themes/archer/source/font/Oswald-Regular.ttf","hash":"965d729546a43a8490ad4cf33c25ac475682100c","modified":1549801924000},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff","hash":"12eef75e1ad3eca9dae42b65505010ce4464a315","modified":1549801924000},{"_id":"themes/archer/source/font/SourceCodePro-Regular.ttf.woff2","hash":"f5991289ec17884cb641da0646d278d36702a190","modified":1549801924000},{"_id":"themes/archer/source/images/bg_post.png","hash":"dacb8dbf91978317e1fc0925137167f3f76285e2","modified":1507789973000},{"_id":"themes/archer/source/lib/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1549801924000},{"_id":"source/_posts/do something/åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1550838469096},{"_id":"themes/archer/layout/_partial/comment/changyan.ejs","hash":"7691642fb9375607e0ac988a7420999e242cb2c9","modified":1549801924000},{"_id":"themes/archer/layout/_partial/comment/disqus.ejs","hash":"cadd97820a23d01d8b7e2f19a86e5290cef5a8a6","modified":1550824477536},{"_id":"themes/archer/layout/_partial/comment/gitment.ejs","hash":"794647a8a4ac9e1d01d74c07717175a141b1e01c","modified":1549801924000},{"_id":"themes/archer/layout/_partial/comment/livere.ejs","hash":"b27469f19f35ec2037c7bce736a12e9dfb5e360b","modified":1549801924000},{"_id":"themes/archer/layout/_partial/comment/valine.ejs","hash":"6bf59f01235c87cbca1555e4e027139de06688c2","modified":1550824322941},{"_id":"themes/archer/layout/_partial/comment/youyan.ejs","hash":"790d76f2667377db78a7d04bad8d629e47e7aab0","modified":1549801924000},{"_id":"themes/archer/layout/_partial/critical-css/critical-style.ejs","hash":"731d3980ac665d96dc6a40d31c2f8b86a221a8bb","modified":1549801924000},{"_id":"themes/archer/layout/_partial/script/font-loader.ejs","hash":"291cc0a4a444a93b93c32e2c39383c70e36e46de","modified":1549801924000},{"_id":"themes/archer/layout/_partial/sidebar/base-sidebar.ejs","hash":"2d38af7cb5aabc0af99de239bd180c516ec4c56c","modified":1549801924000},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-archives.ejs","hash":"daa78b17a773bca569f1c8ca2c916495ca138da6","modified":1549801924000},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-categories.ejs","hash":"147214469c4909eb94943599883f9fa0f3cc090d","modified":1549801924000},{"_id":"themes/archer/layout/_partial/sidebar/sidebar-tags.ejs","hash":"d6e1a192cac5dcf365ce1a52df4f23feafeeb849","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_404.scss","hash":"64a721c19c8c4d5b2b07d6aedcde1565be734e6d","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_algolia.scss","hash":"75776d8b85c8d2edc27eb7ed60d7c371f5109da0","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_index-page.scss","hash":"8a74f79686e327b0566ea606fd7625eb57daf898","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_post-page.scss","hash":"97171c34f9b0676cf9113a1d637955415770f89b","modified":1549801924000},{"_id":"themes/archer/docs/snap.png","hash":"0b2a8bf016f6eed576abfdcdb7dcf8de51c12562","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_partial/_footer.scss","hash":"73caccbe2634ff84e386d58e7f6ecd52d5ca2151","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_partial/_header.scss","hash":"eaff5b3e942e461109cdb6fd52f1d124b5a11951","modified":1551678648607},{"_id":"themes/archer/src/scss/_partial/_partial/_intro.scss","hash":"65efbfbaec7d09120ba62fee6e4643e6108098f6","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_partial/_paginator.scss","hash":"dbd7f802f3812f7e15c12885e495296f3697c580","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_partial/_profile.scss","hash":"e69b62df7c36d938cc4cf8e1fdcbc7109be41119","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_partial/_scrollbar.scss","hash":"9f7a3877adccbfaf66ad574dbe2c8dc85fbf2f5a","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_post/_code.scss","hash":"1229364f7c3484cc2ada6f118c859e3fd1dd9129","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar-archive.scss","hash":"a25960d1d9f501e50cb1fe86328dbc65faa29d22","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar-tags.scss","hash":"fe42459805e4caa303df08964184548c33507d23","modified":1549801924000},{"_id":"themes/archer/src/scss/_partial/_sidebar/_sidebar.scss","hash":"9226a04dd9ea8389f88ced34962f1f55192d7a1a","modified":1549801924000},{"_id":"themes/archer/source/images/avatar1.png","hash":"dbcbcd062a1113d7c656cad3c8d7642031a0146f","modified":1551671415557},{"_id":"source/_posts/do something/åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹/onion.png","hash":"64ed5f85efbca9cda0ecb5737edf3430f044f733","modified":1550835653175},{"_id":"themes/archer/source/images/wechat.png","hash":"1bb6520ad81686d563b56db149c38a54f33ed0b8","modified":1550820441456},{"_id":"themes/archer/source/images/bg_site.jpg","hash":"958660a9659be7b1c58eb60c8abf6d4ff0dfc88c","modified":1546938271109},{"_id":"public/manifest.json","hash":"a23c85880d1c222879e8646ecdc177eaf7cecdaa","modified":1551679274886},{"_id":"public/atom.xml","hash":"225ffa9efe7169cb9aaba4012127ce4bb4843948","modified":1551679275074},{"_id":"public/content.json","hash":"8fe6ed9b032eba249a6c74d0d4e56abc7ec9940f","modified":1551679275080},{"_id":"public/post-sitemap.xml","hash":"4a9f3d02628c4d700e4ef6c63e6cd42c71752884","modified":1551679275080},{"_id":"public/page-sitemap.xml","hash":"7fd5759b48e2fb866ce562104b9a79d533710456","modified":1551679275080},{"_id":"public/category-sitemap.xml","hash":"bfa4982c5cccd5617b9bd160d36ce995338fe480","modified":1551679275080},{"_id":"public/tag-sitemap.xml","hash":"101fabfb4ddccb28a3434671175aa113dbeca870","modified":1551679275081},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1551679275081},{"_id":"public/sitemap.xml","hash":"899507f093e02e4bde978b9106892f65c327200c","modified":1551679275081},{"_id":"public/404.html","hash":"65e0a2383458cc14bbcc73b1b775b948dd6edbfd","modified":1551679275114},{"_id":"public/about/index.html","hash":"7a003708df8914b6f86623f78e67d3a221484ee6","modified":1551679275114},{"_id":"public/2019/02/28/human beings/Is this internet winter/index.html","hash":"9673093147c28c5e659617306e0879db276b8c4c","modified":1551679275114},{"_id":"public/2019/02/24/do something/JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼/index.html","hash":"70ede49532bffe4174b49e5bf55748f01f125bf0","modified":1551679275114},{"_id":"public/2019/02/22/do something/åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹/index.html","hash":"817a1c89372aa42864f7722b44fac8bc368cbd51","modified":1551679275114},{"_id":"public/2019/02/21/do something/åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹/index.html","hash":"0d9c7f998ea237fa3baced9c9d95196c0bea5459","modified":1551679275114},{"_id":"public/2019/01/04/human beings/äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢/index.html","hash":"a3d0eeee0dafe50382851d6b426854961af4e0fb","modified":1551679275114},{"_id":"public/2018/12/09/do something/å…³äºå°ç¨‹åºè·¯ç”±å°è£…/index.html","hash":"e0ed466aa3bbe2b4c1c71a2c66550b89d4d8270f","modified":1551679275115},{"_id":"public/categories/ç®—æ³•/index.html","hash":"6ae45ab8b69f74532c8d97a8160aae504fdac3e7","modified":1551679275115},{"_id":"public/categories/å°è£…/index.html","hash":"0e1a1ac77dee36a892517eaa830e59198eb169f5","modified":1551679275115},{"_id":"public/categories/å½“æˆ‘åœ¨æ‰¯æ·¡/index.html","hash":"77942901acc67f7df82539dbb77d8a60b7ea89ec","modified":1551679275115},{"_id":"public/archives/index.html","hash":"3034774ca260daf83100d4fea885f51ac3bc4acf","modified":1551679275115},{"_id":"public/archives/2018/index.html","hash":"03c234000e8e4603e22b48a84851ac668116db90","modified":1551679275115},{"_id":"public/archives/2018/12/index.html","hash":"03c234000e8e4603e22b48a84851ac668116db90","modified":1551679275115},{"_id":"public/archives/2019/index.html","hash":"5a53abd7cef3d2b590e0d356aace7b2b408b16b1","modified":1551679275115},{"_id":"public/archives/2019/01/index.html","hash":"8663972e9bf9336b46e5b401b4dcfc1c66cd0672","modified":1551679275115},{"_id":"public/archives/2019/02/index.html","hash":"2648101ffa23a8796aff429cbadb3cea174b60dd","modified":1551679275115},{"_id":"public/index.html","hash":"fdad9a92a64d60fa29f2e3e8ad1b9488a2d2aec0","modified":1551679275115},{"_id":"public/tags/è®¾è®¡æ¨¡å¼/index.html","hash":"02642739b235409b34e56b022b1dab8450f7d909","modified":1551679275115},{"_id":"public/tags/ç®—æ³•/index.html","hash":"6ae45ab8b69f74532c8d97a8160aae504fdac3e7","modified":1551679275116},{"_id":"public/tags/åŠ¨æ€è§„åˆ’/index.html","hash":"d274526664c7c4ec39239758a5c59f16f29e0757","modified":1551679275116},{"_id":"public/tags/é€’å½’/index.html","hash":"d274526664c7c4ec39239758a5c59f16f29e0757","modified":1551679275116},{"_id":"public/tags/å°¾é€’å½’/index.html","hash":"d274526664c7c4ec39239758a5c59f16f29e0757","modified":1551679275116},{"_id":"public/tags/å°è£…/index.html","hash":"0e1a1ac77dee36a892517eaa830e59198eb169f5","modified":1551679275116},{"_id":"public/tags/å¾®ä¿¡å°ç¨‹åº/index.html","hash":"03c234000e8e4603e22b48a84851ac668116db90","modified":1551679275116},{"_id":"public/tags/mpvue/index.html","hash":"03c234000e8e4603e22b48a84851ac668116db90","modified":1551679275116},{"_id":"public/tags/è·¯ç”±/index.html","hash":"03c234000e8e4603e22b48a84851ac668116db90","modified":1551679275116},{"_id":"public/tags/koa/index.html","hash":"3ebd6489b17b95fbf77208b666d8183067d4b125","modified":1551679275116},{"_id":"public/tags/æ´‹è‘±æ¨¡å‹/index.html","hash":"3ebd6489b17b95fbf77208b666d8183067d4b125","modified":1551679275116},{"_id":"public/tags/å½“æˆ‘åœ¨æ‰¯æ·¡/index.html","hash":"77942901acc67f7df82539dbb77d8a60b7ea89ec","modified":1551679275116},{"_id":"public/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1551679275117},{"_id":"public/assets/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1551679275122},{"_id":"public/assets/favicon.ico","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1551679275122},{"_id":"public/assets/loading.svg","hash":"45be17d07697d604d8981890eb21e308530c7a38","modified":1551679275122},{"_id":"public/assets/logo-36.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1551679275122},{"_id":"public/assets/logo-48.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1551679275122},{"_id":"public/assets/logo-64.png","hash":"169c71d072fa90b44ff91ca33ffbfda72342c054","modified":1551679275122},{"_id":"public/font/Source Sans Pro.woff","hash":"a6722c9b6439b7a020a9be3d3178970757a9265c","modified":1551679275122},{"_id":"public/images/favicon.ico","hash":"6484806109ed1950f6700639a86b96c6681d6f9e","modified":1551679275122},{"_id":"public/font/Source Sans Pro.woff2","hash":"da65f527a8da65d5eb6721626d28cfdb46ab104a","modified":1551679275122},{"_id":"public/assets/algolia/algoliasearchLite.min.js","hash":"1bcf74674566a61fe954e374a231011239b8e5e9","modified":1551679275122},{"_id":"public/font/Oswald-Regular.ttf","hash":"965d729546a43a8490ad4cf33c25ac475682100c","modified":1551679275126},{"_id":"public/font/SourceCodePro-Regular.ttf.woff","hash":"12eef75e1ad3eca9dae42b65505010ce4464a315","modified":1551679275127},{"_id":"public/font/SourceCodePro-Regular.ttf.woff2","hash":"f5991289ec17884cb641da0646d278d36702a190","modified":1551679275127},{"_id":"public/images/bg_post.png","hash":"dacb8dbf91978317e1fc0925137167f3f76285e2","modified":1551679275127},{"_id":"public/assets/algolia/algoliasearchLite.js","hash":"422f4c3882cf8366927333081292a9bed6000124","modified":1551679275127},{"_id":"public/assets/algolia/algoliasearch.min.js","hash":"55eaeaf5ecda250f5bed80958a05bef13886eee6","modified":1551679275128},{"_id":"public/css/mobile.css","hash":"0b7ac34da7d703064423480fc0526d91fa5716bc","modified":1551679275131},{"_id":"public/lib/webfontloader.min.js","hash":"bc6ffe9c0d8b3285564619a445c6ca575eb9d0f5","modified":1551679275131},{"_id":"public/scripts/search.js","hash":"d5f739e261e8ce74f993c6157b248663bda122bf","modified":1551679275131},{"_id":"public/css/style.css","hash":"9b9e9ab4195f4f22bd52895ebedfa51b2182cab0","modified":1551679275132},{"_id":"public/scripts/main.js","hash":"258b08f308c2a78f6cc0a81cf353994da771966a","modified":1551679275132},{"_id":"public/scripts/share.js","hash":"bb5bb37ce7f47f8c084b232df3e5fe2378d7ca01","modified":1551679275132},{"_id":"public/lib/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1551679275132},{"_id":"public/2019/02/22/do something/åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹/onion.png","hash":"64ed5f85efbca9cda0ecb5737edf3430f044f733","modified":1551679275136},{"_id":"public/assets/algolia/algoliasearch.js","hash":"f34e955c2112cc6a80b48e48dd240a10817069f9","modified":1551679275136},{"_id":"public/images/avatar1.png","hash":"dbcbcd062a1113d7c656cad3c8d7642031a0146f","modified":1551679275138},{"_id":"public/images/wechat.png","hash":"1bb6520ad81686d563b56db149c38a54f33ed0b8","modified":1551679275154},{"_id":"public/images/bg_site.jpg","hash":"958660a9659be7b1c58eb60c8abf6d4ff0dfc88c","modified":1551679275165},{"_id":"source/_posts/do something/AlgorithmComplexity.md","hash":"51be9da67f747d6dccac5d1dc600de26a5d346cb","modified":1551852650570},{"_id":"source/_posts/writeSomething/AlgorithmComplexity.md","hash":"12565d00bd8c36ed6ed718385382774f1003c507","modified":1551866807159},{"_id":"source/_posts/writeSomething/appletRouter.md","hash":"b47b1c7e96ec2426219f577c93d2252083005b72","modified":1551666404941},{"_id":"source/_posts/writeSomething/dynamicProgrammingAndRecursion.md","hash":"ee33ac75835fe89d0c10b9a97de9adb7fa6ed189","modified":1550976773593},{"_id":"source/_posts/writeSomething/jsDesignPattern.md","hash":"9b274890402a387bdad10b3bec520824b97bbf0a","modified":1551774516180},{"_id":"source/_posts/writeSomething/koa2OnionModel.md","hash":"b6e0d2c4bcf9dc15be2e885be361493f22ae5374","modified":1550976773594},{"_id":"source/_posts/writeSomething/.DS_Store","hash":"e6f93de9acddf64dd562a95b71bc5100758206d4","modified":1550835611378},{"_id":"source/_posts/humanbeings/IsThisInternetWinter.md","hash":"61ae6bf5572b456443ceb4bb1bdefb7d92f8a75a","modified":1551666404941},{"_id":"source/_posts/humanbeings/äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢.md","hash":"72fdfc906560317cc390118974d773b4faae78d6","modified":1550976773596},{"_id":"source/_posts/writeSomething/koa2OnionModel/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1550838469096},{"_id":"source/_posts/writeSomething/koa2OnionModel/onion.png","hash":"64ed5f85efbca9cda0ecb5737edf3430f044f733","modified":1550835653175}],"Category":[{"name":"ç®—æ³•","_id":"cjstxryr200058348221j8r5k"},{"name":"å°è£…","_id":"cjstxryrb000d8348ni1tr5nl"},{"name":"å½“æˆ‘åœ¨æ‰¯æ·¡","_id":"cjstxryre000l8348w80sh2zu"}],"Data":[],"Page":[{"layout":"404","title":"[404]","description":"May the Force be with you :&#41;","_content":"","source":"404.md","raw":"---\nlayout: 404\ntitle: \"[404]\"\ndescription: \"May the Force be with you :&#41;\"\n---","date":"2019-02-21T09:46:42.749Z","updated":"2019-02-10T12:32:04.000Z","path":"404.html","comments":1,"_id":"cjstxrypx00008348spxro7ue","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"{\n    \"dir\": \"auto\",\n    \"lang\": \"zh\",\n    \"name\": \"kwok io\",\n    \"scope\": \"/\",\n    \"display\": \"standalone\",\n    \"start_url\": \"/\",\n    \"short_name\": \"kwok io\",\n    \"theme_color\": \"transparent\",\n    \"description\": \"- kwok io\",\n    \"orientation\": \"any\",\n    \"background_color\": \"transparent\",\n    \"related_applications\": [],\n    \"prefer_related_applications\": false,\n    \"gcm_sender_id\": \"482941778795\",\n    \"gcm_sender_id_comment\": \"Do not change the GCM Sender ID\",\n    \"icons\": [{\n      \"src\": \"/assets/logo-32.png\",\n      \"sizes\": \"32x32\",\n      \"type\": \"image/png\"\n    }, {\n      \"src\": \"/assets/logo-48.png\",\n      \"sizes\": \"48x48\",\n      \"type\": \"image/png\"\n    },\n    {\n        \"src\": \"/assets/logo-64.png\",\n        \"sizes\": \"64x64\",\n        \"type\": \"image/png\"\n      }\n    ]\n  }","source":"manifest.json","raw":"{\n    \"dir\": \"auto\",\n    \"lang\": \"zh\",\n    \"name\": \"kwok io\",\n    \"scope\": \"/\",\n    \"display\": \"standalone\",\n    \"start_url\": \"/\",\n    \"short_name\": \"kwok io\",\n    \"theme_color\": \"transparent\",\n    \"description\": \"- kwok io\",\n    \"orientation\": \"any\",\n    \"background_color\": \"transparent\",\n    \"related_applications\": [],\n    \"prefer_related_applications\": false,\n    \"gcm_sender_id\": \"482941778795\",\n    \"gcm_sender_id_comment\": \"Do not change the GCM Sender ID\",\n    \"icons\": [{\n      \"src\": \"/assets/logo-32.png\",\n      \"sizes\": \"32x32\",\n      \"type\": \"image/png\"\n    }, {\n      \"src\": \"/assets/logo-48.png\",\n      \"sizes\": \"48x48\",\n      \"type\": \"image/png\"\n    },\n    {\n        \"src\": \"/assets/logo-64.png\",\n        \"sizes\": \"64x64\",\n        \"type\": \"image/png\"\n      }\n    ]\n  }","date":"2019-02-21T10:19:32.310Z","updated":"2019-02-21T10:19:32.310Z","path":"manifest.json","layout":"false","title":"","comments":1,"_id":"cjstxrypy00018348burhaw3c","content":"{\"dir\":\"auto\",\"lang\":\"zh\",\"name\":\"kwok io\",\"scope\":\"/\",\"display\":\"standalone\",\"start_url\":\"/\",\"short_name\":\"kwok io\",\"theme_color\":\"transparent\",\"description\":\"- kwok io\",\"orientation\":\"any\",\"background_color\":\"transparent\",\"related_applications\":[],\"prefer_related_applications\":false,\"gcm_sender_id\":\"482941778795\",\"gcm_sender_id_comment\":\"Do not change the GCM Sender ID\",\"icons\":[{\"src\":\"/assets/logo-32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"},{\"src\":\"/assets/logo-48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\"},{\"src\":\"/assets/logo-64.png\",\"sizes\":\"64x64\",\"type\":\"image/png\"}]}","site":{"data":{}},"excerpt":"","more":"{\"dir\":\"auto\",\"lang\":\"zh\",\"name\":\"kwok io\",\"scope\":\"/\",\"display\":\"standalone\",\"start_url\":\"/\",\"short_name\":\"kwok io\",\"theme_color\":\"transparent\",\"description\":\"- kwok io\",\"orientation\":\"any\",\"background_color\":\"transparent\",\"related_applications\":[],\"prefer_related_applications\":false,\"gcm_sender_id\":\"482941778795\",\"gcm_sender_id_comment\":\"Do not change the GCM Sender ID\",\"icons\":[{\"src\":\"/assets/logo-32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"},{\"src\":\"/assets/logo-48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\"},{\"src\":\"/assets/logo-64.png\",\"sizes\":\"64x64\",\"type\":\"image/png\"}]}"},{"title":"chris kwok","layout":"about","_content":"hi\n\nhere is chris kwok\n\nas a front-end coder\n\nin shanghai\n\n","source":"about/index.md","raw":"---\ntitle: chris kwok\nlayout: about\n---\nhi\n\nhere is chris kwok\n\nas a front-end coder\n\nin shanghai\n\n","date":"2019-02-22T07:45:50.127Z","updated":"2019-02-22T07:45:50.127Z","path":"about/index.html","comments":1,"_id":"cjstxryql00028348nx1d91fe","content":"<p>hi</p>\n<p>here is chris kwok</p>\n<p>as a front-end coder</p>\n<p>in shanghai</p>\n","site":{"data":{}},"excerpt":"","more":"<p>hi</p>\n<p>here is chris kwok</p>\n<p>as a front-end coder</p>\n<p>in shanghai</p>\n"}],"Post":[{"title":"ç®—æ³•å¤æ‚åº¦","date":"2019-03-06T03:15:00.000Z","_content":"ç®—æ³•è¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ç®€å•ç†è§£\n<!-- more -->\n*å’ŒåŒå­¦èœé¸¡äº’å•„äº†ä¸€ç•ªä¹‹åæˆåŠŸéªŒè¯äº†å¤§å­¦çš„çŸ¥è¯†æ—©å·²è¿˜ç»™è€å¸ˆ*\n\n# ç®—æ³•\n**ç®—æ³•**ï¼ˆalgorithmï¼‰ï¼Œåœ¨æ•°å­¦ï¼ˆç®—å­¦ï¼‰å’Œè®¡ç®—æœºç§‘å­¦ä¹‹ä¸­ï¼Œä¸ºä»»ä½•è‰¯å®šä¹‰çš„å…·ä½“è®¡ç®—æ­¥éª¤çš„ä¸€ä¸ªåºåˆ—ï¼Œå¸¸ç”¨äºè®¡ç®—ã€æ•°æ®å¤„ç†å’Œè‡ªåŠ¨æ¨ç†ã€‚ç²¾ç¡®è€Œè¨€ï¼Œç®—æ³•æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸ºæœ‰é™é•¿åˆ—è¡¨çš„æœ‰æ•ˆæ–¹æ³•ã€‚ç®—æ³•åº”åŒ…å«æ¸…æ™°å®šä¹‰çš„æŒ‡ä»¤ç”¨äºè®¡ç®—å‡½æ•°\n\nè¯´ä¸ªç²—æµ…çš„è§‚ç‚¹ï¼šåœ¨JSä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç®—æ³•\n\n# ç®—æ³•å¤æ‚åº¦\né’ˆå¯¹ä½ çš„ç¨‹åºä¸­ç®—æ³•çš„ä¼˜åŠ£ã€æ€§èƒ½å¥½åæœ‰ä¸ªè¯„åˆ¤çš„æ ‡å‡†å°±æ˜¯ç®—æ³•çš„å¤æ‚åº¦ï¼Œä¸»è¦åˆ†ä¸ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ç§ï¼Œä½¿ç”¨å¤§å†™å­—æ¯Oè¡¨ç¤º\n\n- æ—¶é—´å¤æ‚åº¦(Time complexity)ï¼šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šæ€§æè¿°è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚é€šå¸¸ä½¿ç”¨ç®—æ³•çš„æœ€åæƒ…å†µå¤æ‚åº¦ï¼Œè®°ä¸º T(n)\n- ç©ºé—´å¤æ‚åº¦(Space Complexity)ï¼šæ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦\n\n*ç®—æ³•çš„è¿è¡Œæ—¶é—´å…¶å®å°±æ˜¯è®¡ç®—ä½ çš„ç®—æ³•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹æ‰§è¡Œçš„æ¬¡æ•°å°±æ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œè€Œç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦å¼€è¾Ÿè¾…åŠ©å†…å­˜çš„æ¬¡æ•°åˆ™æ˜¯ç©ºé—´å¤æ‚åº¦*\n\n***æ‰€ä»¥è¯´ç®—æ³•è¿è¡Œçš„æ¬¡æ•°å’Œæ·±åº¦åˆ†åˆ«ä»£è¡¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦***\n\n# æ—¶é—´å¤æ‚åº¦\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°f(n)ï¼Œè¿›è€Œåˆ†æf(n)éšnçš„å˜åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚è¿™é‡Œç”¨\"O\"æ¥è¡¨ç¤ºæ•°é‡çº§ï¼Œç»™å‡ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\nT(n)=O(f(n))\n\nå®ƒè¡¨ç¤ºéšç€é—®é¢˜è§„æ¨¡çš„nçš„å¢å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œè¿™ç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚è€Œæˆ‘ä»¬ä¸€èˆ¬è®¨è®ºçš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ï¼šæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ç®—æ³•åœ¨ä»»ä½•è¾“å…¥å®ä¾‹ä¸Šè¿è¡Œæ—¶é—´çš„ä¸Šç•Œï¼Œåˆ†ææœ€åçš„æƒ…å†µä»¥ä¼°ç®—ç®—æ³•æŒ‡å‘æ—¶é—´çš„ä¸€ä¸ªä¸Šç•Œ\n- æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡½æ•°ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°\n- ä¸€èˆ¬é»˜è®¤çš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œå³åˆ†ææœ€åæƒ…å†µä¸‹æ‰€èƒ½æ‰§è¡Œçš„æ¬¡æ•°\n- å¿½ç•¥æ‰å¸¸æ•°é¡¹\n- å…³æ³¨è¿è¡Œæ—¶é—´çš„å¢é•¿è¶‹åŠ¿ï¼Œå…³æ³¨å‡½æ•°å¼ä¸­å¢é•¿æœ€å¿«çš„è¡¨è¾¾å¼ï¼Œå¿½ç•¥ç³»æ•°\n- è®¡ç®—æ—¶é—´å¤æ‚åº¦æ˜¯ä¼°ç®—éšç€nçš„å¢é•¿å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿\n- é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šé€’å½’æ€»æ¬¡æ•° * æ¯æ¬¡é€’å½’ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°\n\n# ç©ºé—´å¤æ‚åº¦\nç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯è®¡ç®—å®é™…å ç”¨çš„ç©ºé—´ï¼Œè€Œæ˜¯è®¡ç®—æ•´ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´å•å…ƒçš„ä¸ªæ•°ï¼Œä¸é—®é¢˜çš„è§„æ¨¡æ²¡æœ‰å…³ç³»ã€‚ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦S(n)å®šä¹‰ä¸ºè¯¥ç®—æ³•æ‰€è€—è´¹ç©ºé—´çš„æ•°é‡çº§\n\nS(n)=O(f(n)) è‹¥ç®—æ³•æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„è¾…åŠ©ç©ºé—´ç›¸å¯¹äºè¾“å…¥æ•°æ®é‡nè€Œè¨€æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œåˆ™ç§°è¿™ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´ä¸ºO(1)\n\né€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼šé€’å½’æ·±åº¦ N * æ¯æ¬¡é€’å½’æ‰€è¦çš„è¾…åŠ©ç©ºé—´ï¼Œ å¦‚æœæ¯æ¬¡é€’å½’æ‰€éœ€çš„è¾…åŠ©ç©ºé—´æ˜¯å¸¸æ•°ï¼Œåˆ™é€’å½’çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(N)\n\n# åŸºç¡€ç®—æ³•\nåŸºç¡€ç®—æ³•æœ‰å¾ˆå¤šï¼Œæ’åºã€é€’å½’ã€äºŒåˆ†æ³•ã€è´ªå©ªç®—æ³•ã€å›æº¯ç­‰ï¼Œä»¥ä¸‹ç®€è¦åˆ—ä¸¾ç®€å•ä¸ºä¸»\n\n## å†’æ³¡æ’åº\næ ¸å¿ƒä»£ç ï¼š\n```js\n// arr\nfor (let i = 0; i < arr.length; i++) {\n  for (let j = 0; j < arr.length; j++) {\n    if (arr[j] > arr[j+1]) {\n      let temp = arr[j+1]\n      arr[j+1] = arr[j]\n      arr[j] = temp\n    }\n  }\n}\n```\n*æ­¤å¤„åªè¡¨è¿°æœ€åŸºæœ¬çš„æƒ…å†µï¼Œä¸ä¼˜åŒ–ä»»ä½•ä»£ç *\n\nè¯¥å†’æ³¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼š\nä»è¿è¡Œæ¬¡æ•°çš„è§’åº¦æ¥åˆ†æï¼Œè®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œä¸¤å±‚forloopæ­£å¥½ç»„æˆä¸€ä¸ª n * n çš„çŸ©é˜µï¼Œæ‰€ä»¥æ€»æ¬¡æ•°ä¸º n^2\næ‰€ä»¥è¯¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)\n\nè¯¥å†’æ³¡ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼š\nä»æ¯æ¬¡å¼€è¾Ÿçš„å†…å­˜æ¥çœ‹è¯¥ç®—æ³•æ¯æ¬¡åªæ˜¯ä½¿ç”¨ä¹‹å‰ç³»ç»Ÿçš„åˆ†é…çš„å†…å­˜ï¼ˆå­˜å‚¨arrï¼‰ï¼Œæ‰€ä»¥å†’æ³¡æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)\n\n## é€’å½’\né€’å½’æ˜¯å¾ˆå¸¸è§çš„ç®—æ³•ï¼Œä½¿ç”¨å¾—å½“ä¸ä»…å¯ä»¥ä½¿ä»£ç æ›´ä¸ºç®€æ´ä¹Ÿå¯å¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ï¼ˆåƒä¹‹å‰åšå®¢ä¸­æè¿‡çš„å°¾é€’å½’ï¼‰ï¼Œé‚£ä¹ˆé€’å½’ç®—æ³•çš„å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—å‘¢\n\n*åªè€ƒè™‘æœ‰ç»ˆæ­¢æ¡ä»¶çš„é€’å½’ï¼Œæ­»å¾ªç¯çš„é€’å½’çš„å¤æ‚åº¦å½“ç„¶æ˜¯æ— ç©·å¤§äº†*\n\né€’å½’demoï¼š\n```js\nlet n = 10\n\nfunction recursion() {\n  if (n > 1)\n    n-- && recursion()\n  else\n    return 'end of the recursive'\n}\n```\nä¸Šè¿°æ˜¯ä¸€ä¸ªä¼šå¾ªç¯æ‰§è¡Œ10æ¬¡å°±ç»ˆæ­¢çš„ç®€å•é€’å½’\nè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦ï¼š\nè®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ä¾‹å­çš„ç»ˆæ­¢æ¡ä»¶ï¼Œè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦å³ä¸ºO(n)\nè¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ï¼š\nè®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œæ¯æ¬¡é€’å½’éƒ½è¦å¼€è¾Ÿæ–°çš„æ ˆå¸§ï¼ˆå¸¸æ•°çº§åˆ«ä½œ1ï¼‰ä¿ç•™åœ¨è°ƒç”¨æ ˆä¸­ä»¥ç”¨æ¥å­˜å‚¨è¿”å›ä¿¡æ¯ï¼Œæ‰€ä»¥è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ n * 1 å³ä¸ºO(n)\n\n## äºŒåˆ†æ³•\näºŒåˆ†æ³•æœ¬è´¨ä¾ç„¶æ˜¯ä½¿ç”¨é€’å½’ä¸æ–­ç­‰åˆ†ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```js\n/**\n * @description: dichotomy\n * @param {Array} arr å…¥å‚æ•°ç»„\n * @param {any} val match\n * @param {Number} l ç´¢å¼•å¼€å§‹\n * @param {Number} r ç´¢å¼•ç»“æŸ\n*/\nfunction dichotomy(arr, val, l, r ){\n    let mid = Math.floor((l + r) / 2);\n    let midval = arr[mid]\n\n    if (l > r) return console.log('no match')\n\n    if (midval === val) return console.log('has match, index is ', mid)\n\n    midval > val\n      ? dichotomy(arr, val, l, mid - 1)\n      : dichotomy(arr, val, mid + 1, r)\n}\n\n// æµ‹è¯•\nconst arr = [1, 2, 3, 4, 5]\ndichotomy(arr, 3, 0, arr.length - 1)\n\n// optput:\n// has match, index is  2\n```\nç®—æ³•çš„æ‰§è¡Œæ˜¯ä¸æ–­ç­‰åˆ†æ•°ç»„ï¼Œç›´åˆ°æ— æ³•åŒ¹é…è¦æŸ¥æ‰¾çš„æ•°æ®\nè®¾æ•°ç»„åˆå§‹é•¿åº¦ä¸º nï¼Œç¬¬ä¸€æ¬¡é€’å½’åé•¿åº¦ä¸º n/2ï¼Œç¬¬äºŒæ¬¡ç­‰åˆ†åé•¿åº¦ä¸º n/4...\n.\n.\n.\nç¬¬ x ç­‰åˆ†åé•¿åº¦ä¸º n/2^x\nè€Œç®—æ³•æ‰§è¡Œçš„æœ€å·®çš„æƒ…å†µå°±æ˜¯æ¯ä¸ªç­‰åˆ†çš„é•¿åº¦ä¸º1ï¼Œ1å°±æ˜¯ä¸´ç•Œå€¼\næ‰€ä»¥å¦ n/2^x = 1 æ—¶å¯å¾—åˆ°ç­‰åˆ†çš„æ¬¡æ•°ä¸º x = logä»¥2ä¸ºåº•nçš„å¯¹æ•°\n\næ‰€ä»¥äºŒåˆ†æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºlogä»¥2ä¸ºåº•nçš„å¯¹æ•°ï¼ˆæ‰“ä¸å‡ºä¸Šæ ‡ä¸‹æ ‡ğŸ¤•ï¼‰\næ¯æ¬¡éœ€è¦çš„è¾…åŠ©ç©ºé—´ä¾ç„¶æ˜¯å¸¸æ•°çº§åˆ«ä½œä¸º1ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯logä»¥2ä¸ºåº•nçš„å¯¹æ•°\n\n\nä»¥ä¸Šåªæ˜¯å¯¹ç®—æ³•å¤æ‚åº¦çš„ç®€å•æ¶‰çŒï¼Œå¯èƒ½æœ‰ç†è§£ä¸å½“çš„é”™è¯¯âŒ\n\n\n**end**","source":"_posts/writeSomething/AlgorithmComplexity.md","raw":"---\ntitle: ç®—æ³•å¤æ‚åº¦\ntags:\n  - ç®—æ³•\n  - ç®—æ³•å¤æ‚åº¦\ndate: 2019-03-06 11:15:00\ncategories: ç®—æ³•\n---\nç®—æ³•è¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ç®€å•ç†è§£\n<!-- more -->\n*å’ŒåŒå­¦èœé¸¡äº’å•„äº†ä¸€ç•ªä¹‹åæˆåŠŸéªŒè¯äº†å¤§å­¦çš„çŸ¥è¯†æ—©å·²è¿˜ç»™è€å¸ˆ*\n\n# ç®—æ³•\n**ç®—æ³•**ï¼ˆalgorithmï¼‰ï¼Œåœ¨æ•°å­¦ï¼ˆç®—å­¦ï¼‰å’Œè®¡ç®—æœºç§‘å­¦ä¹‹ä¸­ï¼Œä¸ºä»»ä½•è‰¯å®šä¹‰çš„å…·ä½“è®¡ç®—æ­¥éª¤çš„ä¸€ä¸ªåºåˆ—ï¼Œå¸¸ç”¨äºè®¡ç®—ã€æ•°æ®å¤„ç†å’Œè‡ªåŠ¨æ¨ç†ã€‚ç²¾ç¡®è€Œè¨€ï¼Œç®—æ³•æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸ºæœ‰é™é•¿åˆ—è¡¨çš„æœ‰æ•ˆæ–¹æ³•ã€‚ç®—æ³•åº”åŒ…å«æ¸…æ™°å®šä¹‰çš„æŒ‡ä»¤ç”¨äºè®¡ç®—å‡½æ•°\n\nè¯´ä¸ªç²—æµ…çš„è§‚ç‚¹ï¼šåœ¨JSä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç®—æ³•\n\n# ç®—æ³•å¤æ‚åº¦\né’ˆå¯¹ä½ çš„ç¨‹åºä¸­ç®—æ³•çš„ä¼˜åŠ£ã€æ€§èƒ½å¥½åæœ‰ä¸ªè¯„åˆ¤çš„æ ‡å‡†å°±æ˜¯ç®—æ³•çš„å¤æ‚åº¦ï¼Œä¸»è¦åˆ†ä¸ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ç§ï¼Œä½¿ç”¨å¤§å†™å­—æ¯Oè¡¨ç¤º\n\n- æ—¶é—´å¤æ‚åº¦(Time complexity)ï¼šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šæ€§æè¿°è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚é€šå¸¸ä½¿ç”¨ç®—æ³•çš„æœ€åæƒ…å†µå¤æ‚åº¦ï¼Œè®°ä¸º T(n)\n- ç©ºé—´å¤æ‚åº¦(Space Complexity)ï¼šæ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦\n\n*ç®—æ³•çš„è¿è¡Œæ—¶é—´å…¶å®å°±æ˜¯è®¡ç®—ä½ çš„ç®—æ³•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹æ‰§è¡Œçš„æ¬¡æ•°å°±æ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œè€Œç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦å¼€è¾Ÿè¾…åŠ©å†…å­˜çš„æ¬¡æ•°åˆ™æ˜¯ç©ºé—´å¤æ‚åº¦*\n\n***æ‰€ä»¥è¯´ç®—æ³•è¿è¡Œçš„æ¬¡æ•°å’Œæ·±åº¦åˆ†åˆ«ä»£è¡¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦***\n\n# æ—¶é—´å¤æ‚åº¦\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°f(n)ï¼Œè¿›è€Œåˆ†æf(n)éšnçš„å˜åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚è¿™é‡Œç”¨\"O\"æ¥è¡¨ç¤ºæ•°é‡çº§ï¼Œç»™å‡ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\nT(n)=O(f(n))\n\nå®ƒè¡¨ç¤ºéšç€é—®é¢˜è§„æ¨¡çš„nçš„å¢å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œè¿™ç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚è€Œæˆ‘ä»¬ä¸€èˆ¬è®¨è®ºçš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ï¼šæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ç®—æ³•åœ¨ä»»ä½•è¾“å…¥å®ä¾‹ä¸Šè¿è¡Œæ—¶é—´çš„ä¸Šç•Œï¼Œåˆ†ææœ€åçš„æƒ…å†µä»¥ä¼°ç®—ç®—æ³•æŒ‡å‘æ—¶é—´çš„ä¸€ä¸ªä¸Šç•Œ\n- æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡½æ•°ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°\n- ä¸€èˆ¬é»˜è®¤çš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œå³åˆ†ææœ€åæƒ…å†µä¸‹æ‰€èƒ½æ‰§è¡Œçš„æ¬¡æ•°\n- å¿½ç•¥æ‰å¸¸æ•°é¡¹\n- å…³æ³¨è¿è¡Œæ—¶é—´çš„å¢é•¿è¶‹åŠ¿ï¼Œå…³æ³¨å‡½æ•°å¼ä¸­å¢é•¿æœ€å¿«çš„è¡¨è¾¾å¼ï¼Œå¿½ç•¥ç³»æ•°\n- è®¡ç®—æ—¶é—´å¤æ‚åº¦æ˜¯ä¼°ç®—éšç€nçš„å¢é•¿å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿\n- é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šé€’å½’æ€»æ¬¡æ•° * æ¯æ¬¡é€’å½’ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°\n\n# ç©ºé—´å¤æ‚åº¦\nç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯è®¡ç®—å®é™…å ç”¨çš„ç©ºé—´ï¼Œè€Œæ˜¯è®¡ç®—æ•´ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´å•å…ƒçš„ä¸ªæ•°ï¼Œä¸é—®é¢˜çš„è§„æ¨¡æ²¡æœ‰å…³ç³»ã€‚ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦S(n)å®šä¹‰ä¸ºè¯¥ç®—æ³•æ‰€è€—è´¹ç©ºé—´çš„æ•°é‡çº§\n\nS(n)=O(f(n)) è‹¥ç®—æ³•æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„è¾…åŠ©ç©ºé—´ç›¸å¯¹äºè¾“å…¥æ•°æ®é‡nè€Œè¨€æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œåˆ™ç§°è¿™ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´ä¸ºO(1)\n\né€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼šé€’å½’æ·±åº¦ N * æ¯æ¬¡é€’å½’æ‰€è¦çš„è¾…åŠ©ç©ºé—´ï¼Œ å¦‚æœæ¯æ¬¡é€’å½’æ‰€éœ€çš„è¾…åŠ©ç©ºé—´æ˜¯å¸¸æ•°ï¼Œåˆ™é€’å½’çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(N)\n\n# åŸºç¡€ç®—æ³•\nåŸºç¡€ç®—æ³•æœ‰å¾ˆå¤šï¼Œæ’åºã€é€’å½’ã€äºŒåˆ†æ³•ã€è´ªå©ªç®—æ³•ã€å›æº¯ç­‰ï¼Œä»¥ä¸‹ç®€è¦åˆ—ä¸¾ç®€å•ä¸ºä¸»\n\n## å†’æ³¡æ’åº\næ ¸å¿ƒä»£ç ï¼š\n```js\n// arr\nfor (let i = 0; i < arr.length; i++) {\n  for (let j = 0; j < arr.length; j++) {\n    if (arr[j] > arr[j+1]) {\n      let temp = arr[j+1]\n      arr[j+1] = arr[j]\n      arr[j] = temp\n    }\n  }\n}\n```\n*æ­¤å¤„åªè¡¨è¿°æœ€åŸºæœ¬çš„æƒ…å†µï¼Œä¸ä¼˜åŒ–ä»»ä½•ä»£ç *\n\nè¯¥å†’æ³¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼š\nä»è¿è¡Œæ¬¡æ•°çš„è§’åº¦æ¥åˆ†æï¼Œè®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œä¸¤å±‚forloopæ­£å¥½ç»„æˆä¸€ä¸ª n * n çš„çŸ©é˜µï¼Œæ‰€ä»¥æ€»æ¬¡æ•°ä¸º n^2\næ‰€ä»¥è¯¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)\n\nè¯¥å†’æ³¡ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼š\nä»æ¯æ¬¡å¼€è¾Ÿçš„å†…å­˜æ¥çœ‹è¯¥ç®—æ³•æ¯æ¬¡åªæ˜¯ä½¿ç”¨ä¹‹å‰ç³»ç»Ÿçš„åˆ†é…çš„å†…å­˜ï¼ˆå­˜å‚¨arrï¼‰ï¼Œæ‰€ä»¥å†’æ³¡æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)\n\n## é€’å½’\né€’å½’æ˜¯å¾ˆå¸¸è§çš„ç®—æ³•ï¼Œä½¿ç”¨å¾—å½“ä¸ä»…å¯ä»¥ä½¿ä»£ç æ›´ä¸ºç®€æ´ä¹Ÿå¯å¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ï¼ˆåƒä¹‹å‰åšå®¢ä¸­æè¿‡çš„å°¾é€’å½’ï¼‰ï¼Œé‚£ä¹ˆé€’å½’ç®—æ³•çš„å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—å‘¢\n\n*åªè€ƒè™‘æœ‰ç»ˆæ­¢æ¡ä»¶çš„é€’å½’ï¼Œæ­»å¾ªç¯çš„é€’å½’çš„å¤æ‚åº¦å½“ç„¶æ˜¯æ— ç©·å¤§äº†*\n\né€’å½’demoï¼š\n```js\nlet n = 10\n\nfunction recursion() {\n  if (n > 1)\n    n-- && recursion()\n  else\n    return 'end of the recursive'\n}\n```\nä¸Šè¿°æ˜¯ä¸€ä¸ªä¼šå¾ªç¯æ‰§è¡Œ10æ¬¡å°±ç»ˆæ­¢çš„ç®€å•é€’å½’\nè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦ï¼š\nè®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ä¾‹å­çš„ç»ˆæ­¢æ¡ä»¶ï¼Œè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦å³ä¸ºO(n)\nè¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ï¼š\nè®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œæ¯æ¬¡é€’å½’éƒ½è¦å¼€è¾Ÿæ–°çš„æ ˆå¸§ï¼ˆå¸¸æ•°çº§åˆ«ä½œ1ï¼‰ä¿ç•™åœ¨è°ƒç”¨æ ˆä¸­ä»¥ç”¨æ¥å­˜å‚¨è¿”å›ä¿¡æ¯ï¼Œæ‰€ä»¥è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ n * 1 å³ä¸ºO(n)\n\n## äºŒåˆ†æ³•\näºŒåˆ†æ³•æœ¬è´¨ä¾ç„¶æ˜¯ä½¿ç”¨é€’å½’ä¸æ–­ç­‰åˆ†ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```js\n/**\n * @description: dichotomy\n * @param {Array} arr å…¥å‚æ•°ç»„\n * @param {any} val match\n * @param {Number} l ç´¢å¼•å¼€å§‹\n * @param {Number} r ç´¢å¼•ç»“æŸ\n*/\nfunction dichotomy(arr, val, l, r ){\n    let mid = Math.floor((l + r) / 2);\n    let midval = arr[mid]\n\n    if (l > r) return console.log('no match')\n\n    if (midval === val) return console.log('has match, index is ', mid)\n\n    midval > val\n      ? dichotomy(arr, val, l, mid - 1)\n      : dichotomy(arr, val, mid + 1, r)\n}\n\n// æµ‹è¯•\nconst arr = [1, 2, 3, 4, 5]\ndichotomy(arr, 3, 0, arr.length - 1)\n\n// optput:\n// has match, index is  2\n```\nç®—æ³•çš„æ‰§è¡Œæ˜¯ä¸æ–­ç­‰åˆ†æ•°ç»„ï¼Œç›´åˆ°æ— æ³•åŒ¹é…è¦æŸ¥æ‰¾çš„æ•°æ®\nè®¾æ•°ç»„åˆå§‹é•¿åº¦ä¸º nï¼Œç¬¬ä¸€æ¬¡é€’å½’åé•¿åº¦ä¸º n/2ï¼Œç¬¬äºŒæ¬¡ç­‰åˆ†åé•¿åº¦ä¸º n/4...\n.\n.\n.\nç¬¬ x ç­‰åˆ†åé•¿åº¦ä¸º n/2^x\nè€Œç®—æ³•æ‰§è¡Œçš„æœ€å·®çš„æƒ…å†µå°±æ˜¯æ¯ä¸ªç­‰åˆ†çš„é•¿åº¦ä¸º1ï¼Œ1å°±æ˜¯ä¸´ç•Œå€¼\næ‰€ä»¥å¦ n/2^x = 1 æ—¶å¯å¾—åˆ°ç­‰åˆ†çš„æ¬¡æ•°ä¸º x = logä»¥2ä¸ºåº•nçš„å¯¹æ•°\n\næ‰€ä»¥äºŒåˆ†æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºlogä»¥2ä¸ºåº•nçš„å¯¹æ•°ï¼ˆæ‰“ä¸å‡ºä¸Šæ ‡ä¸‹æ ‡ğŸ¤•ï¼‰\næ¯æ¬¡éœ€è¦çš„è¾…åŠ©ç©ºé—´ä¾ç„¶æ˜¯å¸¸æ•°çº§åˆ«ä½œä¸º1ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯logä»¥2ä¸ºåº•nçš„å¯¹æ•°\n\n\nä»¥ä¸Šåªæ˜¯å¯¹ç®—æ³•å¤æ‚åº¦çš„ç®€å•æ¶‰çŒï¼Œå¯èƒ½æœ‰ç†è§£ä¸å½“çš„é”™è¯¯âŒ\n\n\n**end**","slug":"writeSomething/AlgorithmComplexity","published":1,"updated":"2019-03-06T10:06:47.159Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptw400007948rqwudant","content":"<p>ç®—æ³•è¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ç®€å•ç†è§£<br><a id=\"more\"></a><br><em>å’ŒåŒå­¦èœé¸¡äº’å•„äº†ä¸€ç•ªä¹‹åæˆåŠŸéªŒè¯äº†å¤§å­¦çš„çŸ¥è¯†æ—©å·²è¿˜ç»™è€å¸ˆ</em></p>\n<h1 id=\"ç®—æ³•\"><a href=\"#ç®—æ³•\" class=\"headerlink\" title=\"ç®—æ³•\"></a>ç®—æ³•</h1><p><strong>ç®—æ³•</strong>ï¼ˆalgorithmï¼‰ï¼Œåœ¨æ•°å­¦ï¼ˆç®—å­¦ï¼‰å’Œè®¡ç®—æœºç§‘å­¦ä¹‹ä¸­ï¼Œä¸ºä»»ä½•è‰¯å®šä¹‰çš„å…·ä½“è®¡ç®—æ­¥éª¤çš„ä¸€ä¸ªåºåˆ—ï¼Œå¸¸ç”¨äºè®¡ç®—ã€æ•°æ®å¤„ç†å’Œè‡ªåŠ¨æ¨ç†ã€‚ç²¾ç¡®è€Œè¨€ï¼Œç®—æ³•æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸ºæœ‰é™é•¿åˆ—è¡¨çš„æœ‰æ•ˆæ–¹æ³•ã€‚ç®—æ³•åº”åŒ…å«æ¸…æ™°å®šä¹‰çš„æŒ‡ä»¤ç”¨äºè®¡ç®—å‡½æ•°</p>\n<p>è¯´ä¸ªç²—æµ…çš„è§‚ç‚¹ï¼šåœ¨JSä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç®—æ³•</p>\n<h1 id=\"ç®—æ³•å¤æ‚åº¦\"><a href=\"#ç®—æ³•å¤æ‚åº¦\" class=\"headerlink\" title=\"ç®—æ³•å¤æ‚åº¦\"></a>ç®—æ³•å¤æ‚åº¦</h1><p>é’ˆå¯¹ä½ çš„ç¨‹åºä¸­ç®—æ³•çš„ä¼˜åŠ£ã€æ€§èƒ½å¥½åæœ‰ä¸ªè¯„åˆ¤çš„æ ‡å‡†å°±æ˜¯ç®—æ³•çš„å¤æ‚åº¦ï¼Œä¸»è¦åˆ†ä¸ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ç§ï¼Œä½¿ç”¨å¤§å†™å­—æ¯Oè¡¨ç¤º</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦(Time complexity)ï¼šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šæ€§æè¿°è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚é€šå¸¸ä½¿ç”¨ç®—æ³•çš„æœ€åæƒ…å†µå¤æ‚åº¦ï¼Œè®°ä¸º T(n)</li>\n<li>ç©ºé—´å¤æ‚åº¦(Space Complexity)ï¼šæ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦</li>\n</ul>\n<p><em>ç®—æ³•çš„è¿è¡Œæ—¶é—´å…¶å®å°±æ˜¯è®¡ç®—ä½ çš„ç®—æ³•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹æ‰§è¡Œçš„æ¬¡æ•°å°±æ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œè€Œç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦å¼€è¾Ÿè¾…åŠ©å†…å­˜çš„æ¬¡æ•°åˆ™æ˜¯ç©ºé—´å¤æ‚åº¦</em></p>\n<p><strong><em>æ‰€ä»¥è¯´ç®—æ³•è¿è¡Œçš„æ¬¡æ•°å’Œæ·±åº¦åˆ†åˆ«ä»£è¡¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</em></strong></p>\n<h1 id=\"æ—¶é—´å¤æ‚åº¦\"><a href=\"#æ—¶é—´å¤æ‚åº¦\" class=\"headerlink\" title=\"æ—¶é—´å¤æ‚åº¦\"></a>æ—¶é—´å¤æ‚åº¦</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°f(n)ï¼Œè¿›è€Œåˆ†æf(n)éšnçš„å˜åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚è¿™é‡Œç”¨â€Oâ€æ¥è¡¨ç¤ºæ•°é‡çº§ï¼Œç»™å‡ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</p>\n<p>T(n)=O(f(n))</p>\n<p>å®ƒè¡¨ç¤ºéšç€é—®é¢˜è§„æ¨¡çš„nçš„å¢å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œè¿™ç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚è€Œæˆ‘ä»¬ä¸€èˆ¬è®¨è®ºçš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ï¼šæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ç®—æ³•åœ¨ä»»ä½•è¾“å…¥å®ä¾‹ä¸Šè¿è¡Œæ—¶é—´çš„ä¸Šç•Œï¼Œåˆ†ææœ€åçš„æƒ…å†µä»¥ä¼°ç®—ç®—æ³•æŒ‡å‘æ—¶é—´çš„ä¸€ä¸ªä¸Šç•Œ</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡½æ•°ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°</li>\n<li>ä¸€èˆ¬é»˜è®¤çš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œå³åˆ†ææœ€åæƒ…å†µä¸‹æ‰€èƒ½æ‰§è¡Œçš„æ¬¡æ•°</li>\n<li>å¿½ç•¥æ‰å¸¸æ•°é¡¹</li>\n<li>å…³æ³¨è¿è¡Œæ—¶é—´çš„å¢é•¿è¶‹åŠ¿ï¼Œå…³æ³¨å‡½æ•°å¼ä¸­å¢é•¿æœ€å¿«çš„è¡¨è¾¾å¼ï¼Œå¿½ç•¥ç³»æ•°</li>\n<li>è®¡ç®—æ—¶é—´å¤æ‚åº¦æ˜¯ä¼°ç®—éšç€nçš„å¢é•¿å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿</li>\n<li>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šé€’å½’æ€»æ¬¡æ•° * æ¯æ¬¡é€’å½’ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°</li>\n</ul>\n<h1 id=\"ç©ºé—´å¤æ‚åº¦\"><a href=\"#ç©ºé—´å¤æ‚åº¦\" class=\"headerlink\" title=\"ç©ºé—´å¤æ‚åº¦\"></a>ç©ºé—´å¤æ‚åº¦</h1><p>ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯è®¡ç®—å®é™…å ç”¨çš„ç©ºé—´ï¼Œè€Œæ˜¯è®¡ç®—æ•´ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´å•å…ƒçš„ä¸ªæ•°ï¼Œä¸é—®é¢˜çš„è§„æ¨¡æ²¡æœ‰å…³ç³»ã€‚ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦S(n)å®šä¹‰ä¸ºè¯¥ç®—æ³•æ‰€è€—è´¹ç©ºé—´çš„æ•°é‡çº§</p>\n<p>S(n)=O(f(n)) è‹¥ç®—æ³•æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„è¾…åŠ©ç©ºé—´ç›¸å¯¹äºè¾“å…¥æ•°æ®é‡nè€Œè¨€æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œåˆ™ç§°è¿™ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´ä¸ºO(1)</p>\n<p>é€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼šé€’å½’æ·±åº¦ N * æ¯æ¬¡é€’å½’æ‰€è¦çš„è¾…åŠ©ç©ºé—´ï¼Œ å¦‚æœæ¯æ¬¡é€’å½’æ‰€éœ€çš„è¾…åŠ©ç©ºé—´æ˜¯å¸¸æ•°ï¼Œåˆ™é€’å½’çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(N)</p>\n<h1 id=\"åŸºç¡€ç®—æ³•\"><a href=\"#åŸºç¡€ç®—æ³•\" class=\"headerlink\" title=\"åŸºç¡€ç®—æ³•\"></a>åŸºç¡€ç®—æ³•</h1><p>åŸºç¡€ç®—æ³•æœ‰å¾ˆå¤šï¼Œæ’åºã€é€’å½’ã€äºŒåˆ†æ³•ã€è´ªå©ªç®—æ³•ã€å›æº¯ç­‰ï¼Œä»¥ä¸‹ç®€è¦åˆ—ä¸¾ç®€å•ä¸ºä¸»</p>\n<h2 id=\"å†’æ³¡æ’åº\"><a href=\"#å†’æ³¡æ’åº\" class=\"headerlink\" title=\"å†’æ³¡æ’åº\"></a>å†’æ³¡æ’åº</h2><p>æ ¸å¿ƒä»£ç ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// arr</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr[j] &gt; arr[j+<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> temp = arr[j+<span class=\"number\">1</span>]</span><br><span class=\"line\">      arr[j+<span class=\"number\">1</span>] = arr[j]</span><br><span class=\"line\">      arr[j] = temp</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><em>æ­¤å¤„åªè¡¨è¿°æœ€åŸºæœ¬çš„æƒ…å†µï¼Œä¸ä¼˜åŒ–ä»»ä½•ä»£ç </em></p>\n<p>è¯¥å†’æ³¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼š<br>ä»è¿è¡Œæ¬¡æ•°çš„è§’åº¦æ¥åˆ†æï¼Œè®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œä¸¤å±‚forloopæ­£å¥½ç»„æˆä¸€ä¸ª n * n çš„çŸ©é˜µï¼Œæ‰€ä»¥æ€»æ¬¡æ•°ä¸º n^2<br>æ‰€ä»¥è¯¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)</p>\n<p>è¯¥å†’æ³¡ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼š<br>ä»æ¯æ¬¡å¼€è¾Ÿçš„å†…å­˜æ¥çœ‹è¯¥ç®—æ³•æ¯æ¬¡åªæ˜¯ä½¿ç”¨ä¹‹å‰ç³»ç»Ÿçš„åˆ†é…çš„å†…å­˜ï¼ˆå­˜å‚¨arrï¼‰ï¼Œæ‰€ä»¥å†’æ³¡æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</p>\n<h2 id=\"é€’å½’\"><a href=\"#é€’å½’\" class=\"headerlink\" title=\"é€’å½’\"></a>é€’å½’</h2><p>é€’å½’æ˜¯å¾ˆå¸¸è§çš„ç®—æ³•ï¼Œä½¿ç”¨å¾—å½“ä¸ä»…å¯ä»¥ä½¿ä»£ç æ›´ä¸ºç®€æ´ä¹Ÿå¯å¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ï¼ˆåƒä¹‹å‰åšå®¢ä¸­æè¿‡çš„å°¾é€’å½’ï¼‰ï¼Œé‚£ä¹ˆé€’å½’ç®—æ³•çš„å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—å‘¢</p>\n<p><em>åªè€ƒè™‘æœ‰ç»ˆæ­¢æ¡ä»¶çš„é€’å½’ï¼Œæ­»å¾ªç¯çš„é€’å½’çš„å¤æ‚åº¦å½“ç„¶æ˜¯æ— ç©·å¤§äº†</em></p>\n<p>é€’å½’demoï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> n = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recursion</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">    n-- &amp;&amp; recursion()</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'end of the recursive'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šè¿°æ˜¯ä¸€ä¸ªä¼šå¾ªç¯æ‰§è¡Œ10æ¬¡å°±ç»ˆæ­¢çš„ç®€å•é€’å½’<br>è¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦ï¼š<br>è®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ä¾‹å­çš„ç»ˆæ­¢æ¡ä»¶ï¼Œè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦å³ä¸ºO(n)<br>è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ï¼š<br>è®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œæ¯æ¬¡é€’å½’éƒ½è¦å¼€è¾Ÿæ–°çš„æ ˆå¸§ï¼ˆå¸¸æ•°çº§åˆ«ä½œ1ï¼‰ä¿ç•™åœ¨è°ƒç”¨æ ˆä¸­ä»¥ç”¨æ¥å­˜å‚¨è¿”å›ä¿¡æ¯ï¼Œæ‰€ä»¥è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ n * 1 å³ä¸ºO(n)</p>\n<h2 id=\"äºŒåˆ†æ³•\"><a href=\"#äºŒåˆ†æ³•\" class=\"headerlink\" title=\"äºŒåˆ†æ³•\"></a>äºŒåˆ†æ³•</h2><p>äºŒåˆ†æ³•æœ¬è´¨ä¾ç„¶æ˜¯ä½¿ç”¨é€’å½’ä¸æ–­ç­‰åˆ†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @description: dichotomy</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Array&#125; arr å…¥å‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;any&#125; val match</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Number&#125; l ç´¢å¼•å¼€å§‹</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Number&#125; r ç´¢å¼•ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dichotomy</span>(<span class=\"params\">arr, val, l, r </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mid = <span class=\"built_in\">Math</span>.floor((l + r) / <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> midval = arr[mid]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt; r) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'no match'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (midval === val) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'has match, index is '</span>, mid)</span><br><span class=\"line\"></span><br><span class=\"line\">    midval &gt; val</span><br><span class=\"line\">      ? dichotomy(arr, val, l, mid - <span class=\"number\">1</span>)</span><br><span class=\"line\">      : dichotomy(arr, val, mid + <span class=\"number\">1</span>, r)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]</span><br><span class=\"line\">dichotomy(arr, <span class=\"number\">3</span>, <span class=\"number\">0</span>, arr.length - <span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// optput:</span></span><br><span class=\"line\"><span class=\"comment\">// has match, index is  2</span></span><br></pre></td></tr></table></figure>\n<p>ç®—æ³•çš„æ‰§è¡Œæ˜¯ä¸æ–­ç­‰åˆ†æ•°ç»„ï¼Œç›´åˆ°æ— æ³•åŒ¹é…è¦æŸ¥æ‰¾çš„æ•°æ®<br>è®¾æ•°ç»„åˆå§‹é•¿åº¦ä¸º nï¼Œç¬¬ä¸€æ¬¡é€’å½’åé•¿åº¦ä¸º n/2ï¼Œç¬¬äºŒæ¬¡ç­‰åˆ†åé•¿åº¦ä¸º n/4â€¦<br>.<br>.<br>.<br>ç¬¬ x ç­‰åˆ†åé•¿åº¦ä¸º n/2^x<br>è€Œç®—æ³•æ‰§è¡Œçš„æœ€å·®çš„æƒ…å†µå°±æ˜¯æ¯ä¸ªç­‰åˆ†çš„é•¿åº¦ä¸º1ï¼Œ1å°±æ˜¯ä¸´ç•Œå€¼<br>æ‰€ä»¥å¦ n/2^x = 1 æ—¶å¯å¾—åˆ°ç­‰åˆ†çš„æ¬¡æ•°ä¸º x = logä»¥2ä¸ºåº•nçš„å¯¹æ•°</p>\n<p>æ‰€ä»¥äºŒåˆ†æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºlogä»¥2ä¸ºåº•nçš„å¯¹æ•°ï¼ˆæ‰“ä¸å‡ºä¸Šæ ‡ä¸‹æ ‡ğŸ¤•ï¼‰<br>æ¯æ¬¡éœ€è¦çš„è¾…åŠ©ç©ºé—´ä¾ç„¶æ˜¯å¸¸æ•°çº§åˆ«ä½œä¸º1ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯logä»¥2ä¸ºåº•nçš„å¯¹æ•°</p>\n<p>ä»¥ä¸Šåªæ˜¯å¯¹ç®—æ³•å¤æ‚åº¦çš„ç®€å•æ¶‰çŒï¼Œå¯èƒ½æœ‰ç†è§£ä¸å½“çš„é”™è¯¯âŒ</p>\n<p><strong>end</strong></p>\n","site":{"data":{}},"excerpt":"<p>ç®—æ³•è¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ç®€å•ç†è§£<br></p>","more":"<br><em>å’ŒåŒå­¦èœé¸¡äº’å•„äº†ä¸€ç•ªä¹‹åæˆåŠŸéªŒè¯äº†å¤§å­¦çš„çŸ¥è¯†æ—©å·²è¿˜ç»™è€å¸ˆ</em><p></p>\n<h1 id=\"ç®—æ³•\"><a href=\"#ç®—æ³•\" class=\"headerlink\" title=\"ç®—æ³•\"></a>ç®—æ³•</h1><p><strong>ç®—æ³•</strong>ï¼ˆalgorithmï¼‰ï¼Œåœ¨æ•°å­¦ï¼ˆç®—å­¦ï¼‰å’Œè®¡ç®—æœºç§‘å­¦ä¹‹ä¸­ï¼Œä¸ºä»»ä½•è‰¯å®šä¹‰çš„å…·ä½“è®¡ç®—æ­¥éª¤çš„ä¸€ä¸ªåºåˆ—ï¼Œå¸¸ç”¨äºè®¡ç®—ã€æ•°æ®å¤„ç†å’Œè‡ªåŠ¨æ¨ç†ã€‚ç²¾ç¡®è€Œè¨€ï¼Œç®—æ³•æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸ºæœ‰é™é•¿åˆ—è¡¨çš„æœ‰æ•ˆæ–¹æ³•ã€‚ç®—æ³•åº”åŒ…å«æ¸…æ™°å®šä¹‰çš„æŒ‡ä»¤ç”¨äºè®¡ç®—å‡½æ•°</p>\n<p>è¯´ä¸ªç²—æµ…çš„è§‚ç‚¹ï¼šåœ¨JSä¸­å®šä¹‰çš„å‡½æ•°éƒ½æ˜¯ç®—æ³•</p>\n<h1 id=\"ç®—æ³•å¤æ‚åº¦\"><a href=\"#ç®—æ³•å¤æ‚åº¦\" class=\"headerlink\" title=\"ç®—æ³•å¤æ‚åº¦\"></a>ç®—æ³•å¤æ‚åº¦</h1><p>é’ˆå¯¹ä½ çš„ç¨‹åºä¸­ç®—æ³•çš„ä¼˜åŠ£ã€æ€§èƒ½å¥½åæœ‰ä¸ªè¯„åˆ¤çš„æ ‡å‡†å°±æ˜¯ç®—æ³•çš„å¤æ‚åº¦ï¼Œä¸»è¦åˆ†ä¸ºæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ç§ï¼Œä½¿ç”¨å¤§å†™å­—æ¯Oè¡¨ç¤º</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦(Time complexity)ï¼šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šæ€§æè¿°è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚é€šå¸¸ä½¿ç”¨ç®—æ³•çš„æœ€åæƒ…å†µå¤æ‚åº¦ï¼Œè®°ä¸º T(n)</li>\n<li>ç©ºé—´å¤æ‚åº¦(Space Complexity)ï¼šæ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦</li>\n</ul>\n<p><em>ç®—æ³•çš„è¿è¡Œæ—¶é—´å…¶å®å°±æ˜¯è®¡ç®—ä½ çš„ç®—æ³•åœ¨æŒ‡å®šæ¡ä»¶ä¸‹æ‰§è¡Œçš„æ¬¡æ•°å°±æ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œè€Œç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€è¦å¼€è¾Ÿè¾…åŠ©å†…å­˜çš„æ¬¡æ•°åˆ™æ˜¯ç©ºé—´å¤æ‚åº¦</em></p>\n<p><strong><em>æ‰€ä»¥è¯´ç®—æ³•è¿è¡Œçš„æ¬¡æ•°å’Œæ·±åº¦åˆ†åˆ«ä»£è¡¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</em></strong></p>\n<h1 id=\"æ—¶é—´å¤æ‚åº¦\"><a href=\"#æ—¶é—´å¤æ‚åº¦\" class=\"headerlink\" title=\"æ—¶é—´å¤æ‚åº¦\"></a>æ—¶é—´å¤æ‚åº¦</h1><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°f(n)ï¼Œè¿›è€Œåˆ†æf(n)éšnçš„å˜åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚è¿™é‡Œç”¨â€Oâ€æ¥è¡¨ç¤ºæ•°é‡çº§ï¼Œç»™å‡ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦</p>\n<p>T(n)=O(f(n))</p>\n<p>å®ƒè¡¨ç¤ºéšç€é—®é¢˜è§„æ¨¡çš„nçš„å¢å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œè¿™ç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚è€Œæˆ‘ä»¬ä¸€èˆ¬è®¨è®ºçš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ï¼šæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ç®—æ³•åœ¨ä»»ä½•è¾“å…¥å®ä¾‹ä¸Šè¿è¡Œæ—¶é—´çš„ä¸Šç•Œï¼Œåˆ†ææœ€åçš„æƒ…å†µä»¥ä¼°ç®—ç®—æ³•æŒ‡å‘æ—¶é—´çš„ä¸€ä¸ªä¸Šç•Œ</p>\n<ul>\n<li>æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡½æ•°ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°</li>\n<li>ä¸€èˆ¬é»˜è®¤çš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œå³åˆ†ææœ€åæƒ…å†µä¸‹æ‰€èƒ½æ‰§è¡Œçš„æ¬¡æ•°</li>\n<li>å¿½ç•¥æ‰å¸¸æ•°é¡¹</li>\n<li>å…³æ³¨è¿è¡Œæ—¶é—´çš„å¢é•¿è¶‹åŠ¿ï¼Œå…³æ³¨å‡½æ•°å¼ä¸­å¢é•¿æœ€å¿«çš„è¡¨è¾¾å¼ï¼Œå¿½ç•¥ç³»æ•°</li>\n<li>è®¡ç®—æ—¶é—´å¤æ‚åº¦æ˜¯ä¼°ç®—éšç€nçš„å¢é•¿å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿</li>\n<li>é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šé€’å½’æ€»æ¬¡æ•° * æ¯æ¬¡é€’å½’ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•°</li>\n</ul>\n<h1 id=\"ç©ºé—´å¤æ‚åº¦\"><a href=\"#ç©ºé—´å¤æ‚åº¦\" class=\"headerlink\" title=\"ç©ºé—´å¤æ‚åº¦\"></a>ç©ºé—´å¤æ‚åº¦</h1><p>ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯è®¡ç®—å®é™…å ç”¨çš„ç©ºé—´ï¼Œè€Œæ˜¯è®¡ç®—æ•´ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´å•å…ƒçš„ä¸ªæ•°ï¼Œä¸é—®é¢˜çš„è§„æ¨¡æ²¡æœ‰å…³ç³»ã€‚ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦S(n)å®šä¹‰ä¸ºè¯¥ç®—æ³•æ‰€è€—è´¹ç©ºé—´çš„æ•°é‡çº§</p>\n<p>S(n)=O(f(n)) è‹¥ç®—æ³•æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„è¾…åŠ©ç©ºé—´ç›¸å¯¹äºè¾“å…¥æ•°æ®é‡nè€Œè¨€æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œåˆ™ç§°è¿™ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´ä¸ºO(1)</p>\n<p>é€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼šé€’å½’æ·±åº¦ N * æ¯æ¬¡é€’å½’æ‰€è¦çš„è¾…åŠ©ç©ºé—´ï¼Œ å¦‚æœæ¯æ¬¡é€’å½’æ‰€éœ€çš„è¾…åŠ©ç©ºé—´æ˜¯å¸¸æ•°ï¼Œåˆ™é€’å½’çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(N)</p>\n<h1 id=\"åŸºç¡€ç®—æ³•\"><a href=\"#åŸºç¡€ç®—æ³•\" class=\"headerlink\" title=\"åŸºç¡€ç®—æ³•\"></a>åŸºç¡€ç®—æ³•</h1><p>åŸºç¡€ç®—æ³•æœ‰å¾ˆå¤šï¼Œæ’åºã€é€’å½’ã€äºŒåˆ†æ³•ã€è´ªå©ªç®—æ³•ã€å›æº¯ç­‰ï¼Œä»¥ä¸‹ç®€è¦åˆ—ä¸¾ç®€å•ä¸ºä¸»</p>\n<h2 id=\"å†’æ³¡æ’åº\"><a href=\"#å†’æ³¡æ’åº\" class=\"headerlink\" title=\"å†’æ³¡æ’åº\"></a>å†’æ³¡æ’åº</h2><p>æ ¸å¿ƒä»£ç ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// arr</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> j = <span class=\"number\">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (arr[j] &gt; arr[j+<span class=\"number\">1</span>]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> temp = arr[j+<span class=\"number\">1</span>]</span><br><span class=\"line\">      arr[j+<span class=\"number\">1</span>] = arr[j]</span><br><span class=\"line\">      arr[j] = temp</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p><em>æ­¤å¤„åªè¡¨è¿°æœ€åŸºæœ¬çš„æƒ…å†µï¼Œä¸ä¼˜åŒ–ä»»ä½•ä»£ç </em></p>\n<p>è¯¥å†’æ³¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼š<br>ä»è¿è¡Œæ¬¡æ•°çš„è§’åº¦æ¥åˆ†æï¼Œè®¾æ•°ç»„é•¿åº¦ä¸ºnï¼Œä¸¤å±‚forloopæ­£å¥½ç»„æˆä¸€ä¸ª n * n çš„çŸ©é˜µï¼Œæ‰€ä»¥æ€»æ¬¡æ•°ä¸º n^2<br>æ‰€ä»¥è¯¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)</p>\n<p>è¯¥å†’æ³¡ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ï¼š<br>ä»æ¯æ¬¡å¼€è¾Ÿçš„å†…å­˜æ¥çœ‹è¯¥ç®—æ³•æ¯æ¬¡åªæ˜¯ä½¿ç”¨ä¹‹å‰ç³»ç»Ÿçš„åˆ†é…çš„å†…å­˜ï¼ˆå­˜å‚¨arrï¼‰ï¼Œæ‰€ä»¥å†’æ³¡æ’åºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)</p>\n<h2 id=\"é€’å½’\"><a href=\"#é€’å½’\" class=\"headerlink\" title=\"é€’å½’\"></a>é€’å½’</h2><p>é€’å½’æ˜¯å¾ˆå¸¸è§çš„ç®—æ³•ï¼Œä½¿ç”¨å¾—å½“ä¸ä»…å¯ä»¥ä½¿ä»£ç æ›´ä¸ºç®€æ´ä¹Ÿå¯å¸¦æ¥æ˜¾è‘—æ€§èƒ½æå‡ï¼ˆåƒä¹‹å‰åšå®¢ä¸­æè¿‡çš„å°¾é€’å½’ï¼‰ï¼Œé‚£ä¹ˆé€’å½’ç®—æ³•çš„å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—å‘¢</p>\n<p><em>åªè€ƒè™‘æœ‰ç»ˆæ­¢æ¡ä»¶çš„é€’å½’ï¼Œæ­»å¾ªç¯çš„é€’å½’çš„å¤æ‚åº¦å½“ç„¶æ˜¯æ— ç©·å¤§äº†</em></p>\n<p>é€’å½’demoï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> n = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">recursion</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n &gt; <span class=\"number\">1</span>)</span><br><span class=\"line\">    n-- &amp;&amp; recursion()</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'end of the recursive'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šè¿°æ˜¯ä¸€ä¸ªä¼šå¾ªç¯æ‰§è¡Œ10æ¬¡å°±ç»ˆæ­¢çš„ç®€å•é€’å½’<br>è¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦ï¼š<br>è®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ä¾‹å­çš„ç»ˆæ­¢æ¡ä»¶ï¼Œè¯¥é€’å½’çš„æ—¶é—´å¤æ‚åº¦å³ä¸ºO(n)<br>è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ï¼š<br>è®¾é€’å½’çš„æ‰§è¡Œæ¬¡æ•°ä¸ºnï¼Œæ¯æ¬¡é€’å½’éƒ½è¦å¼€è¾Ÿæ–°çš„æ ˆå¸§ï¼ˆå¸¸æ•°çº§åˆ«ä½œ1ï¼‰ä¿ç•™åœ¨è°ƒç”¨æ ˆä¸­ä»¥ç”¨æ¥å­˜å‚¨è¿”å›ä¿¡æ¯ï¼Œæ‰€ä»¥è¯¥é€’å½’çš„ç©ºé—´å¤æ‚åº¦ n * 1 å³ä¸ºO(n)</p>\n<h2 id=\"äºŒåˆ†æ³•\"><a href=\"#äºŒåˆ†æ³•\" class=\"headerlink\" title=\"äºŒåˆ†æ³•\"></a>äºŒåˆ†æ³•</h2><p>äºŒåˆ†æ³•æœ¬è´¨ä¾ç„¶æ˜¯ä½¿ç”¨é€’å½’ä¸æ–­ç­‰åˆ†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * @description: dichotomy</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Array&#125; arr å…¥å‚æ•°ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;any&#125; val match</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Number&#125; l ç´¢å¼•å¼€å§‹</span></span><br><span class=\"line\"><span class=\"comment\"> * @param &#123;Number&#125; r ç´¢å¼•ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dichotomy</span>(<span class=\"params\">arr, val, l, r </span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> mid = <span class=\"built_in\">Math</span>.floor((l + r) / <span class=\"number\">2</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> midval = arr[mid]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (l &gt; r) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'no match'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (midval === val) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">'has match, index is '</span>, mid)</span><br><span class=\"line\"></span><br><span class=\"line\">    midval &gt; val</span><br><span class=\"line\">      ? dichotomy(arr, val, l, mid - <span class=\"number\">1</span>)</span><br><span class=\"line\">      : dichotomy(arr, val, mid + <span class=\"number\">1</span>, r)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>]</span><br><span class=\"line\">dichotomy(arr, <span class=\"number\">3</span>, <span class=\"number\">0</span>, arr.length - <span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// optput:</span></span><br><span class=\"line\"><span class=\"comment\">// has match, index is  2</span></span><br></pre></td></tr></table></figure>\n<p>ç®—æ³•çš„æ‰§è¡Œæ˜¯ä¸æ–­ç­‰åˆ†æ•°ç»„ï¼Œç›´åˆ°æ— æ³•åŒ¹é…è¦æŸ¥æ‰¾çš„æ•°æ®<br>è®¾æ•°ç»„åˆå§‹é•¿åº¦ä¸º nï¼Œç¬¬ä¸€æ¬¡é€’å½’åé•¿åº¦ä¸º n/2ï¼Œç¬¬äºŒæ¬¡ç­‰åˆ†åé•¿åº¦ä¸º n/4â€¦<br>.<br>.<br>.<br>ç¬¬ x ç­‰åˆ†åé•¿åº¦ä¸º n/2^x<br>è€Œç®—æ³•æ‰§è¡Œçš„æœ€å·®çš„æƒ…å†µå°±æ˜¯æ¯ä¸ªç­‰åˆ†çš„é•¿åº¦ä¸º1ï¼Œ1å°±æ˜¯ä¸´ç•Œå€¼<br>æ‰€ä»¥å¦ n/2^x = 1 æ—¶å¯å¾—åˆ°ç­‰åˆ†çš„æ¬¡æ•°ä¸º x = logä»¥2ä¸ºåº•nçš„å¯¹æ•°</p>\n<p>æ‰€ä»¥äºŒåˆ†æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºlogä»¥2ä¸ºåº•nçš„å¯¹æ•°ï¼ˆæ‰“ä¸å‡ºä¸Šæ ‡ä¸‹æ ‡ğŸ¤•ï¼‰<br>æ¯æ¬¡éœ€è¦çš„è¾…åŠ©ç©ºé—´ä¾ç„¶æ˜¯å¸¸æ•°çº§åˆ«ä½œä¸º1ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯logä»¥2ä¸ºåº•nçš„å¯¹æ•°</p>\n<p>ä»¥ä¸Šåªæ˜¯å¯¹ç®—æ³•å¤æ‚åº¦çš„ç®€å•æ¶‰çŒï¼Œå¯èƒ½æœ‰ç†è§£ä¸å½“çš„é”™è¯¯âŒ</p>\n<p><strong>end</strong></p>"},{"title":"å°ç¨‹åºçš„è·¯ç”±å°è£…","date":"2018-12-09T08:00:00.000Z","_content":"\nåŸºäº `mpvue` å°ç¨‹åºçš„è·¯ç”±å°è£…\n\n<!--more-->\n\n[toc]\n\n## åŸºæœ¬ä½¿ç”¨\n\nç»„ä»¶å†…ä½¿ç”¨æ–¹æ³•ï¼š\n```js\n\n  // ä¸æºå¸¦è·¯ç”±å‚æ•°\n  this.$router.push('/home/page/index')\n  // æºå¸¦è·¯ç”±å‚æ•°\n  this.$router.push({\n    path: '/home/page/index',\n    query: {\n      //\n    },\n    reLaunch: true, // è°ƒç”¨wx.reLaunch\n    isTab: true // è°ƒç”¨wx.switchTag\n  })\n\n  // è¯»å–å½“å‰é¡µé¢è·¯ç”±å‚æ•°\n\n  const { query } = this.$route\n\n```\nç»„ä»¶å¤–éƒ¨ä½¿ç”¨åªéœ€è¦å¼•å…¥router.jså†…éƒ¨å¯¼å‡ºçš„pushæ–¹æ³•å³å¯\n\n\n## å°è£…èµ·æ­¥\n\nåˆ†ä¸ºä¸¤ç‚¹åˆ‡å…¥ï¼š\n  1. äº†è§£å¾®ä¿¡æä¾›çš„api\n  2. è‡ªå·±çš„éœ€æ±‚\n\næ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š\n\n- å¯¹å¾®ä¿¡å°ç¨‹åºçš„ `switchTabã€reLaunchã€navigateToã€redirectTo` äºŒæ¬¡å°è£…ï¼Œå¯¹å¤–æš´éœ²pushæ–¹æ³•ï¼ŒåŒæ—¶å°†è·¯ç”±å®ä¾‹æŒ‚è½½åœ¨vueä¸Šï¼Œç»„ä»¶å†…éƒ¨é€šè¿‡ `this.$router.push` è°ƒç”¨ï¼Œç»„ä»¶å¤–éƒ¨å¯ä½¿ç”¨å¯¹å¤–æš´éœ²çš„pushæ–¹æ³•è¿›è¡Œé¡µé¢è·³è½¬ã€‚é¡µé¢å†…æ•°æ®é€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’é€šè¿‡ `this.$route.query` è¯»å–ã€‚\n\n- è·¯ç”±é»˜è®¤è·³è½¬ä¸º `wx.navigateTo` é™æ€è·³è½¬ï¼Œè°ƒç”¨å…¶ä»–è·³è½¬æ–¹å¼éœ€ä¼ é€’ç›¸åº”å‚æ•°\n\n* å°è£…çš„è·³è½¬ä¼˜å…ˆçº§ï¼š\n```\n    wx.switchTab >> wx.reLaunch >> wx.navigateTo\n```\n\n- è·¯ç”±æ‹¥æœ‰æ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºå…¨å±€æ‹¦æˆªå’Œé’ˆå¯¹æŒ‡å®šé¡µé¢æ ¹æ® `path` æ‹¦æˆªã€‚\n\n_æ³¨æ„ï¼š è·¯ç”±ä¸æ”¯æŒæŒ‡å®š `wx.redireactTo` è·³è½¬ï¼Œæ­¤æ–¹æ³•ç”¨äºè·¯ç”±å†…éƒ¨å¤„ç†å°ç¨‹åºå †æ ˆæº¢å‡ºï¼ˆå½“å‰å°ç¨‹åºé™æ€é¡µé¢å †æ ˆä»…æ”¯æŒåå±‚ï¼‰_\n\n\nä¸‹é¢æˆ‘ä¼šç”±ä¸åŒçš„éœ€æ±‚ä»¥é—®ç­”æ–¹å¼ä¸€æ­¥æ­¥å®Œæˆæ•´ä¸ªè·¯ç”±çš„ç®€å•å°è£…åŒæ—¶è®²è¿°å„ä¸ªéƒ¨åˆ†å¯èƒ½é‡åˆ°çš„é—®é¢˜\n\n\n### å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\n\n_éœ€æ±‚ï¼šé¡µé¢å†…ä½¿ç”¨ `this.$router.push` æ–¹æ³•è·³è½¬é¡µé¢_\n\né¦–å…ˆå°±æ˜¯æ–°å»º `index.js` è‡ªå®šä¹‰ä¸€ä¸ªæœ€åŸºæœ¬çš„ `push` æ–¹æ³•ç”¨æ¥è·³è½¬é¡µé¢\n\n``` js\n  // location ä¸ºè·¯ç”±ä¼ å‚\n  function push(location) {\n\n    const params = { url: location.path }\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n    } else if (location.redirect) {\n      wx.redirectTo(params)\n    } else {\n      wx.navigateTo(params)\n    }\n  }\n```\n\nç„¶åä¸ºäº†è®©æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦å°† `push` æ–¹æ³•æŒ‚è½½åœ¨é¡µé¢çš„å®ä¾‹ä¸Š, åŒæ—¶ä½¿ç”¨æ’ä»¶å¼è°ƒç”¨åœ¨ `index.js` æ–‡ä»¶ä¸­å¯¼å‡º `install` æ–¹æ³•\n\n``` js\n  // å¯¼å‡º\n  export default {\n    install(Vue) {\n\n      const _router = {\n        mode: 'history',\n        push\n      }\n      // å®šä¹‰æè¿°ç¬¦getterï¼ˆä¹Ÿå¯ç›´æ¥èµ‹å€¼valueï¼‰\n      const $router = {\n        get() {\n          return _router\n        }\n      }\n      // æŒ‚è½½ (å„å‡­å–œå¥½ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼åœ¨prototypeä¸Šï¼‰\n      Object.defineProperty(Vue.prototype, '$router', $router)\n    }\n  }\n```\n\næ¥ä¸‹æ¥åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶æ³¨å…¥ä¸Šé¢ `index.js` æ–‡ä»¶å¹¶æ‰§è¡Œ `Vue.use`\n\n``` js\n  import Vue from 'vue'\n  import router from './index.js'\n  \n  Vue.use(router) \n```\n\nå³å¯åœ¨ä»»æ„é¡µé¢ä½¿ç”¨ `this.$router.push` æ–¹æ³•å¹¶ä¼ å…¥ç›¸åº”è·³è½¬æ–¹å¼å’Œè·¯å¾„\n\nè¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š é¡¹ç›®è·³è½¬ä¸ºäº†æ›´ç¾è§‚ä¸»è¦ä½¿ç”¨ `wx.navigateTo`ï¼Œ è€Œå¾®ä¿¡å°ç¨‹åºæœ€å¤§é¡µé¢å †æ ˆåªæ”¯æŒ10å±‚ï¼Œæ‰€ä»¥è¯´é¡¹ç›®ä¸­å¦‚æœé¡µé¢è·³è½¬æå¤šæˆ–è€…å­˜åœ¨ç›¸äº’å…³è”çš„é¡µé¢äº’ç›¸è·³è½¬ä¾¿å®¹æ˜“å¯¼è‡´å †æ ˆæº¢å‡ºé¡µé¢ä¸è·³è½¬çš„æƒ…å†µï¼Œè¿™ä¸ªé—®é¢˜åœ¨å®Œæˆè·¯ç”±åŸºæœ¬åŠŸèƒ½åå•ç‹¬è§£é‡Š\n\n### é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\n\n_éœ€æ±‚ï¼š é¡µé¢å†…è·³è½¬é€šè¿‡è·¯ç”±å‚æ•° `query` å­—æ®µä¼ å‚ï¼Œ é€šè¿‡ `this.$route.query` è¯»å–å‚æ•°_\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿç®€å•è§£æ `push` æ–¹æ³•å‚æ•°çš„åŠŸèƒ½å‹å‡½æ•° `parseUrl`ï¼Œé‡Œé¢åŒ…æ‹¬å°†æ‰€ä¼ çš„ `query` å­—æ®µä»¥åœ°å€æ å‚æ•°å½¢å¼æ‹¼æ¥åœ¨ `path` åé¢çš„ä¸€ä¸ª `stringifyQuery` å‡½æ•°\n\n``` js\n  function parseUrl(location) {\n    const { path, query } = location\n    const queryStr = stringifyQuery(query)\n\n    return `${path}${queryStr}`\n  }\n\n  function stringifyQuery(obj) {\n    const res = obj\n      ? Object.keys(obj)\n          .filter(Boolean)\n          .map(key => {\n            let val = obj[key]\n\n            if ([Array, Object].includes(val.constructor)) {\n              val = JSON.stringify(obj[key])\n            }\n            return `${key}=${val}`\n          })\n          \n          .join('&')\n      : null\n\n    return res ? `?${res}` : ''\n  }\n```\n\næŠŠ `parseUrl` æ–¹æ³•æ·»åŠ åˆ°ä¸Šé¢çš„ `push` æ–¹æ³•ï¼ŒåŒæ—¶å‚æ•°å†…éƒ¨æ˜¯æ”¯æŒå°ç¨‹åºè·¯ç”±è·³è½¬è¿‡ç¨‹çš„`success`, `fail`, `complete` é’©å­çš„ \n\n``` js\n  // location ä¸ºè·¯ç”±ä¼ å‚\n  function push(location) {\n    // others ä¸ºç”¨æˆ·å¯èƒ½ä¼ é€’çš„ `success`, `fail`, `complete`\n    const { path, query, ...others } = location\n\n    const url = parseUrl({ path, query })\n\n    const params = { url, ...others }\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n    } else if (location.redirect) {\n      wx.redirectTo(params)\n    } else {\n      wx.navigateTo(params)\n    }\n  }\n```\nä»¥ä¸Šè·¯ç”±ä¼ å‚å¹¶è§£æéƒ¨åˆ†å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥è¯»å–å‚æ•°çš„æ§åˆ¶éœ€è¦å®šä¹‰ä¸€ä¸ª `$route` å¯¹è±¡ä¸å‰é¢çš„ `$router` ä¸€è‡´æŒ‚è½½é¡µé¢å®ä¾‹ä¸Š\n\nè¿™ä¸€å±‚è¯»mpvueçš„å®ä¾‹åˆ›å»ºä¸€ä¸ª `parseRoute` å‡½æ•°ç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®å³å¯\n\næ­¤å¤„é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š ä¹‹å‰åªæ˜¯ä½¿ç”¨JSON.parseç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®ï¼Œå½“æ•°æ®ä¸ºé•¿æ•´å‹å­—ç¬¦ä¸²ï¼ˆé•¿åº¦è¶…è¿‡17ä½ï¼‰ä¼šä¸¢å¤±ç²¾åº¦è½¬0\nä»¥ä¸‹åŒæ—¶ç®€å•å¤„ç†ä¸€ä¸‹\n\n``` js\n  function parseRoute($mp) {\n    // $mp ä¸ºmpvueå®ä¾‹rootä¸ŠæŒ‚è½½çš„å¯¹è±¡\n    const _mp = $mp || {}\n    const path = _mp.page && _mp.page.route\n    const parseQuery = {}\n    const tempQuery = _mp.query\n\n    for (let k in tempQuery) {\n      let cur = tempQuery[k]\n\n      try {\n        // è§£å†³é•¿æ•´å‹ä¸¢å¤±ç²¾åº¦\n        const transfer = JSON.parse(tempQuery[k])\n\n        if (!(typeof transfer === 'number')) {\n          cur = transfer\n        }\n      } catch (e) {}\n\n      parseQuery[k] = cur\n    }\n\n    return {\n      parseQuery\n    }\n  }\n```\n\næœ€ç»ˆæŒ‚è½½åœ¨é¡µé¢å®ä¾‹ä¸Šï¼Œç”±äºè·¯ç”±å‚æ•°æ¯æ¬¡è·³è½¬éƒ½è¦æ›´æ–°æ‰€ä»¥æŒ‚è½½åœ¨å°ç¨‹åº `onShow` é’©å­ä¸Š\n\n``` js\n  const _route = {}\n\n  Vue.mixin({\n    onShow() {\n      const { $mp } = this.$root\n\n      _route = parseRoute($mp)\n    }\n  })\n\n  const $route = {\n    get() {\n      return _route\n    }\n  }\n\n  Object.defineProperty(Vue.prototype, '$route', $route)\n```\nä»¥ä¸Šä¾¿å®Œæˆè·¯ç”±å‚æ•°çš„è¯»å†™\n\n### è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\n\nå°ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä¸‹é¢å°±æ˜¯å †æ ˆçš„é™åˆ¶ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è·³è½¬å‰ç›‘å¬å½“å‰å †æ ˆçš„é•¿åº¦ï¼Œæ ˆæ»¡æ—¶æ”¹ç”¨é‡å®šå‘æ–¹æ³• `wx.redirectTo` å³å¯ï¼ˆå…¶ä»–æ—¶é—´é¡¹ç›®ä¸­ä»…ä½¿ç”¨ `navigateTo` å³å¯ï¼‰\n\né¦–å…ˆéœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡è®°å½•å †æ ˆé•¿åº¦(å¾®ä¿¡æä¾›ä¸€ä¸ªgetCurrentPagesçš„æ–¹æ³•)ï¼Œ åŒæ—¶æ›´æ”¹ `push` æ–¹æ³•\n\n``` js\n  // å½“å‰é¡µé¢å †æ ˆé•¿åº¦\n  let pageStackLen = 0\n  // å †æ ˆé™åˆ¶\n  const maxStackLen = 10\n\n  function push(location, success, ...ohters) {\n    pageStackLen = getCurrentPages().length + 1\n\n    const url = parseUrl(location)\n\n    // åŒ…è£…è·³è½¬æˆåŠŸçš„å›è°ƒ\n    const _success = function() {\n      pageStackLen = getCurrentPages().length + 1\n\n      success && success()\n    }\n\n    const params = { url, success: _success, ...ohters}\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n      pageStackLen = 1\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n\n      pageStackLen = 1\n    } else {\n      if (pageStackLen >= maxStackLen) {\n        wx.redirectTo(params)\n        return\n      }\n      wx.navigateTo(params)\n    }\n  }\n```\nä»¥ä¸ŠåŸºæœ¬è§£å†³å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\n\n### å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\n\nç°åœ¨å¯¹è·¯ç”±çš„è·³è½¬åšä¸€äº›åŸºæœ¬è¾…åŠ©åŠŸèƒ½çš„æ”¯æŒ `go`ã€ `back`, `replace` ç­‰æ–¹æ³•\n\n``` js\n  function replace(location, ...others) {\n    const url = parseUrl(location)\n\n    wx.redirectTo({\n      url,\n      ...others\n    })\n  }\n\n  function go(delta) {\n    wx.navigateBack({\n      delta\n    })\n  }\n\n  function back() {\n    wx.navigateBack()\n  }\n```\n\nå°†è¿™äº›æŒ‚åˆ° `$router` å¯¹è±¡\n\n``` js\n  const _router = {\n    mode: 'history',\n    push,\n    replace,\n    go,\n    back\n  }\n\n  const $router = {\n    get() {\n      return _router\n    }\n  }\n\n```\n\næ­¤å¤–è¿˜æœ‰æˆ‘ä»¬ä¸éœ€è¦é¡µé¢ä¹‹é—´ä¼ å‚æ—¶æ—¶pushæ–¹æ³•ç›´æ¥ä¼ å­—ç¬¦ä¸²è·¯å¾„ï¼Œè·¯ç”±å…¬ç”¨è·¯å¾„çœç•¥ï¼Œpushè°ƒç”¨ä¼ åŸºæœ¬è·¯å¾„è‡ªåŠ¨è¡¥é½, å•ç‹¬å¯¼å‡º `push` æ–¹æ³•æ–¹ä¾¿ç»„ä»¶å¤–éƒ¨è°ƒç”¨ç­‰ä¼˜åŒ–\n\næœ€åæˆ‘ä»¬è¿˜å·®è·¯ç”±æ‹¦æˆªå™¨åŠŸèƒ½çš„å®ç°\n\n### è·¯ç”±æ‹¦æˆªå™¨\n\néœ€æ±‚ï¼š å¯¹è±¡å½¢å¼é…ç½®è‡ªå·±è·¯ç”±è§„åˆ™\n  - `[triggerAll]`ï¼š æ‰€æœ‰è·¯ç”±è·³è½¬å‡ä¼šè§¦å‘\n  - `[triggerMatch]`ï¼š åŒ¹é…æŒ‡å®šè·¯ç”±ï¼Œå…¶ä¸­å¯é…ç½®å¤šä¸ªè§„åˆ™ï¼Œä»¥å‡½æ•°æ•°ç»„å½¢å¼ä¼ å…¥ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å‡½æ•°éƒ½ä¼šåœ¨è¢«åŒ¹é…æ—¶è§¦å‘\n\nå‚æ•°ä»‹ç»ï¼š\n- `config`: æºå¸¦å½“å‰è·¯ç”±è·³è½¬ä¿¡æ¯ï¼ˆè·¯ç”±å‚æ•°ï¼‰\n- `to`: æ§åˆ¶è·³è½¬ï¼ˆè°ƒç”¨ `to()` ï¼‰\n\n\nä½¿ç”¨æ–¹å¼ï¼š\n\n``` js\nexport default {\n  triggerAll(config, to) {\n    console.log(config, 'enter interceptor')\n    to()\n  },\n  triggerMatch: {\n    '/home/pages/categoryList': [\n      (config, to) => {\n        if (/*flag*/) {\n          console.log(1)\n          to()\n        }\n      }\n    ]\n  }\n}\n```\n\næœ¬è´¨ä¸Šè¿˜æ˜¯å°†ä¹‹å‰å°è£…çš„è·¯ç”±æš´éœ²å‡ºæ¥çš„pushæ–¹æ³•å†æ¬¡å°è£…ä¸€å±‚ï¼Œå…¶ä¸­åŠ å…¥è‡ªå·±çš„é€»è¾‘è¾¾åˆ°ç›®çš„\n\næ–°å»º `interceptor.js`\n\né¦–å…ˆå¼•å…¥ä¹‹å‰çš„è·¯ç”±æ–¹ä¾¿åœ¨å®ä¾‹ä¸Šè°ƒç”¨ï¼Œå®šä¹‰ `triggerMatch` çš„å¯¹è±¡å­˜å‚¨å­˜å…¥çš„å‡½æ•° `key` ä¸ºå½“å‰è·¯ç”±çš„è·¯å¾„ï¼Œ`value` ä¸º ä¸­é—´ä»¶å‡½æ•°ç»„æˆçš„æ•°ç»„\n\nå…³é”®ï¼š å°† `push` æ–¹æ³•å½“åšå•ç‹¬çš„ä¸€ä¸ªä¸­é—´ä»¶å¹¶æ”¾åœ¨æ‰€æœ‰ä¸­é—´ä»¶çš„æœ€åæ‰§è¡Œ\n\n``` js\n  // å¼•å…¥\n  import router from './index.js'\n  // æŒ‚è½½\n  Vue.use(router)\n  // å­˜åŒ¹é…æŒ‡å®šè·¯ç”±çš„ä¸šåŠ¡å‡½æ•°\n  let matchMiddlewares = {}\n\n```\næ¥ä¸‹æ¥è¦æ„å»ºä¸€ä¸ªå¤„ç†æ¨å…¥è§„åˆ™çš„ä¸šåŠ¡å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰çš„ `compose` å‡½æ•°\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªï¼š\n - ä¾æ¬¡æ´¾å‘æ¨å…¥æ‹¦æˆªå™¨çš„ä¸šåŠ¡å‡½æ•°\n - æ§åˆ¶ä¸‹ä¸€æ¬¡æ´¾å‘çš„å¼€å§‹\n\n``` js\n  const compose = middlewares => (...args) => {\n    function dispatch(i) {\n      return !middlewares[i]\n        ? Promise.resolve('no arguments')\n        : Promise.resolve(\n            middlewares[i](...args, function() {\n              // æ´¾å‘ä¸‹ä¸ªè°ƒç”¨\n              // æ­¤å¤„å³æ˜¯æ‹¦æˆªå™¨ä¸­ç¬¬äºŒä¸ªå®å‚ to æ–¹æ³•çš„å‡½æ•°ä½“\n              // è°ƒåŠ¨ to() å³å¼€å¯ä¸‹ä¸€æ¬¡æ´¾å‘\n              return dispatch(++i)\n            })\n          )\n    }\n    // å¼€å¯è°ƒç”¨\n    return dispatch(0)\n  }\n```\n\nåˆ›å»ºä¸€ä¸ªå‡½æ•° `getMatchMiddlewares` ç”¨æ¥æ ¹æ®æŒ‡å®šé”®å€¼è¯»å– `matchMiddlewares` ä¸­ä¸­é—´ä»¶å‡½æ•°æ•°ç»„\n\n```js\n  function getMatchMiddlewares(path) {\n    return matchMiddlewares.hasOwnProperty(path) ? matchMiddlewares[path] : []\n  }\n```\n\n\nè·¯ç”±åŒæ ·ä½¿ç”¨ `Vue.use` æ–¹æ³•æ³¨å†Œï¼Œè¿™é‡Œå¯¼å‡º `install` æ–¹æ³•, åœ¨é‡Œé¢ç»Ÿä¸€æ‰€æœ‰ä¸­é—´ä»¶å‡½æ•°\n\n``` js\n  // åŒ…è£… push\n  let $push\n\n  function pushMiddware(...args) {\n    $push(...args)\n  }\n\n  export default {\n    install(Vue, { triggerAll, triggerMatch }) {\n      // å­˜å‚¨åŸ push å‡½æ•°\n      $push = Vue.prototype.$router.push\n      // æ¥æ”¶ä¼ å…¥çš„åŒ¹é…å‡½æ•°\n      matchMiddlewares = Object.assign({}, triggerMatch)\n      \n      // é‡æ–°èµ‹å€¼\n      Vue.prototype.$router.push = (...args) => {\n        // åˆå¹¶\n        compose([...getMatchMiddlewares(path), triggerAll, pushMiddware])(\n          ...args\n        )\n      }\n    }\n  }\n\n\n```\n\nä¹‹ååœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å³å¯\n\n``` js\n  import Vue from 'vue'\n  import interceptor from './interceptor.js'\n\n  Vue.use(interceptor)\n```\n\nè‡³æ­¤ä¾¿å®Œæˆäº†è·¯ç”±çš„æ‰€æœ‰åŠŸèƒ½çš„åŸºæœ¬å°è£…\n\nè¯¦ç»†ä»£ç å¯ä»¥æŸ¥çœ‹ [å°ç¨‹åºè·¯ç”±](http://git.yupaopao.com/fe/applet/iverson/tree/master/src/global/lib/router)\n\næ­¤ç¯‡æ–‡ç« å·²ç»å‘å¸ƒåœ¨ [http://doc.yupaopao.com](http://doc.yupaopao.com/pages/viewpage.action?pageId=7176857)\n\n## æ€»ç»“\nè·¯ç”±åŸºæœ¬åŠŸèƒ½çš„å°è£…åŸºæœ¬è‡³æ­¤å·²ç»å…¨éƒ¨å®Œæˆï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€è¦ã€‚ä½†ç”±äºè‡ªèº«æ°´å¹³é™åˆ¶ï¼Œä¼šå­˜åœ¨å„ç±»é—®é¢˜ï¼Œå¸Œæœ›å¤§å®¶æŒ‡å‡ºä¸€èµ·è®¨è®ºï¼Œå…±åŒè¿›æ­¥ã€‚\n\nå¼€æ”¾ã€çœŸå®ï¼peace.\n","source":"_posts/writeSomething/appletRouter.md","raw":"---\ntitle: å°ç¨‹åºçš„è·¯ç”±å°è£…\ntags:\n  - å°è£…\n  - å¾®ä¿¡å°ç¨‹åº\n  - mpvue\n  - è·¯ç”±\ndate: 2018-12-09 16:00:00\ncategories: å°è£…\n---\n\nåŸºäº `mpvue` å°ç¨‹åºçš„è·¯ç”±å°è£…\n\n<!--more-->\n\n[toc]\n\n## åŸºæœ¬ä½¿ç”¨\n\nç»„ä»¶å†…ä½¿ç”¨æ–¹æ³•ï¼š\n```js\n\n  // ä¸æºå¸¦è·¯ç”±å‚æ•°\n  this.$router.push('/home/page/index')\n  // æºå¸¦è·¯ç”±å‚æ•°\n  this.$router.push({\n    path: '/home/page/index',\n    query: {\n      //\n    },\n    reLaunch: true, // è°ƒç”¨wx.reLaunch\n    isTab: true // è°ƒç”¨wx.switchTag\n  })\n\n  // è¯»å–å½“å‰é¡µé¢è·¯ç”±å‚æ•°\n\n  const { query } = this.$route\n\n```\nç»„ä»¶å¤–éƒ¨ä½¿ç”¨åªéœ€è¦å¼•å…¥router.jså†…éƒ¨å¯¼å‡ºçš„pushæ–¹æ³•å³å¯\n\n\n## å°è£…èµ·æ­¥\n\nåˆ†ä¸ºä¸¤ç‚¹åˆ‡å…¥ï¼š\n  1. äº†è§£å¾®ä¿¡æä¾›çš„api\n  2. è‡ªå·±çš„éœ€æ±‚\n\næ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š\n\n- å¯¹å¾®ä¿¡å°ç¨‹åºçš„ `switchTabã€reLaunchã€navigateToã€redirectTo` äºŒæ¬¡å°è£…ï¼Œå¯¹å¤–æš´éœ²pushæ–¹æ³•ï¼ŒåŒæ—¶å°†è·¯ç”±å®ä¾‹æŒ‚è½½åœ¨vueä¸Šï¼Œç»„ä»¶å†…éƒ¨é€šè¿‡ `this.$router.push` è°ƒç”¨ï¼Œç»„ä»¶å¤–éƒ¨å¯ä½¿ç”¨å¯¹å¤–æš´éœ²çš„pushæ–¹æ³•è¿›è¡Œé¡µé¢è·³è½¬ã€‚é¡µé¢å†…æ•°æ®é€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’é€šè¿‡ `this.$route.query` è¯»å–ã€‚\n\n- è·¯ç”±é»˜è®¤è·³è½¬ä¸º `wx.navigateTo` é™æ€è·³è½¬ï¼Œè°ƒç”¨å…¶ä»–è·³è½¬æ–¹å¼éœ€ä¼ é€’ç›¸åº”å‚æ•°\n\n* å°è£…çš„è·³è½¬ä¼˜å…ˆçº§ï¼š\n```\n    wx.switchTab >> wx.reLaunch >> wx.navigateTo\n```\n\n- è·¯ç”±æ‹¥æœ‰æ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºå…¨å±€æ‹¦æˆªå’Œé’ˆå¯¹æŒ‡å®šé¡µé¢æ ¹æ® `path` æ‹¦æˆªã€‚\n\n_æ³¨æ„ï¼š è·¯ç”±ä¸æ”¯æŒæŒ‡å®š `wx.redireactTo` è·³è½¬ï¼Œæ­¤æ–¹æ³•ç”¨äºè·¯ç”±å†…éƒ¨å¤„ç†å°ç¨‹åºå †æ ˆæº¢å‡ºï¼ˆå½“å‰å°ç¨‹åºé™æ€é¡µé¢å †æ ˆä»…æ”¯æŒåå±‚ï¼‰_\n\n\nä¸‹é¢æˆ‘ä¼šç”±ä¸åŒçš„éœ€æ±‚ä»¥é—®ç­”æ–¹å¼ä¸€æ­¥æ­¥å®Œæˆæ•´ä¸ªè·¯ç”±çš„ç®€å•å°è£…åŒæ—¶è®²è¿°å„ä¸ªéƒ¨åˆ†å¯èƒ½é‡åˆ°çš„é—®é¢˜\n\n\n### å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\n\n_éœ€æ±‚ï¼šé¡µé¢å†…ä½¿ç”¨ `this.$router.push` æ–¹æ³•è·³è½¬é¡µé¢_\n\né¦–å…ˆå°±æ˜¯æ–°å»º `index.js` è‡ªå®šä¹‰ä¸€ä¸ªæœ€åŸºæœ¬çš„ `push` æ–¹æ³•ç”¨æ¥è·³è½¬é¡µé¢\n\n``` js\n  // location ä¸ºè·¯ç”±ä¼ å‚\n  function push(location) {\n\n    const params = { url: location.path }\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n    } else if (location.redirect) {\n      wx.redirectTo(params)\n    } else {\n      wx.navigateTo(params)\n    }\n  }\n```\n\nç„¶åä¸ºäº†è®©æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦å°† `push` æ–¹æ³•æŒ‚è½½åœ¨é¡µé¢çš„å®ä¾‹ä¸Š, åŒæ—¶ä½¿ç”¨æ’ä»¶å¼è°ƒç”¨åœ¨ `index.js` æ–‡ä»¶ä¸­å¯¼å‡º `install` æ–¹æ³•\n\n``` js\n  // å¯¼å‡º\n  export default {\n    install(Vue) {\n\n      const _router = {\n        mode: 'history',\n        push\n      }\n      // å®šä¹‰æè¿°ç¬¦getterï¼ˆä¹Ÿå¯ç›´æ¥èµ‹å€¼valueï¼‰\n      const $router = {\n        get() {\n          return _router\n        }\n      }\n      // æŒ‚è½½ (å„å‡­å–œå¥½ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼åœ¨prototypeä¸Šï¼‰\n      Object.defineProperty(Vue.prototype, '$router', $router)\n    }\n  }\n```\n\næ¥ä¸‹æ¥åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶æ³¨å…¥ä¸Šé¢ `index.js` æ–‡ä»¶å¹¶æ‰§è¡Œ `Vue.use`\n\n``` js\n  import Vue from 'vue'\n  import router from './index.js'\n  \n  Vue.use(router) \n```\n\nå³å¯åœ¨ä»»æ„é¡µé¢ä½¿ç”¨ `this.$router.push` æ–¹æ³•å¹¶ä¼ å…¥ç›¸åº”è·³è½¬æ–¹å¼å’Œè·¯å¾„\n\nè¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š é¡¹ç›®è·³è½¬ä¸ºäº†æ›´ç¾è§‚ä¸»è¦ä½¿ç”¨ `wx.navigateTo`ï¼Œ è€Œå¾®ä¿¡å°ç¨‹åºæœ€å¤§é¡µé¢å †æ ˆåªæ”¯æŒ10å±‚ï¼Œæ‰€ä»¥è¯´é¡¹ç›®ä¸­å¦‚æœé¡µé¢è·³è½¬æå¤šæˆ–è€…å­˜åœ¨ç›¸äº’å…³è”çš„é¡µé¢äº’ç›¸è·³è½¬ä¾¿å®¹æ˜“å¯¼è‡´å †æ ˆæº¢å‡ºé¡µé¢ä¸è·³è½¬çš„æƒ…å†µï¼Œè¿™ä¸ªé—®é¢˜åœ¨å®Œæˆè·¯ç”±åŸºæœ¬åŠŸèƒ½åå•ç‹¬è§£é‡Š\n\n### é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\n\n_éœ€æ±‚ï¼š é¡µé¢å†…è·³è½¬é€šè¿‡è·¯ç”±å‚æ•° `query` å­—æ®µä¼ å‚ï¼Œ é€šè¿‡ `this.$route.query` è¯»å–å‚æ•°_\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿç®€å•è§£æ `push` æ–¹æ³•å‚æ•°çš„åŠŸèƒ½å‹å‡½æ•° `parseUrl`ï¼Œé‡Œé¢åŒ…æ‹¬å°†æ‰€ä¼ çš„ `query` å­—æ®µä»¥åœ°å€æ å‚æ•°å½¢å¼æ‹¼æ¥åœ¨ `path` åé¢çš„ä¸€ä¸ª `stringifyQuery` å‡½æ•°\n\n``` js\n  function parseUrl(location) {\n    const { path, query } = location\n    const queryStr = stringifyQuery(query)\n\n    return `${path}${queryStr}`\n  }\n\n  function stringifyQuery(obj) {\n    const res = obj\n      ? Object.keys(obj)\n          .filter(Boolean)\n          .map(key => {\n            let val = obj[key]\n\n            if ([Array, Object].includes(val.constructor)) {\n              val = JSON.stringify(obj[key])\n            }\n            return `${key}=${val}`\n          })\n          \n          .join('&')\n      : null\n\n    return res ? `?${res}` : ''\n  }\n```\n\næŠŠ `parseUrl` æ–¹æ³•æ·»åŠ åˆ°ä¸Šé¢çš„ `push` æ–¹æ³•ï¼ŒåŒæ—¶å‚æ•°å†…éƒ¨æ˜¯æ”¯æŒå°ç¨‹åºè·¯ç”±è·³è½¬è¿‡ç¨‹çš„`success`, `fail`, `complete` é’©å­çš„ \n\n``` js\n  // location ä¸ºè·¯ç”±ä¼ å‚\n  function push(location) {\n    // others ä¸ºç”¨æˆ·å¯èƒ½ä¼ é€’çš„ `success`, `fail`, `complete`\n    const { path, query, ...others } = location\n\n    const url = parseUrl({ path, query })\n\n    const params = { url, ...others }\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n    } else if (location.redirect) {\n      wx.redirectTo(params)\n    } else {\n      wx.navigateTo(params)\n    }\n  }\n```\nä»¥ä¸Šè·¯ç”±ä¼ å‚å¹¶è§£æéƒ¨åˆ†å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥è¯»å–å‚æ•°çš„æ§åˆ¶éœ€è¦å®šä¹‰ä¸€ä¸ª `$route` å¯¹è±¡ä¸å‰é¢çš„ `$router` ä¸€è‡´æŒ‚è½½é¡µé¢å®ä¾‹ä¸Š\n\nè¿™ä¸€å±‚è¯»mpvueçš„å®ä¾‹åˆ›å»ºä¸€ä¸ª `parseRoute` å‡½æ•°ç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®å³å¯\n\næ­¤å¤„é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š ä¹‹å‰åªæ˜¯ä½¿ç”¨JSON.parseç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®ï¼Œå½“æ•°æ®ä¸ºé•¿æ•´å‹å­—ç¬¦ä¸²ï¼ˆé•¿åº¦è¶…è¿‡17ä½ï¼‰ä¼šä¸¢å¤±ç²¾åº¦è½¬0\nä»¥ä¸‹åŒæ—¶ç®€å•å¤„ç†ä¸€ä¸‹\n\n``` js\n  function parseRoute($mp) {\n    // $mp ä¸ºmpvueå®ä¾‹rootä¸ŠæŒ‚è½½çš„å¯¹è±¡\n    const _mp = $mp || {}\n    const path = _mp.page && _mp.page.route\n    const parseQuery = {}\n    const tempQuery = _mp.query\n\n    for (let k in tempQuery) {\n      let cur = tempQuery[k]\n\n      try {\n        // è§£å†³é•¿æ•´å‹ä¸¢å¤±ç²¾åº¦\n        const transfer = JSON.parse(tempQuery[k])\n\n        if (!(typeof transfer === 'number')) {\n          cur = transfer\n        }\n      } catch (e) {}\n\n      parseQuery[k] = cur\n    }\n\n    return {\n      parseQuery\n    }\n  }\n```\n\næœ€ç»ˆæŒ‚è½½åœ¨é¡µé¢å®ä¾‹ä¸Šï¼Œç”±äºè·¯ç”±å‚æ•°æ¯æ¬¡è·³è½¬éƒ½è¦æ›´æ–°æ‰€ä»¥æŒ‚è½½åœ¨å°ç¨‹åº `onShow` é’©å­ä¸Š\n\n``` js\n  const _route = {}\n\n  Vue.mixin({\n    onShow() {\n      const { $mp } = this.$root\n\n      _route = parseRoute($mp)\n    }\n  })\n\n  const $route = {\n    get() {\n      return _route\n    }\n  }\n\n  Object.defineProperty(Vue.prototype, '$route', $route)\n```\nä»¥ä¸Šä¾¿å®Œæˆè·¯ç”±å‚æ•°çš„è¯»å†™\n\n### è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\n\nå°ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä¸‹é¢å°±æ˜¯å †æ ˆçš„é™åˆ¶ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è·³è½¬å‰ç›‘å¬å½“å‰å †æ ˆçš„é•¿åº¦ï¼Œæ ˆæ»¡æ—¶æ”¹ç”¨é‡å®šå‘æ–¹æ³• `wx.redirectTo` å³å¯ï¼ˆå…¶ä»–æ—¶é—´é¡¹ç›®ä¸­ä»…ä½¿ç”¨ `navigateTo` å³å¯ï¼‰\n\né¦–å…ˆéœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡è®°å½•å †æ ˆé•¿åº¦(å¾®ä¿¡æä¾›ä¸€ä¸ªgetCurrentPagesçš„æ–¹æ³•)ï¼Œ åŒæ—¶æ›´æ”¹ `push` æ–¹æ³•\n\n``` js\n  // å½“å‰é¡µé¢å †æ ˆé•¿åº¦\n  let pageStackLen = 0\n  // å †æ ˆé™åˆ¶\n  const maxStackLen = 10\n\n  function push(location, success, ...ohters) {\n    pageStackLen = getCurrentPages().length + 1\n\n    const url = parseUrl(location)\n\n    // åŒ…è£…è·³è½¬æˆåŠŸçš„å›è°ƒ\n    const _success = function() {\n      pageStackLen = getCurrentPages().length + 1\n\n      success && success()\n    }\n\n    const params = { url, success: _success, ...ohters}\n\n    if (location.isTab) {\n      wx.switchTab(params)\n\n      pageStackLen = 1\n    } else if (location.reLaunch) {\n      wx.reLaunch(params)\n\n      pageStackLen = 1\n    } else {\n      if (pageStackLen >= maxStackLen) {\n        wx.redirectTo(params)\n        return\n      }\n      wx.navigateTo(params)\n    }\n  }\n```\nä»¥ä¸ŠåŸºæœ¬è§£å†³å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\n\n### å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\n\nç°åœ¨å¯¹è·¯ç”±çš„è·³è½¬åšä¸€äº›åŸºæœ¬è¾…åŠ©åŠŸèƒ½çš„æ”¯æŒ `go`ã€ `back`, `replace` ç­‰æ–¹æ³•\n\n``` js\n  function replace(location, ...others) {\n    const url = parseUrl(location)\n\n    wx.redirectTo({\n      url,\n      ...others\n    })\n  }\n\n  function go(delta) {\n    wx.navigateBack({\n      delta\n    })\n  }\n\n  function back() {\n    wx.navigateBack()\n  }\n```\n\nå°†è¿™äº›æŒ‚åˆ° `$router` å¯¹è±¡\n\n``` js\n  const _router = {\n    mode: 'history',\n    push,\n    replace,\n    go,\n    back\n  }\n\n  const $router = {\n    get() {\n      return _router\n    }\n  }\n\n```\n\næ­¤å¤–è¿˜æœ‰æˆ‘ä»¬ä¸éœ€è¦é¡µé¢ä¹‹é—´ä¼ å‚æ—¶æ—¶pushæ–¹æ³•ç›´æ¥ä¼ å­—ç¬¦ä¸²è·¯å¾„ï¼Œè·¯ç”±å…¬ç”¨è·¯å¾„çœç•¥ï¼Œpushè°ƒç”¨ä¼ åŸºæœ¬è·¯å¾„è‡ªåŠ¨è¡¥é½, å•ç‹¬å¯¼å‡º `push` æ–¹æ³•æ–¹ä¾¿ç»„ä»¶å¤–éƒ¨è°ƒç”¨ç­‰ä¼˜åŒ–\n\næœ€åæˆ‘ä»¬è¿˜å·®è·¯ç”±æ‹¦æˆªå™¨åŠŸèƒ½çš„å®ç°\n\n### è·¯ç”±æ‹¦æˆªå™¨\n\néœ€æ±‚ï¼š å¯¹è±¡å½¢å¼é…ç½®è‡ªå·±è·¯ç”±è§„åˆ™\n  - `[triggerAll]`ï¼š æ‰€æœ‰è·¯ç”±è·³è½¬å‡ä¼šè§¦å‘\n  - `[triggerMatch]`ï¼š åŒ¹é…æŒ‡å®šè·¯ç”±ï¼Œå…¶ä¸­å¯é…ç½®å¤šä¸ªè§„åˆ™ï¼Œä»¥å‡½æ•°æ•°ç»„å½¢å¼ä¼ å…¥ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å‡½æ•°éƒ½ä¼šåœ¨è¢«åŒ¹é…æ—¶è§¦å‘\n\nå‚æ•°ä»‹ç»ï¼š\n- `config`: æºå¸¦å½“å‰è·¯ç”±è·³è½¬ä¿¡æ¯ï¼ˆè·¯ç”±å‚æ•°ï¼‰\n- `to`: æ§åˆ¶è·³è½¬ï¼ˆè°ƒç”¨ `to()` ï¼‰\n\n\nä½¿ç”¨æ–¹å¼ï¼š\n\n``` js\nexport default {\n  triggerAll(config, to) {\n    console.log(config, 'enter interceptor')\n    to()\n  },\n  triggerMatch: {\n    '/home/pages/categoryList': [\n      (config, to) => {\n        if (/*flag*/) {\n          console.log(1)\n          to()\n        }\n      }\n    ]\n  }\n}\n```\n\næœ¬è´¨ä¸Šè¿˜æ˜¯å°†ä¹‹å‰å°è£…çš„è·¯ç”±æš´éœ²å‡ºæ¥çš„pushæ–¹æ³•å†æ¬¡å°è£…ä¸€å±‚ï¼Œå…¶ä¸­åŠ å…¥è‡ªå·±çš„é€»è¾‘è¾¾åˆ°ç›®çš„\n\næ–°å»º `interceptor.js`\n\né¦–å…ˆå¼•å…¥ä¹‹å‰çš„è·¯ç”±æ–¹ä¾¿åœ¨å®ä¾‹ä¸Šè°ƒç”¨ï¼Œå®šä¹‰ `triggerMatch` çš„å¯¹è±¡å­˜å‚¨å­˜å…¥çš„å‡½æ•° `key` ä¸ºå½“å‰è·¯ç”±çš„è·¯å¾„ï¼Œ`value` ä¸º ä¸­é—´ä»¶å‡½æ•°ç»„æˆçš„æ•°ç»„\n\nå…³é”®ï¼š å°† `push` æ–¹æ³•å½“åšå•ç‹¬çš„ä¸€ä¸ªä¸­é—´ä»¶å¹¶æ”¾åœ¨æ‰€æœ‰ä¸­é—´ä»¶çš„æœ€åæ‰§è¡Œ\n\n``` js\n  // å¼•å…¥\n  import router from './index.js'\n  // æŒ‚è½½\n  Vue.use(router)\n  // å­˜åŒ¹é…æŒ‡å®šè·¯ç”±çš„ä¸šåŠ¡å‡½æ•°\n  let matchMiddlewares = {}\n\n```\næ¥ä¸‹æ¥è¦æ„å»ºä¸€ä¸ªå¤„ç†æ¨å…¥è§„åˆ™çš„ä¸šåŠ¡å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰çš„ `compose` å‡½æ•°\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªï¼š\n - ä¾æ¬¡æ´¾å‘æ¨å…¥æ‹¦æˆªå™¨çš„ä¸šåŠ¡å‡½æ•°\n - æ§åˆ¶ä¸‹ä¸€æ¬¡æ´¾å‘çš„å¼€å§‹\n\n``` js\n  const compose = middlewares => (...args) => {\n    function dispatch(i) {\n      return !middlewares[i]\n        ? Promise.resolve('no arguments')\n        : Promise.resolve(\n            middlewares[i](...args, function() {\n              // æ´¾å‘ä¸‹ä¸ªè°ƒç”¨\n              // æ­¤å¤„å³æ˜¯æ‹¦æˆªå™¨ä¸­ç¬¬äºŒä¸ªå®å‚ to æ–¹æ³•çš„å‡½æ•°ä½“\n              // è°ƒåŠ¨ to() å³å¼€å¯ä¸‹ä¸€æ¬¡æ´¾å‘\n              return dispatch(++i)\n            })\n          )\n    }\n    // å¼€å¯è°ƒç”¨\n    return dispatch(0)\n  }\n```\n\nåˆ›å»ºä¸€ä¸ªå‡½æ•° `getMatchMiddlewares` ç”¨æ¥æ ¹æ®æŒ‡å®šé”®å€¼è¯»å– `matchMiddlewares` ä¸­ä¸­é—´ä»¶å‡½æ•°æ•°ç»„\n\n```js\n  function getMatchMiddlewares(path) {\n    return matchMiddlewares.hasOwnProperty(path) ? matchMiddlewares[path] : []\n  }\n```\n\n\nè·¯ç”±åŒæ ·ä½¿ç”¨ `Vue.use` æ–¹æ³•æ³¨å†Œï¼Œè¿™é‡Œå¯¼å‡º `install` æ–¹æ³•, åœ¨é‡Œé¢ç»Ÿä¸€æ‰€æœ‰ä¸­é—´ä»¶å‡½æ•°\n\n``` js\n  // åŒ…è£… push\n  let $push\n\n  function pushMiddware(...args) {\n    $push(...args)\n  }\n\n  export default {\n    install(Vue, { triggerAll, triggerMatch }) {\n      // å­˜å‚¨åŸ push å‡½æ•°\n      $push = Vue.prototype.$router.push\n      // æ¥æ”¶ä¼ å…¥çš„åŒ¹é…å‡½æ•°\n      matchMiddlewares = Object.assign({}, triggerMatch)\n      \n      // é‡æ–°èµ‹å€¼\n      Vue.prototype.$router.push = (...args) => {\n        // åˆå¹¶\n        compose([...getMatchMiddlewares(path), triggerAll, pushMiddware])(\n          ...args\n        )\n      }\n    }\n  }\n\n\n```\n\nä¹‹ååœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å³å¯\n\n``` js\n  import Vue from 'vue'\n  import interceptor from './interceptor.js'\n\n  Vue.use(interceptor)\n```\n\nè‡³æ­¤ä¾¿å®Œæˆäº†è·¯ç”±çš„æ‰€æœ‰åŠŸèƒ½çš„åŸºæœ¬å°è£…\n\nè¯¦ç»†ä»£ç å¯ä»¥æŸ¥çœ‹ [å°ç¨‹åºè·¯ç”±](http://git.yupaopao.com/fe/applet/iverson/tree/master/src/global/lib/router)\n\næ­¤ç¯‡æ–‡ç« å·²ç»å‘å¸ƒåœ¨ [http://doc.yupaopao.com](http://doc.yupaopao.com/pages/viewpage.action?pageId=7176857)\n\n## æ€»ç»“\nè·¯ç”±åŸºæœ¬åŠŸèƒ½çš„å°è£…åŸºæœ¬è‡³æ­¤å·²ç»å…¨éƒ¨å®Œæˆï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€è¦ã€‚ä½†ç”±äºè‡ªèº«æ°´å¹³é™åˆ¶ï¼Œä¼šå­˜åœ¨å„ç±»é—®é¢˜ï¼Œå¸Œæœ›å¤§å®¶æŒ‡å‡ºä¸€èµ·è®¨è®ºï¼Œå…±åŒè¿›æ­¥ã€‚\n\nå¼€æ”¾ã€çœŸå®ï¼peace.\n","slug":"writeSomething/appletRouter","published":1,"updated":"2019-03-04T02:26:44.941Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptw7000179481vyx6s6g","content":"<p>åŸºäº <code>mpvue</code> å°ç¨‹åºçš„è·¯ç”±å°è£…</p>\n<a id=\"more\"></a>\n<p>[toc]</p>\n<h2 id=\"åŸºæœ¬ä½¿ç”¨\"><a href=\"#åŸºæœ¬ä½¿ç”¨\" class=\"headerlink\" title=\"åŸºæœ¬ä½¿ç”¨\"></a>åŸºæœ¬ä½¿ç”¨</h2><p>ç»„ä»¶å†…ä½¿ç”¨æ–¹æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸æºå¸¦è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.$router.push(<span class=\"string\">'/home/page/index'</span>)</span><br><span class=\"line\"><span class=\"comment\">// æºå¸¦è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.$router.push(&#123;</span><br><span class=\"line\">  path: <span class=\"string\">'/home/page/index'</span>,</span><br><span class=\"line\">  query: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  reLaunch: <span class=\"literal\">true</span>, <span class=\"comment\">// è°ƒç”¨wx.reLaunch</span></span><br><span class=\"line\">  isTab: <span class=\"literal\">true</span> <span class=\"comment\">// è°ƒç”¨wx.switchTag</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯»å–å½“å‰é¡µé¢è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; query &#125; = <span class=\"keyword\">this</span>.$route</span><br></pre></td></tr></table></figure></p>\n<p>ç»„ä»¶å¤–éƒ¨ä½¿ç”¨åªéœ€è¦å¼•å…¥router.jså†…éƒ¨å¯¼å‡ºçš„pushæ–¹æ³•å³å¯</p>\n<h2 id=\"å°è£…èµ·æ­¥\"><a href=\"#å°è£…èµ·æ­¥\" class=\"headerlink\" title=\"å°è£…èµ·æ­¥\"></a>å°è£…èµ·æ­¥</h2><p>åˆ†ä¸ºä¸¤ç‚¹åˆ‡å…¥ï¼š</p>\n<ol>\n<li>äº†è§£å¾®ä¿¡æä¾›çš„api</li>\n<li>è‡ªå·±çš„éœ€æ±‚</li>\n</ol>\n<p>æ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li><p>å¯¹å¾®ä¿¡å°ç¨‹åºçš„ <code>switchTabã€reLaunchã€navigateToã€redirectTo</code> äºŒæ¬¡å°è£…ï¼Œå¯¹å¤–æš´éœ²pushæ–¹æ³•ï¼ŒåŒæ—¶å°†è·¯ç”±å®ä¾‹æŒ‚è½½åœ¨vueä¸Šï¼Œç»„ä»¶å†…éƒ¨é€šè¿‡ <code>this.$router.push</code> è°ƒç”¨ï¼Œç»„ä»¶å¤–éƒ¨å¯ä½¿ç”¨å¯¹å¤–æš´éœ²çš„pushæ–¹æ³•è¿›è¡Œé¡µé¢è·³è½¬ã€‚é¡µé¢å†…æ•°æ®é€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’é€šè¿‡ <code>this.$route.query</code> è¯»å–ã€‚</p>\n</li>\n<li><p>è·¯ç”±é»˜è®¤è·³è½¬ä¸º <code>wx.navigateTo</code> é™æ€è·³è½¬ï¼Œè°ƒç”¨å…¶ä»–è·³è½¬æ–¹å¼éœ€ä¼ é€’ç›¸åº”å‚æ•°</p>\n</li>\n</ul>\n<ul>\n<li>å°è£…çš„è·³è½¬ä¼˜å…ˆçº§ï¼š<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wx.switchTab &gt;&gt; wx.reLaunch &gt;&gt; wx.navigateTo</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>è·¯ç”±æ‹¥æœ‰æ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºå…¨å±€æ‹¦æˆªå’Œé’ˆå¯¹æŒ‡å®šé¡µé¢æ ¹æ® <code>path</code> æ‹¦æˆªã€‚</li>\n</ul>\n<p><em>æ³¨æ„ï¼š è·¯ç”±ä¸æ”¯æŒæŒ‡å®š <code>wx.redireactTo</code> è·³è½¬ï¼Œæ­¤æ–¹æ³•ç”¨äºè·¯ç”±å†…éƒ¨å¤„ç†å°ç¨‹åºå †æ ˆæº¢å‡ºï¼ˆå½“å‰å°ç¨‹åºé™æ€é¡µé¢å †æ ˆä»…æ”¯æŒåå±‚ï¼‰</em></p>\n<p>ä¸‹é¢æˆ‘ä¼šç”±ä¸åŒçš„éœ€æ±‚ä»¥é—®ç­”æ–¹å¼ä¸€æ­¥æ­¥å®Œæˆæ•´ä¸ªè·¯ç”±çš„ç®€å•å°è£…åŒæ—¶è®²è¿°å„ä¸ªéƒ¨åˆ†å¯èƒ½é‡åˆ°çš„é—®é¢˜</p>\n<h3 id=\"å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\"><a href=\"#å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\" class=\"headerlink\" title=\"å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\"></a>å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½</h3><p><em>éœ€æ±‚ï¼šé¡µé¢å†…ä½¿ç”¨ <code>this.$router.push</code> æ–¹æ³•è·³è½¬é¡µé¢</em></p>\n<p>é¦–å…ˆå°±æ˜¯æ–°å»º <code>index.js</code> è‡ªå®šä¹‰ä¸€ä¸ªæœ€åŸºæœ¬çš„ <code>push</code> æ–¹æ³•ç”¨æ¥è·³è½¬é¡µé¢</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// location ä¸ºè·¯ç”±ä¼ å‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; <span class=\"attr\">url</span>: location.path &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.redirect) &#123;</span><br><span class=\"line\">    wx.redirectTo(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä¸ºäº†è®©æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦å°† <code>push</code> æ–¹æ³•æŒ‚è½½åœ¨é¡µé¢çš„å®ä¾‹ä¸Š, åŒæ—¶ä½¿ç”¨æ’ä»¶å¼è°ƒç”¨åœ¨ <code>index.js</code> æ–‡ä»¶ä¸­å¯¼å‡º <code>install</code> æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¼å‡º</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> _router = &#123;</span><br><span class=\"line\">      mode: <span class=\"string\">'history'</span>,</span><br><span class=\"line\">      push</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å®šä¹‰æè¿°ç¬¦getterï¼ˆä¹Ÿå¯ç›´æ¥èµ‹å€¼valueï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> $router = &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _router</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‚è½½ (å„å‡­å–œå¥½ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼åœ¨prototypeä¸Šï¼‰</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">'$router'</span>, $router)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶æ³¨å…¥ä¸Šé¢ <code>index.js</code> æ–‡ä»¶å¹¶æ‰§è¡Œ <code>Vue.use</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(router)</span><br></pre></td></tr></table></figure>\n<p>å³å¯åœ¨ä»»æ„é¡µé¢ä½¿ç”¨ <code>this.$router.push</code> æ–¹æ³•å¹¶ä¼ å…¥ç›¸åº”è·³è½¬æ–¹å¼å’Œè·¯å¾„</p>\n<p>è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š é¡¹ç›®è·³è½¬ä¸ºäº†æ›´ç¾è§‚ä¸»è¦ä½¿ç”¨ <code>wx.navigateTo</code>ï¼Œ è€Œå¾®ä¿¡å°ç¨‹åºæœ€å¤§é¡µé¢å †æ ˆåªæ”¯æŒ10å±‚ï¼Œæ‰€ä»¥è¯´é¡¹ç›®ä¸­å¦‚æœé¡µé¢è·³è½¬æå¤šæˆ–è€…å­˜åœ¨ç›¸äº’å…³è”çš„é¡µé¢äº’ç›¸è·³è½¬ä¾¿å®¹æ˜“å¯¼è‡´å †æ ˆæº¢å‡ºé¡µé¢ä¸è·³è½¬çš„æƒ…å†µï¼Œè¿™ä¸ªé—®é¢˜åœ¨å®Œæˆè·¯ç”±åŸºæœ¬åŠŸèƒ½åå•ç‹¬è§£é‡Š</p>\n<h3 id=\"é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\"><a href=\"#é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\" class=\"headerlink\" title=\"é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\"></a>é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°</h3><p><em>éœ€æ±‚ï¼š é¡µé¢å†…è·³è½¬é€šè¿‡è·¯ç”±å‚æ•° <code>query</code> å­—æ®µä¼ å‚ï¼Œ é€šè¿‡ <code>this.$route.query</code> è¯»å–å‚æ•°</em></p>\n<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿç®€å•è§£æ <code>push</code> æ–¹æ³•å‚æ•°çš„åŠŸèƒ½å‹å‡½æ•° <code>parseUrl</code>ï¼Œé‡Œé¢åŒ…æ‹¬å°†æ‰€ä¼ çš„ <code>query</code> å­—æ®µä»¥åœ°å€æ å‚æ•°å½¢å¼æ‹¼æ¥åœ¨ <code>path</code> åé¢çš„ä¸€ä¸ª <code>stringifyQuery</code> å‡½æ•°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseUrl</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; path, query &#125; = location</span><br><span class=\"line\">  <span class=\"keyword\">const</span> queryStr = stringifyQuery(query)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;path&#125;</span><span class=\"subst\">$&#123;queryStr&#125;</span>`</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stringifyQuery</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = obj</span><br><span class=\"line\">    ? <span class=\"built_in\">Object</span>.keys(obj)</span><br><span class=\"line\">        .filter(<span class=\"built_in\">Boolean</span>)</span><br><span class=\"line\">        .map(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> val = obj[key]</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> ([<span class=\"built_in\">Array</span>, <span class=\"built_in\">Object</span>].includes(val.constructor)) &#123;</span><br><span class=\"line\">            val = <span class=\"built_in\">JSON</span>.stringify(obj[key])</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>=<span class=\"subst\">$&#123;val&#125;</span>`</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        .join(<span class=\"string\">'&amp;'</span>)</span><br><span class=\"line\">    : <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res ? <span class=\"string\">`?<span class=\"subst\">$&#123;res&#125;</span>`</span> : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŠŠ <code>parseUrl</code> æ–¹æ³•æ·»åŠ åˆ°ä¸Šé¢çš„ <code>push</code> æ–¹æ³•ï¼ŒåŒæ—¶å‚æ•°å†…éƒ¨æ˜¯æ”¯æŒå°ç¨‹åºè·¯ç”±è·³è½¬è¿‡ç¨‹çš„<code>success</code>, <code>fail</code>, <code>complete</code> é’©å­çš„ </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// location ä¸ºè·¯ç”±ä¼ å‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// others ä¸ºç”¨æˆ·å¯èƒ½ä¼ é€’çš„ `success`, `fail`, `complete`</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; path, query, ...others &#125; = location</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(&#123; path, query &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; url, ...others &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.redirect) &#123;</span><br><span class=\"line\">    wx.redirectTo(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šè·¯ç”±ä¼ å‚å¹¶è§£æéƒ¨åˆ†å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥è¯»å–å‚æ•°çš„æ§åˆ¶éœ€è¦å®šä¹‰ä¸€ä¸ª <code>$route</code> å¯¹è±¡ä¸å‰é¢çš„ <code>$router</code> ä¸€è‡´æŒ‚è½½é¡µé¢å®ä¾‹ä¸Š</p>\n<p>è¿™ä¸€å±‚è¯»mpvueçš„å®ä¾‹åˆ›å»ºä¸€ä¸ª <code>parseRoute</code> å‡½æ•°ç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®å³å¯</p>\n<p>æ­¤å¤„é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š ä¹‹å‰åªæ˜¯ä½¿ç”¨JSON.parseç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®ï¼Œå½“æ•°æ®ä¸ºé•¿æ•´å‹å­—ç¬¦ä¸²ï¼ˆé•¿åº¦è¶…è¿‡17ä½ï¼‰ä¼šä¸¢å¤±ç²¾åº¦è½¬0<br>ä»¥ä¸‹åŒæ—¶ç®€å•å¤„ç†ä¸€ä¸‹</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseRoute</span>(<span class=\"params\">$mp</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// $mp ä¸ºmpvueå®ä¾‹rootä¸ŠæŒ‚è½½çš„å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> _mp = $mp || &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> path = _mp.page &amp;&amp; _mp.page.route</span><br><span class=\"line\">  <span class=\"keyword\">const</span> parseQuery = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> tempQuery = _mp.query</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">in</span> tempQuery) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> cur = tempQuery[k]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è§£å†³é•¿æ•´å‹ä¸¢å¤±ç²¾åº¦</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> transfer = <span class=\"built_in\">JSON</span>.parse(tempQuery[k])</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!(<span class=\"keyword\">typeof</span> transfer === <span class=\"string\">'number'</span>)) &#123;</span><br><span class=\"line\">        cur = transfer</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    parseQuery[k] = cur</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    parseQuery</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æœ€ç»ˆæŒ‚è½½åœ¨é¡µé¢å®ä¾‹ä¸Šï¼Œç”±äºè·¯ç”±å‚æ•°æ¯æ¬¡è·³è½¬éƒ½è¦æ›´æ–°æ‰€ä»¥æŒ‚è½½åœ¨å°ç¨‹åº <code>onShow</code> é’©å­ä¸Š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _route = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.mixin(&#123;</span><br><span class=\"line\">  onShow() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; $mp &#125; = <span class=\"keyword\">this</span>.$root</span><br><span class=\"line\"></span><br><span class=\"line\">    _route = parseRoute($mp)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> $route = &#123;</span><br><span class=\"line\">  get() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _route</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">'$route'</span>, $route)</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä¾¿å®Œæˆè·¯ç”±å‚æ•°çš„è¯»å†™</p>\n<h3 id=\"è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\"><a href=\"#è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\"></a>è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜</h3><p>å°ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä¸‹é¢å°±æ˜¯å †æ ˆçš„é™åˆ¶ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è·³è½¬å‰ç›‘å¬å½“å‰å †æ ˆçš„é•¿åº¦ï¼Œæ ˆæ»¡æ—¶æ”¹ç”¨é‡å®šå‘æ–¹æ³• <code>wx.redirectTo</code> å³å¯ï¼ˆå…¶ä»–æ—¶é—´é¡¹ç›®ä¸­ä»…ä½¿ç”¨ <code>navigateTo</code> å³å¯ï¼‰</p>\n<p>é¦–å…ˆéœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡è®°å½•å †æ ˆé•¿åº¦(å¾®ä¿¡æä¾›ä¸€ä¸ªgetCurrentPagesçš„æ–¹æ³•)ï¼Œ åŒæ—¶æ›´æ”¹ <code>push</code> æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å½“å‰é¡µé¢å †æ ˆé•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> pageStackLen = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\">// å †æ ˆé™åˆ¶</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> maxStackLen = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location, success, ...ohters</span>) </span>&#123;</span><br><span class=\"line\">  pageStackLen = getCurrentPages().length + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(location)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// åŒ…è£…è·³è½¬æˆåŠŸçš„å›è°ƒ</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> _success = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    pageStackLen = getCurrentPages().length + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    success &amp;&amp; success()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; url, <span class=\"attr\">success</span>: _success, ...ohters&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">    pageStackLen = <span class=\"number\">1</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\"></span><br><span class=\"line\">    pageStackLen = <span class=\"number\">1</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pageStackLen &gt;= maxStackLen) &#123;</span><br><span class=\"line\">      wx.redirectTo(params)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸ŠåŸºæœ¬è§£å†³å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜</p>\n<h3 id=\"å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\"><a href=\"#å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\" class=\"headerlink\" title=\"å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\"></a>å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½</h3><p>ç°åœ¨å¯¹è·¯ç”±çš„è·³è½¬åšä¸€äº›åŸºæœ¬è¾…åŠ©åŠŸèƒ½çš„æ”¯æŒ <code>go</code>ã€ <code>back</code>, <code>replace</code> ç­‰æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replace</span>(<span class=\"params\">location, ...others</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(location)</span><br><span class=\"line\"></span><br><span class=\"line\">  wx.redirectTo(&#123;</span><br><span class=\"line\">    url,</span><br><span class=\"line\">    ...others</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">go</span>(<span class=\"params\">delta</span>) </span>&#123;</span><br><span class=\"line\">  wx.navigateBack(&#123;</span><br><span class=\"line\">    delta</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">back</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  wx.navigateBack()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å°†è¿™äº›æŒ‚åˆ° <code>$router</code> å¯¹è±¡</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _router = &#123;</span><br><span class=\"line\">  mode: <span class=\"string\">'history'</span>,</span><br><span class=\"line\">  push,</span><br><span class=\"line\">  replace,</span><br><span class=\"line\">  go,</span><br><span class=\"line\">  back</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> $router = &#123;</span><br><span class=\"line\">  get() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _router</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤å¤–è¿˜æœ‰æˆ‘ä»¬ä¸éœ€è¦é¡µé¢ä¹‹é—´ä¼ å‚æ—¶æ—¶pushæ–¹æ³•ç›´æ¥ä¼ å­—ç¬¦ä¸²è·¯å¾„ï¼Œè·¯ç”±å…¬ç”¨è·¯å¾„çœç•¥ï¼Œpushè°ƒç”¨ä¼ åŸºæœ¬è·¯å¾„è‡ªåŠ¨è¡¥é½, å•ç‹¬å¯¼å‡º <code>push</code> æ–¹æ³•æ–¹ä¾¿ç»„ä»¶å¤–éƒ¨è°ƒç”¨ç­‰ä¼˜åŒ–</p>\n<p>æœ€åæˆ‘ä»¬è¿˜å·®è·¯ç”±æ‹¦æˆªå™¨åŠŸèƒ½çš„å®ç°</p>\n<h3 id=\"è·¯ç”±æ‹¦æˆªå™¨\"><a href=\"#è·¯ç”±æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"è·¯ç”±æ‹¦æˆªå™¨\"></a>è·¯ç”±æ‹¦æˆªå™¨</h3><p>éœ€æ±‚ï¼š å¯¹è±¡å½¢å¼é…ç½®è‡ªå·±è·¯ç”±è§„åˆ™</p>\n<ul>\n<li><code>[triggerAll]</code>ï¼š æ‰€æœ‰è·¯ç”±è·³è½¬å‡ä¼šè§¦å‘</li>\n<li><code>[triggerMatch]</code>ï¼š åŒ¹é…æŒ‡å®šè·¯ç”±ï¼Œå…¶ä¸­å¯é…ç½®å¤šä¸ªè§„åˆ™ï¼Œä»¥å‡½æ•°æ•°ç»„å½¢å¼ä¼ å…¥ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å‡½æ•°éƒ½ä¼šåœ¨è¢«åŒ¹é…æ—¶è§¦å‘</li>\n</ul>\n<p>å‚æ•°ä»‹ç»ï¼š</p>\n<ul>\n<li><code>config</code>: æºå¸¦å½“å‰è·¯ç”±è·³è½¬ä¿¡æ¯ï¼ˆè·¯ç”±å‚æ•°ï¼‰</li>\n<li><code>to</code>: æ§åˆ¶è·³è½¬ï¼ˆè°ƒç”¨ <code>to()</code> ï¼‰</li>\n</ul>\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  triggerAll(config, to) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(config, <span class=\"string\">'enter interceptor'</span>)</span><br><span class=\"line\">    to()</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  triggerMatch: &#123;</span><br><span class=\"line\">    <span class=\"string\">'/home/pages/categoryList'</span>: [</span><br><span class=\"line\">      (config, to) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"comment\">/*flag*/</span>) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">          to()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æœ¬è´¨ä¸Šè¿˜æ˜¯å°†ä¹‹å‰å°è£…çš„è·¯ç”±æš´éœ²å‡ºæ¥çš„pushæ–¹æ³•å†æ¬¡å°è£…ä¸€å±‚ï¼Œå…¶ä¸­åŠ å…¥è‡ªå·±çš„é€»è¾‘è¾¾åˆ°ç›®çš„</p>\n<p>æ–°å»º <code>interceptor.js</code></p>\n<p>é¦–å…ˆå¼•å…¥ä¹‹å‰çš„è·¯ç”±æ–¹ä¾¿åœ¨å®ä¾‹ä¸Šè°ƒç”¨ï¼Œå®šä¹‰ <code>triggerMatch</code> çš„å¯¹è±¡å­˜å‚¨å­˜å…¥çš„å‡½æ•° <code>key</code> ä¸ºå½“å‰è·¯ç”±çš„è·¯å¾„ï¼Œ<code>value</code> ä¸º ä¸­é—´ä»¶å‡½æ•°ç»„æˆçš„æ•°ç»„</p>\n<p>å…³é”®ï¼š å°† <code>push</code> æ–¹æ³•å½“åšå•ç‹¬çš„ä¸€ä¸ªä¸­é—´ä»¶å¹¶æ”¾åœ¨æ‰€æœ‰ä¸­é—´ä»¶çš„æœ€åæ‰§è¡Œ</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"><span class=\"comment\">// æŒ‚è½½</span></span><br><span class=\"line\">Vue.use(router)</span><br><span class=\"line\"><span class=\"comment\">// å­˜åŒ¹é…æŒ‡å®šè·¯ç”±çš„ä¸šåŠ¡å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> matchMiddlewares = &#123;&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥è¦æ„å»ºä¸€ä¸ªå¤„ç†æ¨å…¥è§„åˆ™çš„ä¸šåŠ¡å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰çš„ <code>compose</code> å‡½æ•°</p>\n<p>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªï¼š</p>\n<ul>\n<li>ä¾æ¬¡æ´¾å‘æ¨å…¥æ‹¦æˆªå™¨çš„ä¸šåŠ¡å‡½æ•°</li>\n<li>æ§åˆ¶ä¸‹ä¸€æ¬¡æ´¾å‘çš„å¼€å§‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> !middlewares[i]</span><br><span class=\"line\">      ? <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'no arguments'</span>)</span><br><span class=\"line\">      : <span class=\"built_in\">Promise</span>.resolve(</span><br><span class=\"line\">          middlewares[i](...args, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ´¾å‘ä¸‹ä¸ªè°ƒç”¨</span></span><br><span class=\"line\">            <span class=\"comment\">// æ­¤å¤„å³æ˜¯æ‹¦æˆªå™¨ä¸­ç¬¬äºŒä¸ªå®å‚ to æ–¹æ³•çš„å‡½æ•°ä½“</span></span><br><span class=\"line\">            <span class=\"comment\">// è°ƒåŠ¨ to() å³å¼€å¯ä¸‹ä¸€æ¬¡æ´¾å‘</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> dispatch(++i)</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¼€å¯è°ƒç”¨</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> dispatch(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºä¸€ä¸ªå‡½æ•° <code>getMatchMiddlewares</code> ç”¨æ¥æ ¹æ®æŒ‡å®šé”®å€¼è¯»å– <code>matchMiddlewares</code> ä¸­ä¸­é—´ä»¶å‡½æ•°æ•°ç»„</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMatchMiddlewares</span>(<span class=\"params\">path</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> matchMiddlewares.hasOwnProperty(path) ? matchMiddlewares[path] : []</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è·¯ç”±åŒæ ·ä½¿ç”¨ <code>Vue.use</code> æ–¹æ³•æ³¨å†Œï¼Œè¿™é‡Œå¯¼å‡º <code>install</code> æ–¹æ³•, åœ¨é‡Œé¢ç»Ÿä¸€æ‰€æœ‰ä¸­é—´ä»¶å‡½æ•°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åŒ…è£… push</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> $push</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pushMiddware</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">  $push(...args)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue, &#123; triggerAll, triggerMatch &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å­˜å‚¨åŸ push å‡½æ•°</span></span><br><span class=\"line\">    $push = Vue.prototype.$router.push</span><br><span class=\"line\">    <span class=\"comment\">// æ¥æ”¶ä¼ å…¥çš„åŒ¹é…å‡½æ•°</span></span><br><span class=\"line\">    matchMiddlewares = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, triggerMatch)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">    Vue.prototype.$router.push = <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// åˆå¹¶</span></span><br><span class=\"line\">      compose([...getMatchMiddlewares(path), triggerAll, pushMiddware])(</span><br><span class=\"line\">        ...args</span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹‹ååœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å³å¯</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> interceptor <span class=\"keyword\">from</span> <span class=\"string\">'./interceptor.js'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(interceptor)</span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤ä¾¿å®Œæˆäº†è·¯ç”±çš„æ‰€æœ‰åŠŸèƒ½çš„åŸºæœ¬å°è£…</p>\n<p>è¯¦ç»†ä»£ç å¯ä»¥æŸ¥çœ‹ <a href=\"http://git.yupaopao.com/fe/applet/iverson/tree/master/src/global/lib/router\" target=\"_blank\" rel=\"noopener\">å°ç¨‹åºè·¯ç”±</a></p>\n<p>æ­¤ç¯‡æ–‡ç« å·²ç»å‘å¸ƒåœ¨ <a href=\"http://doc.yupaopao.com/pages/viewpage.action?pageId=7176857\" target=\"_blank\" rel=\"noopener\">http://doc.yupaopao.com</a></p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>è·¯ç”±åŸºæœ¬åŠŸèƒ½çš„å°è£…åŸºæœ¬è‡³æ­¤å·²ç»å…¨éƒ¨å®Œæˆï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€è¦ã€‚ä½†ç”±äºè‡ªèº«æ°´å¹³é™åˆ¶ï¼Œä¼šå­˜åœ¨å„ç±»é—®é¢˜ï¼Œå¸Œæœ›å¤§å®¶æŒ‡å‡ºä¸€èµ·è®¨è®ºï¼Œå…±åŒè¿›æ­¥ã€‚</p>\n<p>å¼€æ”¾ã€çœŸå®ï¼peace.</p>\n","site":{"data":{}},"excerpt":"<p>åŸºäº <code>mpvue</code> å°ç¨‹åºçš„è·¯ç”±å°è£…</p>","more":"<p>[toc]</p>\n<h2 id=\"åŸºæœ¬ä½¿ç”¨\"><a href=\"#åŸºæœ¬ä½¿ç”¨\" class=\"headerlink\" title=\"åŸºæœ¬ä½¿ç”¨\"></a>åŸºæœ¬ä½¿ç”¨</h2><p>ç»„ä»¶å†…ä½¿ç”¨æ–¹æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸æºå¸¦è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.$router.push(<span class=\"string\">'/home/page/index'</span>)</span><br><span class=\"line\"><span class=\"comment\">// æºå¸¦è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.$router.push(&#123;</span><br><span class=\"line\">  path: <span class=\"string\">'/home/page/index'</span>,</span><br><span class=\"line\">  query: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  reLaunch: <span class=\"literal\">true</span>, <span class=\"comment\">// è°ƒç”¨wx.reLaunch</span></span><br><span class=\"line\">  isTab: <span class=\"literal\">true</span> <span class=\"comment\">// è°ƒç”¨wx.switchTag</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¯»å–å½“å‰é¡µé¢è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; query &#125; = <span class=\"keyword\">this</span>.$route</span><br></pre></td></tr></table></figure></p>\n<p>ç»„ä»¶å¤–éƒ¨ä½¿ç”¨åªéœ€è¦å¼•å…¥router.jså†…éƒ¨å¯¼å‡ºçš„pushæ–¹æ³•å³å¯</p>\n<h2 id=\"å°è£…èµ·æ­¥\"><a href=\"#å°è£…èµ·æ­¥\" class=\"headerlink\" title=\"å°è£…èµ·æ­¥\"></a>å°è£…èµ·æ­¥</h2><p>åˆ†ä¸ºä¸¤ç‚¹åˆ‡å…¥ï¼š</p>\n<ol>\n<li>äº†è§£å¾®ä¿¡æä¾›çš„api</li>\n<li>è‡ªå·±çš„éœ€æ±‚</li>\n</ol>\n<p>æ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li><p>å¯¹å¾®ä¿¡å°ç¨‹åºçš„ <code>switchTabã€reLaunchã€navigateToã€redirectTo</code> äºŒæ¬¡å°è£…ï¼Œå¯¹å¤–æš´éœ²pushæ–¹æ³•ï¼ŒåŒæ—¶å°†è·¯ç”±å®ä¾‹æŒ‚è½½åœ¨vueä¸Šï¼Œç»„ä»¶å†…éƒ¨é€šè¿‡ <code>this.$router.push</code> è°ƒç”¨ï¼Œç»„ä»¶å¤–éƒ¨å¯ä½¿ç”¨å¯¹å¤–æš´éœ²çš„pushæ–¹æ³•è¿›è¡Œé¡µé¢è·³è½¬ã€‚é¡µé¢å†…æ•°æ®é€šè¿‡è·¯ç”±å‚æ•°ä¼ é€’é€šè¿‡ <code>this.$route.query</code> è¯»å–ã€‚</p>\n</li>\n<li><p>è·¯ç”±é»˜è®¤è·³è½¬ä¸º <code>wx.navigateTo</code> é™æ€è·³è½¬ï¼Œè°ƒç”¨å…¶ä»–è·³è½¬æ–¹å¼éœ€ä¼ é€’ç›¸åº”å‚æ•°</p>\n</li>\n</ul>\n<ul>\n<li>å°è£…çš„è·³è½¬ä¼˜å…ˆçº§ï¼š<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wx.switchTab &gt;&gt; wx.reLaunch &gt;&gt; wx.navigateTo</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<ul>\n<li>è·¯ç”±æ‹¥æœ‰æ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºå…¨å±€æ‹¦æˆªå’Œé’ˆå¯¹æŒ‡å®šé¡µé¢æ ¹æ® <code>path</code> æ‹¦æˆªã€‚</li>\n</ul>\n<p><em>æ³¨æ„ï¼š è·¯ç”±ä¸æ”¯æŒæŒ‡å®š <code>wx.redireactTo</code> è·³è½¬ï¼Œæ­¤æ–¹æ³•ç”¨äºè·¯ç”±å†…éƒ¨å¤„ç†å°ç¨‹åºå †æ ˆæº¢å‡ºï¼ˆå½“å‰å°ç¨‹åºé™æ€é¡µé¢å †æ ˆä»…æ”¯æŒåå±‚ï¼‰</em></p>\n<p>ä¸‹é¢æˆ‘ä¼šç”±ä¸åŒçš„éœ€æ±‚ä»¥é—®ç­”æ–¹å¼ä¸€æ­¥æ­¥å®Œæˆæ•´ä¸ªè·¯ç”±çš„ç®€å•å°è£…åŒæ—¶è®²è¿°å„ä¸ªéƒ¨åˆ†å¯èƒ½é‡åˆ°çš„é—®é¢˜</p>\n<h3 id=\"å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\"><a href=\"#å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\" class=\"headerlink\" title=\"å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½\"></a>å¦‚ä½•å®ŒæˆåŸºæœ¬è·³è½¬åŠŸèƒ½</h3><p><em>éœ€æ±‚ï¼šé¡µé¢å†…ä½¿ç”¨ <code>this.$router.push</code> æ–¹æ³•è·³è½¬é¡µé¢</em></p>\n<p>é¦–å…ˆå°±æ˜¯æ–°å»º <code>index.js</code> è‡ªå®šä¹‰ä¸€ä¸ªæœ€åŸºæœ¬çš„ <code>push</code> æ–¹æ³•ç”¨æ¥è·³è½¬é¡µé¢</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// location ä¸ºè·¯ç”±ä¼ å‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; <span class=\"attr\">url</span>: location.path &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.redirect) &#123;</span><br><span class=\"line\">    wx.redirectTo(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åä¸ºäº†è®©æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦å°† <code>push</code> æ–¹æ³•æŒ‚è½½åœ¨é¡µé¢çš„å®ä¾‹ä¸Š, åŒæ—¶ä½¿ç”¨æ’ä»¶å¼è°ƒç”¨åœ¨ <code>index.js</code> æ–‡ä»¶ä¸­å¯¼å‡º <code>install</code> æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯¼å‡º</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> _router = &#123;</span><br><span class=\"line\">      mode: <span class=\"string\">'history'</span>,</span><br><span class=\"line\">      push</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å®šä¹‰æè¿°ç¬¦getterï¼ˆä¹Ÿå¯ç›´æ¥èµ‹å€¼valueï¼‰</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> $router = &#123;</span><br><span class=\"line\">      get() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> _router</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‚è½½ (å„å‡­å–œå¥½ä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼åœ¨prototypeä¸Šï¼‰</span></span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">'$router'</span>, $router)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶æ³¨å…¥ä¸Šé¢ <code>index.js</code> æ–‡ä»¶å¹¶æ‰§è¡Œ <code>Vue.use</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(router)</span><br></pre></td></tr></table></figure>\n<p>å³å¯åœ¨ä»»æ„é¡µé¢ä½¿ç”¨ <code>this.$router.push</code> æ–¹æ³•å¹¶ä¼ å…¥ç›¸åº”è·³è½¬æ–¹å¼å’Œè·¯å¾„</p>\n<p>è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š é¡¹ç›®è·³è½¬ä¸ºäº†æ›´ç¾è§‚ä¸»è¦ä½¿ç”¨ <code>wx.navigateTo</code>ï¼Œ è€Œå¾®ä¿¡å°ç¨‹åºæœ€å¤§é¡µé¢å †æ ˆåªæ”¯æŒ10å±‚ï¼Œæ‰€ä»¥è¯´é¡¹ç›®ä¸­å¦‚æœé¡µé¢è·³è½¬æå¤šæˆ–è€…å­˜åœ¨ç›¸äº’å…³è”çš„é¡µé¢äº’ç›¸è·³è½¬ä¾¿å®¹æ˜“å¯¼è‡´å †æ ˆæº¢å‡ºé¡µé¢ä¸è·³è½¬çš„æƒ…å†µï¼Œè¿™ä¸ªé—®é¢˜åœ¨å®Œæˆè·¯ç”±åŸºæœ¬åŠŸèƒ½åå•ç‹¬è§£é‡Š</p>\n<h3 id=\"é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\"><a href=\"#é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\" class=\"headerlink\" title=\"é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°\"></a>é¡µé¢ä¹‹é—´å¦‚ä½•è¯»å†™å‚æ•°</h3><p><em>éœ€æ±‚ï¼š é¡µé¢å†…è·³è½¬é€šè¿‡è·¯ç”±å‚æ•° <code>query</code> å­—æ®µä¼ å‚ï¼Œ é€šè¿‡ <code>this.$route.query</code> è¯»å–å‚æ•°</em></p>\n<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿç®€å•è§£æ <code>push</code> æ–¹æ³•å‚æ•°çš„åŠŸèƒ½å‹å‡½æ•° <code>parseUrl</code>ï¼Œé‡Œé¢åŒ…æ‹¬å°†æ‰€ä¼ çš„ <code>query</code> å­—æ®µä»¥åœ°å€æ å‚æ•°å½¢å¼æ‹¼æ¥åœ¨ <code>path</code> åé¢çš„ä¸€ä¸ª <code>stringifyQuery</code> å‡½æ•°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseUrl</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; path, query &#125; = location</span><br><span class=\"line\">  <span class=\"keyword\">const</span> queryStr = stringifyQuery(query)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;path&#125;</span><span class=\"subst\">$&#123;queryStr&#125;</span>`</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stringifyQuery</span>(<span class=\"params\">obj</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> res = obj</span><br><span class=\"line\">    ? <span class=\"built_in\">Object</span>.keys(obj)</span><br><span class=\"line\">        .filter(<span class=\"built_in\">Boolean</span>)</span><br><span class=\"line\">        .map(<span class=\"function\"><span class=\"params\">key</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">let</span> val = obj[key]</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> ([<span class=\"built_in\">Array</span>, <span class=\"built_in\">Object</span>].includes(val.constructor)) &#123;</span><br><span class=\"line\">            val = <span class=\"built_in\">JSON</span>.stringify(obj[key])</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;key&#125;</span>=<span class=\"subst\">$&#123;val&#125;</span>`</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        </span><br><span class=\"line\">        .join(<span class=\"string\">'&amp;'</span>)</span><br><span class=\"line\">    : <span class=\"literal\">null</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> res ? <span class=\"string\">`?<span class=\"subst\">$&#123;res&#125;</span>`</span> : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æŠŠ <code>parseUrl</code> æ–¹æ³•æ·»åŠ åˆ°ä¸Šé¢çš„ <code>push</code> æ–¹æ³•ï¼ŒåŒæ—¶å‚æ•°å†…éƒ¨æ˜¯æ”¯æŒå°ç¨‹åºè·¯ç”±è·³è½¬è¿‡ç¨‹çš„<code>success</code>, <code>fail</code>, <code>complete</code> é’©å­çš„ </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// location ä¸ºè·¯ç”±ä¼ å‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// others ä¸ºç”¨æˆ·å¯èƒ½ä¼ é€’çš„ `success`, `fail`, `complete`</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; path, query, ...others &#125; = location</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(&#123; path, query &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; url, ...others &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.redirect) &#123;</span><br><span class=\"line\">    wx.redirectTo(params)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šè·¯ç”±ä¼ å‚å¹¶è§£æéƒ¨åˆ†å·²ç»å®Œæˆï¼Œæ¥ä¸‹æ¥è¯»å–å‚æ•°çš„æ§åˆ¶éœ€è¦å®šä¹‰ä¸€ä¸ª <code>$route</code> å¯¹è±¡ä¸å‰é¢çš„ <code>$router</code> ä¸€è‡´æŒ‚è½½é¡µé¢å®ä¾‹ä¸Š</p>\n<p>è¿™ä¸€å±‚è¯»mpvueçš„å®ä¾‹åˆ›å»ºä¸€ä¸ª <code>parseRoute</code> å‡½æ•°ç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®å³å¯</p>\n<p>æ­¤å¤„é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š ä¹‹å‰åªæ˜¯ä½¿ç”¨JSON.parseç®€å•å¤„ç†ä¸€ä¸‹æ•°æ®ï¼Œå½“æ•°æ®ä¸ºé•¿æ•´å‹å­—ç¬¦ä¸²ï¼ˆé•¿åº¦è¶…è¿‡17ä½ï¼‰ä¼šä¸¢å¤±ç²¾åº¦è½¬0<br>ä»¥ä¸‹åŒæ—¶ç®€å•å¤„ç†ä¸€ä¸‹</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parseRoute</span>(<span class=\"params\">$mp</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// $mp ä¸ºmpvueå®ä¾‹rootä¸ŠæŒ‚è½½çš„å¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> _mp = $mp || &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> path = _mp.page &amp;&amp; _mp.page.route</span><br><span class=\"line\">  <span class=\"keyword\">const</span> parseQuery = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> tempQuery = _mp.query</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> k <span class=\"keyword\">in</span> tempQuery) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> cur = tempQuery[k]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// è§£å†³é•¿æ•´å‹ä¸¢å¤±ç²¾åº¦</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> transfer = <span class=\"built_in\">JSON</span>.parse(tempQuery[k])</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!(<span class=\"keyword\">typeof</span> transfer === <span class=\"string\">'number'</span>)) &#123;</span><br><span class=\"line\">        cur = transfer</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    parseQuery[k] = cur</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    parseQuery</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æœ€ç»ˆæŒ‚è½½åœ¨é¡µé¢å®ä¾‹ä¸Šï¼Œç”±äºè·¯ç”±å‚æ•°æ¯æ¬¡è·³è½¬éƒ½è¦æ›´æ–°æ‰€ä»¥æŒ‚è½½åœ¨å°ç¨‹åº <code>onShow</code> é’©å­ä¸Š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _route = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.mixin(&#123;</span><br><span class=\"line\">  onShow() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; $mp &#125; = <span class=\"keyword\">this</span>.$root</span><br><span class=\"line\"></span><br><span class=\"line\">    _route = parseRoute($mp)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> $route = &#123;</span><br><span class=\"line\">  get() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _route</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">'$route'</span>, $route)</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸Šä¾¿å®Œæˆè·¯ç”±å‚æ•°çš„è¯»å†™</p>\n<h3 id=\"è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\"><a href=\"#è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\" class=\"headerlink\" title=\"è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜\"></a>è§£å†³ä¸Šé¢æå‡ºçš„å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜</h3><p>å°ç¨‹åºçš„åŸºæœ¬åŠŸèƒ½å·²ç»å®ç°äº†ï¼Œä¸‹é¢å°±æ˜¯å †æ ˆçš„é™åˆ¶ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è·³è½¬å‰ç›‘å¬å½“å‰å †æ ˆçš„é•¿åº¦ï¼Œæ ˆæ»¡æ—¶æ”¹ç”¨é‡å®šå‘æ–¹æ³• <code>wx.redirectTo</code> å³å¯ï¼ˆå…¶ä»–æ—¶é—´é¡¹ç›®ä¸­ä»…ä½¿ç”¨ <code>navigateTo</code> å³å¯ï¼‰</p>\n<p>é¦–å…ˆéœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡è®°å½•å †æ ˆé•¿åº¦(å¾®ä¿¡æä¾›ä¸€ä¸ªgetCurrentPagesçš„æ–¹æ³•)ï¼Œ åŒæ—¶æ›´æ”¹ <code>push</code> æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å½“å‰é¡µé¢å †æ ˆé•¿åº¦</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> pageStackLen = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"comment\">// å †æ ˆé™åˆ¶</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> maxStackLen = <span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">push</span>(<span class=\"params\">location, success, ...ohters</span>) </span>&#123;</span><br><span class=\"line\">  pageStackLen = getCurrentPages().length + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(location)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// åŒ…è£…è·³è½¬æˆåŠŸçš„å›è°ƒ</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> _success = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    pageStackLen = getCurrentPages().length + <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">    success &amp;&amp; success()</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123; url, <span class=\"attr\">success</span>: _success, ...ohters&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (location.isTab) &#123;</span><br><span class=\"line\">    wx.switchTab(params)</span><br><span class=\"line\"></span><br><span class=\"line\">    pageStackLen = <span class=\"number\">1</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (location.reLaunch) &#123;</span><br><span class=\"line\">    wx.reLaunch(params)</span><br><span class=\"line\"></span><br><span class=\"line\">    pageStackLen = <span class=\"number\">1</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (pageStackLen &gt;= maxStackLen) &#123;</span><br><span class=\"line\">      wx.redirectTo(params)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    wx.navigateTo(params)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸ŠåŸºæœ¬è§£å†³å°ç¨‹åºå †æ ˆé™åˆ¶é—®é¢˜</p>\n<h3 id=\"å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\"><a href=\"#å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\" class=\"headerlink\" title=\"å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½\"></a>å®Œå–„è·¯ç”±è·³è½¬åŠŸèƒ½</h3><p>ç°åœ¨å¯¹è·¯ç”±çš„è·³è½¬åšä¸€äº›åŸºæœ¬è¾…åŠ©åŠŸèƒ½çš„æ”¯æŒ <code>go</code>ã€ <code>back</code>, <code>replace</code> ç­‰æ–¹æ³•</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replace</span>(<span class=\"params\">location, ...others</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> url = parseUrl(location)</span><br><span class=\"line\"></span><br><span class=\"line\">  wx.redirectTo(&#123;</span><br><span class=\"line\">    url,</span><br><span class=\"line\">    ...others</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">go</span>(<span class=\"params\">delta</span>) </span>&#123;</span><br><span class=\"line\">  wx.navigateBack(&#123;</span><br><span class=\"line\">    delta</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">back</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  wx.navigateBack()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å°†è¿™äº›æŒ‚åˆ° <code>$router</code> å¯¹è±¡</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> _router = &#123;</span><br><span class=\"line\">  mode: <span class=\"string\">'history'</span>,</span><br><span class=\"line\">  push,</span><br><span class=\"line\">  replace,</span><br><span class=\"line\">  go,</span><br><span class=\"line\">  back</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> $router = &#123;</span><br><span class=\"line\">  get() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _router</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤å¤–è¿˜æœ‰æˆ‘ä»¬ä¸éœ€è¦é¡µé¢ä¹‹é—´ä¼ å‚æ—¶æ—¶pushæ–¹æ³•ç›´æ¥ä¼ å­—ç¬¦ä¸²è·¯å¾„ï¼Œè·¯ç”±å…¬ç”¨è·¯å¾„çœç•¥ï¼Œpushè°ƒç”¨ä¼ åŸºæœ¬è·¯å¾„è‡ªåŠ¨è¡¥é½, å•ç‹¬å¯¼å‡º <code>push</code> æ–¹æ³•æ–¹ä¾¿ç»„ä»¶å¤–éƒ¨è°ƒç”¨ç­‰ä¼˜åŒ–</p>\n<p>æœ€åæˆ‘ä»¬è¿˜å·®è·¯ç”±æ‹¦æˆªå™¨åŠŸèƒ½çš„å®ç°</p>\n<h3 id=\"è·¯ç”±æ‹¦æˆªå™¨\"><a href=\"#è·¯ç”±æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"è·¯ç”±æ‹¦æˆªå™¨\"></a>è·¯ç”±æ‹¦æˆªå™¨</h3><p>éœ€æ±‚ï¼š å¯¹è±¡å½¢å¼é…ç½®è‡ªå·±è·¯ç”±è§„åˆ™</p>\n<ul>\n<li><code>[triggerAll]</code>ï¼š æ‰€æœ‰è·¯ç”±è·³è½¬å‡ä¼šè§¦å‘</li>\n<li><code>[triggerMatch]</code>ï¼š åŒ¹é…æŒ‡å®šè·¯ç”±ï¼Œå…¶ä¸­å¯é…ç½®å¤šä¸ªè§„åˆ™ï¼Œä»¥å‡½æ•°æ•°ç»„å½¢å¼ä¼ å…¥ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å‡½æ•°éƒ½ä¼šåœ¨è¢«åŒ¹é…æ—¶è§¦å‘</li>\n</ul>\n<p>å‚æ•°ä»‹ç»ï¼š</p>\n<ul>\n<li><code>config</code>: æºå¸¦å½“å‰è·¯ç”±è·³è½¬ä¿¡æ¯ï¼ˆè·¯ç”±å‚æ•°ï¼‰</li>\n<li><code>to</code>: æ§åˆ¶è·³è½¬ï¼ˆè°ƒç”¨ <code>to()</code> ï¼‰</li>\n</ul>\n<p>ä½¿ç”¨æ–¹å¼ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  triggerAll(config, to) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(config, <span class=\"string\">'enter interceptor'</span>)</span><br><span class=\"line\">    to()</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  triggerMatch: &#123;</span><br><span class=\"line\">    <span class=\"string\">'/home/pages/categoryList'</span>: [</span><br><span class=\"line\">      (config, to) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"comment\">/*flag*/</span>) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>)</span><br><span class=\"line\">          to()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æœ¬è´¨ä¸Šè¿˜æ˜¯å°†ä¹‹å‰å°è£…çš„è·¯ç”±æš´éœ²å‡ºæ¥çš„pushæ–¹æ³•å†æ¬¡å°è£…ä¸€å±‚ï¼Œå…¶ä¸­åŠ å…¥è‡ªå·±çš„é€»è¾‘è¾¾åˆ°ç›®çš„</p>\n<p>æ–°å»º <code>interceptor.js</code></p>\n<p>é¦–å…ˆå¼•å…¥ä¹‹å‰çš„è·¯ç”±æ–¹ä¾¿åœ¨å®ä¾‹ä¸Šè°ƒç”¨ï¼Œå®šä¹‰ <code>triggerMatch</code> çš„å¯¹è±¡å­˜å‚¨å­˜å…¥çš„å‡½æ•° <code>key</code> ä¸ºå½“å‰è·¯ç”±çš„è·¯å¾„ï¼Œ<code>value</code> ä¸º ä¸­é—´ä»¶å‡½æ•°ç»„æˆçš„æ•°ç»„</p>\n<p>å…³é”®ï¼š å°† <code>push</code> æ–¹æ³•å½“åšå•ç‹¬çš„ä¸€ä¸ªä¸­é—´ä»¶å¹¶æ”¾åœ¨æ‰€æœ‰ä¸­é—´ä»¶çš„æœ€åæ‰§è¡Œ</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¼•å…¥</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">'./index.js'</span></span><br><span class=\"line\"><span class=\"comment\">// æŒ‚è½½</span></span><br><span class=\"line\">Vue.use(router)</span><br><span class=\"line\"><span class=\"comment\">// å­˜åŒ¹é…æŒ‡å®šè·¯ç”±çš„ä¸šåŠ¡å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> matchMiddlewares = &#123;&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥è¦æ„å»ºä¸€ä¸ªå¤„ç†æ¨å…¥è§„åˆ™çš„ä¸šåŠ¡å‡½æ•°ï¼ˆä¸­é—´ä»¶ï¼‰çš„ <code>compose</code> å‡½æ•°</p>\n<p>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªï¼š</p>\n<ul>\n<li>ä¾æ¬¡æ´¾å‘æ¨å…¥æ‹¦æˆªå™¨çš„ä¸šåŠ¡å‡½æ•°</li>\n<li>æ§åˆ¶ä¸‹ä¸€æ¬¡æ´¾å‘çš„å¼€å§‹</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span> (...args) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dispatch</span>(<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> !middlewares[i]</span><br><span class=\"line\">      ? <span class=\"built_in\">Promise</span>.resolve(<span class=\"string\">'no arguments'</span>)</span><br><span class=\"line\">      : <span class=\"built_in\">Promise</span>.resolve(</span><br><span class=\"line\">          middlewares[i](...args, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ´¾å‘ä¸‹ä¸ªè°ƒç”¨</span></span><br><span class=\"line\">            <span class=\"comment\">// æ­¤å¤„å³æ˜¯æ‹¦æˆªå™¨ä¸­ç¬¬äºŒä¸ªå®å‚ to æ–¹æ³•çš„å‡½æ•°ä½“</span></span><br><span class=\"line\">            <span class=\"comment\">// è°ƒåŠ¨ to() å³å¼€å¯ä¸‹ä¸€æ¬¡æ´¾å‘</span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> dispatch(++i)</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¼€å¯è°ƒç”¨</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> dispatch(<span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºä¸€ä¸ªå‡½æ•° <code>getMatchMiddlewares</code> ç”¨æ¥æ ¹æ®æŒ‡å®šé”®å€¼è¯»å– <code>matchMiddlewares</code> ä¸­ä¸­é—´ä»¶å‡½æ•°æ•°ç»„</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getMatchMiddlewares</span>(<span class=\"params\">path</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> matchMiddlewares.hasOwnProperty(path) ? matchMiddlewares[path] : []</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è·¯ç”±åŒæ ·ä½¿ç”¨ <code>Vue.use</code> æ–¹æ³•æ³¨å†Œï¼Œè¿™é‡Œå¯¼å‡º <code>install</code> æ–¹æ³•, åœ¨é‡Œé¢ç»Ÿä¸€æ‰€æœ‰ä¸­é—´ä»¶å‡½æ•°</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åŒ…è£… push</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> $push</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pushMiddware</span>(<span class=\"params\">...args</span>) </span>&#123;</span><br><span class=\"line\">  $push(...args)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue, &#123; triggerAll, triggerMatch &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å­˜å‚¨åŸ push å‡½æ•°</span></span><br><span class=\"line\">    $push = Vue.prototype.$router.push</span><br><span class=\"line\">    <span class=\"comment\">// æ¥æ”¶ä¼ å…¥çš„åŒ¹é…å‡½æ•°</span></span><br><span class=\"line\">    matchMiddlewares = <span class=\"built_in\">Object</span>.assign(&#123;&#125;, triggerMatch)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// é‡æ–°èµ‹å€¼</span></span><br><span class=\"line\">    Vue.prototype.$router.push = <span class=\"function\">(<span class=\"params\">...args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// åˆå¹¶</span></span><br><span class=\"line\">      compose([...getMatchMiddlewares(path), triggerAll, pushMiddware])(</span><br><span class=\"line\">        ...args</span><br><span class=\"line\">      )</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¹‹ååœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥å³å¯</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> interceptor <span class=\"keyword\">from</span> <span class=\"string\">'./interceptor.js'</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(interceptor)</span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤ä¾¿å®Œæˆäº†è·¯ç”±çš„æ‰€æœ‰åŠŸèƒ½çš„åŸºæœ¬å°è£…</p>\n<p>è¯¦ç»†ä»£ç å¯ä»¥æŸ¥çœ‹ <a href=\"http://git.yupaopao.com/fe/applet/iverson/tree/master/src/global/lib/router\" target=\"_blank\" rel=\"noopener\">å°ç¨‹åºè·¯ç”±</a></p>\n<p>æ­¤ç¯‡æ–‡ç« å·²ç»å‘å¸ƒåœ¨ <a href=\"http://doc.yupaopao.com/pages/viewpage.action?pageId=7176857\" target=\"_blank\" rel=\"noopener\">http://doc.yupaopao.com</a></p>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>è·¯ç”±åŸºæœ¬åŠŸèƒ½çš„å°è£…åŸºæœ¬è‡³æ­¤å·²ç»å…¨éƒ¨å®Œæˆï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸å¼€å‘éœ€è¦ã€‚ä½†ç”±äºè‡ªèº«æ°´å¹³é™åˆ¶ï¼Œä¼šå­˜åœ¨å„ç±»é—®é¢˜ï¼Œå¸Œæœ›å¤§å®¶æŒ‡å‡ºä¸€èµ·è®¨è®ºï¼Œå…±åŒè¿›æ­¥ã€‚</p>\n<p>å¼€æ”¾ã€çœŸå®ï¼peace.</p>"},{"title":"åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹","date":"2019-02-21T12:36:00.000Z","_content":"\nè€è™ä¼šåƒç¾Šå—ï¼ŸğŸ…ğŸ‘\n\n<!--more-->\n\nè‰åŸä¸Šæœ‰ 1000 åªè€è™å’Œ 1 åªç¾Šï¼Œè€è™åƒç¾Šï¼Œç¾Šåƒè‰ï¼Œä½†æ˜¯è€è™åƒå®Œç¾Šä¼šå˜æˆç¾Šï¼ˆä¸€åªç¾Šåªèƒ½è¢«ä¸€åªè€è™åƒï¼‰\n\n_æç¤º:æ¯åªè€è™éƒ½å¾ˆèªæ˜_\n\n# å½’çº³\n\n#### case1: ä¸¤åªè€è™ä¸€åªç¾Š\n\nä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåå˜ä¸ºç¾Šä¼šè¢«å‰©ä¸‹çš„è€è™åƒ\n\n#### case2: ä¸‰åªè€è™ä¸€åªç¾Š\n\nåƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase1\n\n#### case3: å››åªè€è™ä¸€åªç¾Š\n\nä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase2ä¼šè¢«åƒ\n\n#### case4: äº”åªè€è™ä¸€åªç¾Š\n\nåƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase3\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\nç”±æœ€åŸºæœ¬çš„å½’çº³æ³•å¯ä»¥åˆ¤æ–­åªæœ‰ä¸€åªç¾Šçš„æ—¶å€™ï¼Œå¶æ•°åªè€è™æƒ…å†µä¸‹ä¸åƒï¼Œè€Œå¥‡æ•°åªè€è™æƒ…å†µä¸‹å¯ä»¥åƒ\n\nå¼•å‡ºè¯¾é¢˜ `Dynamic Programming`\n\n# Dynamic Programming\n\n> ç®€å•çš„ç†è§£å°±æ˜¯ä»æœ€åŸºæœ¬çš„çš„æƒ…å†µå…¥æ‰‹é€æ¸å°†æ•´ä¸ªé—®é¢˜è§£å†³ï¼ŒåŠ¨æ€è§„åˆ’ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç§æ¦‚å¿µ\n\n- æœ€ä¼˜å­ç»“æ„\n- è¾¹ç•Œ\n- çŠ¶æ€è½¬ç§»å…¬å¼\n\nä¸‹é¢ç”¨å¸¸è§çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé»„é‡‘åˆ†å‰²æ•°åˆ—ã€å…”å­æ•°åˆ—ï¼‰æ¥å…·è±¡åŒ–é—®é¢˜\n\n_Fibonacciï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªæ•°åˆ— 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233ï¼Œ377ï¼Œ610ï¼Œ987ï¼Œ1597ï¼Œ2584ï¼Œ4181ï¼Œ6765ï¼Œ10946ï¼Œ17711ï¼Œ28657ï¼Œ46368........è¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œ_\n\nåœ¨æ•°å­¦ä¸Šï¼Œæ–æ³¢çº³å¥‘æ•°åˆ—ä»¥å¦‚ä¸‹è¢«ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼šF(1)=1ï¼ŒF(2)=1, F(n)=F(n-1)+F(n-2)ï¼ˆn>=3ï¼ŒnâˆˆN*ï¼‰å› æ­¤å¯ä»¥ç›´æ¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š\n``` js\nfunction fn(n) {\n  if (n === 1 || n === 2){\n\t  return 1\n  }\n\n  return fn(n-1) + fn(n-2)\n}\n```\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n``` js\nconsole.log(\n  `ç¬¬1é¡¹${fn(1)}`,\n  `ç¬¬2é¡¹${fn(2)}`,\n  `ç¬¬3é¡¹${fn(3)}`,\n  `ç¬¬4é¡¹${fn(4)}`,\n  `ç¬¬5é¡¹${fn(5)}`,\n  `ç¬¬6é¡¹${fn(6)}`,\n  `ç¬¬7é¡¹${fn(7)}`\n)\n// VM455:1 ç¬¬1é¡¹1 ç¬¬2é¡¹1 ç¬¬3é¡¹2 ç¬¬4é¡¹3 ç¬¬5é¡¹5 ç¬¬6é¡¹8 ç¬¬7é¡¹13\n```\n\nç°åœ¨æ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è§£é‡Šä¸Šé¢æå‡ºçš„ä¸‰ä¸ªåŠ¨æ€è§„åˆ’ç›¸å…³çš„æ¦‚å¿µ\n\n1. æœ€ä¼˜å­ç»“æ„ï¼šè‹¥æƒ³æ±‚å¾—ç¬¬ `m` é¡¹çš„å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦å»æ±‚å¾—ç¬¬ `m-1` å’Œ `m-2` çš„å€¼å³å¯ï¼Œé‚£ä¹ˆ `fn(m-1) + fn(m-2) === f(m)` ç­‰å¼æˆç«‹\n2. è¾¹ç•Œ: å³èŒƒå›´\n3. çŠ¶æ€è½¬ç§»å…¬å¼ï¼š`f(m) = fn(m-1) + fn(m-2)`\n\nä¸Šé¢çš„æ–¹æ³•å…¶å®çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é€’å½’ï¼Œä½†æ˜¯æ€§èƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nå…·è±¡åŒ–æ¥çœ‹ï¼š æ±‚å¾—f(5) = ï¼Ÿ\n - f(5)ä¾èµ– f(4)å’Œf(3)\n - f(4)ä¾èµ– f(3)å’Œf(2)\n - f(3)ä¾èµ– f(2)å’Œf(1)\n\næ˜¾ç„¶ä¸Šé¢çš„è®¡ç®—æœ‰ç€å¤§é‡çš„é‡å¤æ“ä½œï¼Œæ—¢ç„¶æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯åŸºäºf(1)å’Œf(2), é‚£ä¹ˆä»f(1)å’Œf(2)çš„è®¡ç®—å¼€å§‹å°±é¿å…äº†é‡å¤çš„è®¡ç®—ï¼Œä¹Ÿæ˜¯å°±åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nfunction fn(n) {\n  if (n === 1 || n === 2){\n\t  return 1\n  }\n\n  let m = 1, m_1 = 1, result\n\n  for(let i = 3; i <= n; i++){\n    result = m + m_1\n    m_1 = m\n    m = result\n  }\n\n  return result\n}\n```\n\nç»“æœå’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ä½†æ˜¯æ€§èƒ½å°±ä¼šæœ‰éå¸¸å¤§çš„æå‡äº†\n\n# æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\n_é€’å½’ï¼š ç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’ï¼ˆrecursionï¼‰_\n\né‚£ä¹ˆä¸Šé¢ `return fn(n-1) + fn(n-2)` å°±æ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„é€’å½’\n\nè¿™é‡Œå†å¼•å…¥ä¸€ä¸ªå°¾é€’å½’çš„æ¦‚å¿µï¼šå°±æ˜¯å‡½æ•°åœ¨å°¾éƒ¨è°ƒç”¨è‡ªèº«\n\né‚£ä¸‹é¢æ¥ç®€å•è¯´è¯´ä¸ºä»€ä¹ˆä¸Šé¢é€’å½’çš„å†™æ³•æ€§èƒ½ä¼šé‚£ä¹ˆå·®\n\nè°ƒç”¨æ ˆéšç€nçš„å¢åŠ è€Œçº¿æ€§å¢åŠ å¾ˆå®¹æ˜“é€ æˆå†…å­˜å †æ ˆæº¢å‡ºã€‚è¿™æ˜¯å› ä¸ºè¿™ç§é€’å½’æ“ä½œä¸­ï¼ŒåŒæ—¶ä¿å­˜äº†å¤§é‡çš„æ ˆå¸§ï¼Œè°ƒç”¨æ ˆéå¸¸é•¿ï¼Œæ¶ˆè€—äº†å·¨å¤§çš„å†…å­˜\n\nå°†ä¸Šé¢æ–¹æ³•æ”¹ç”¨å°¾é€’å½’çš„å†™æ³•ï¼š\n```js\nfunction fn(n, m_1 = 1, m = 1) {  \n  if (n === 1 || n === 2) return m\n\n  return fn(n - 1, m, m + m_1)\n}\n```\næ­¤æ—¶fnæ¯æ¬¡é€’å½’ä»…ä»…æ›´æ–°è‡ªå·±çš„è°ƒç”¨æ ˆï¼Œæ€§èƒ½å¾—åˆ°å¤§å¹…æå‡ğŸ‘\n\nå½“ç„¶æ‰€æœ‰çš„é€’å½’éƒ½å¯ä»¥ç”¨å¾ªç¯æ¥å®ç°ï¼Œä¸å°±é¿å…äº†å †æ ˆæº¢å‡ºçš„å¯èƒ½äº†å— å•Šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ\n\n# summary\n\ndravenï¼šå¥½å¥½çœ‹ å¥½å¥½å­¦\n\n\n","source":"_posts/writeSomething/dynamicProgrammingAndRecursion.md","raw":"---\ntitle: åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹\ntags:\n  - ç®—æ³•\n  - åŠ¨æ€è§„åˆ’\n  - é€’å½’\n  - å°¾é€’å½’\ndate: 2019-02-21 20:36:00\ncategories: ç®—æ³•\n---\n\nè€è™ä¼šåƒç¾Šå—ï¼ŸğŸ…ğŸ‘\n\n<!--more-->\n\nè‰åŸä¸Šæœ‰ 1000 åªè€è™å’Œ 1 åªç¾Šï¼Œè€è™åƒç¾Šï¼Œç¾Šåƒè‰ï¼Œä½†æ˜¯è€è™åƒå®Œç¾Šä¼šå˜æˆç¾Šï¼ˆä¸€åªç¾Šåªèƒ½è¢«ä¸€åªè€è™åƒï¼‰\n\n_æç¤º:æ¯åªè€è™éƒ½å¾ˆèªæ˜_\n\n# å½’çº³\n\n#### case1: ä¸¤åªè€è™ä¸€åªç¾Š\n\nä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåå˜ä¸ºç¾Šä¼šè¢«å‰©ä¸‹çš„è€è™åƒ\n\n#### case2: ä¸‰åªè€è™ä¸€åªç¾Š\n\nåƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase1\n\n#### case3: å››åªè€è™ä¸€åªç¾Š\n\nä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase2ä¼šè¢«åƒ\n\n#### case4: äº”åªè€è™ä¸€åªç¾Š\n\nåƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase3\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\n\nç”±æœ€åŸºæœ¬çš„å½’çº³æ³•å¯ä»¥åˆ¤æ–­åªæœ‰ä¸€åªç¾Šçš„æ—¶å€™ï¼Œå¶æ•°åªè€è™æƒ…å†µä¸‹ä¸åƒï¼Œè€Œå¥‡æ•°åªè€è™æƒ…å†µä¸‹å¯ä»¥åƒ\n\nå¼•å‡ºè¯¾é¢˜ `Dynamic Programming`\n\n# Dynamic Programming\n\n> ç®€å•çš„ç†è§£å°±æ˜¯ä»æœ€åŸºæœ¬çš„çš„æƒ…å†µå…¥æ‰‹é€æ¸å°†æ•´ä¸ªé—®é¢˜è§£å†³ï¼ŒåŠ¨æ€è§„åˆ’ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç§æ¦‚å¿µ\n\n- æœ€ä¼˜å­ç»“æ„\n- è¾¹ç•Œ\n- çŠ¶æ€è½¬ç§»å…¬å¼\n\nä¸‹é¢ç”¨å¸¸è§çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé»„é‡‘åˆ†å‰²æ•°åˆ—ã€å…”å­æ•°åˆ—ï¼‰æ¥å…·è±¡åŒ–é—®é¢˜\n\n_Fibonacciï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªæ•°åˆ— 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233ï¼Œ377ï¼Œ610ï¼Œ987ï¼Œ1597ï¼Œ2584ï¼Œ4181ï¼Œ6765ï¼Œ10946ï¼Œ17711ï¼Œ28657ï¼Œ46368........è¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œ_\n\nåœ¨æ•°å­¦ä¸Šï¼Œæ–æ³¢çº³å¥‘æ•°åˆ—ä»¥å¦‚ä¸‹è¢«ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼šF(1)=1ï¼ŒF(2)=1, F(n)=F(n-1)+F(n-2)ï¼ˆn>=3ï¼ŒnâˆˆN*ï¼‰å› æ­¤å¯ä»¥ç›´æ¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š\n``` js\nfunction fn(n) {\n  if (n === 1 || n === 2){\n\t  return 1\n  }\n\n  return fn(n-1) + fn(n-2)\n}\n```\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n``` js\nconsole.log(\n  `ç¬¬1é¡¹${fn(1)}`,\n  `ç¬¬2é¡¹${fn(2)}`,\n  `ç¬¬3é¡¹${fn(3)}`,\n  `ç¬¬4é¡¹${fn(4)}`,\n  `ç¬¬5é¡¹${fn(5)}`,\n  `ç¬¬6é¡¹${fn(6)}`,\n  `ç¬¬7é¡¹${fn(7)}`\n)\n// VM455:1 ç¬¬1é¡¹1 ç¬¬2é¡¹1 ç¬¬3é¡¹2 ç¬¬4é¡¹3 ç¬¬5é¡¹5 ç¬¬6é¡¹8 ç¬¬7é¡¹13\n```\n\nç°åœ¨æ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è§£é‡Šä¸Šé¢æå‡ºçš„ä¸‰ä¸ªåŠ¨æ€è§„åˆ’ç›¸å…³çš„æ¦‚å¿µ\n\n1. æœ€ä¼˜å­ç»“æ„ï¼šè‹¥æƒ³æ±‚å¾—ç¬¬ `m` é¡¹çš„å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦å»æ±‚å¾—ç¬¬ `m-1` å’Œ `m-2` çš„å€¼å³å¯ï¼Œé‚£ä¹ˆ `fn(m-1) + fn(m-2) === f(m)` ç­‰å¼æˆç«‹\n2. è¾¹ç•Œ: å³èŒƒå›´\n3. çŠ¶æ€è½¬ç§»å…¬å¼ï¼š`f(m) = fn(m-1) + fn(m-2)`\n\nä¸Šé¢çš„æ–¹æ³•å…¶å®çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é€’å½’ï¼Œä½†æ˜¯æ€§èƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nå…·è±¡åŒ–æ¥çœ‹ï¼š æ±‚å¾—f(5) = ï¼Ÿ\n - f(5)ä¾èµ– f(4)å’Œf(3)\n - f(4)ä¾èµ– f(3)å’Œf(2)\n - f(3)ä¾èµ– f(2)å’Œf(1)\n\næ˜¾ç„¶ä¸Šé¢çš„è®¡ç®—æœ‰ç€å¤§é‡çš„é‡å¤æ“ä½œï¼Œæ—¢ç„¶æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯åŸºäºf(1)å’Œf(2), é‚£ä¹ˆä»f(1)å’Œf(2)çš„è®¡ç®—å¼€å§‹å°±é¿å…äº†é‡å¤çš„è®¡ç®—ï¼Œä¹Ÿæ˜¯å°±åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nfunction fn(n) {\n  if (n === 1 || n === 2){\n\t  return 1\n  }\n\n  let m = 1, m_1 = 1, result\n\n  for(let i = 3; i <= n; i++){\n    result = m + m_1\n    m_1 = m\n    m = result\n  }\n\n  return result\n}\n```\n\nç»“æœå’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ä½†æ˜¯æ€§èƒ½å°±ä¼šæœ‰éå¸¸å¤§çš„æå‡äº†\n\n# æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\n_é€’å½’ï¼š ç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’ï¼ˆrecursionï¼‰_\n\né‚£ä¹ˆä¸Šé¢ `return fn(n-1) + fn(n-2)` å°±æ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„é€’å½’\n\nè¿™é‡Œå†å¼•å…¥ä¸€ä¸ªå°¾é€’å½’çš„æ¦‚å¿µï¼šå°±æ˜¯å‡½æ•°åœ¨å°¾éƒ¨è°ƒç”¨è‡ªèº«\n\né‚£ä¸‹é¢æ¥ç®€å•è¯´è¯´ä¸ºä»€ä¹ˆä¸Šé¢é€’å½’çš„å†™æ³•æ€§èƒ½ä¼šé‚£ä¹ˆå·®\n\nè°ƒç”¨æ ˆéšç€nçš„å¢åŠ è€Œçº¿æ€§å¢åŠ å¾ˆå®¹æ˜“é€ æˆå†…å­˜å †æ ˆæº¢å‡ºã€‚è¿™æ˜¯å› ä¸ºè¿™ç§é€’å½’æ“ä½œä¸­ï¼ŒåŒæ—¶ä¿å­˜äº†å¤§é‡çš„æ ˆå¸§ï¼Œè°ƒç”¨æ ˆéå¸¸é•¿ï¼Œæ¶ˆè€—äº†å·¨å¤§çš„å†…å­˜\n\nå°†ä¸Šé¢æ–¹æ³•æ”¹ç”¨å°¾é€’å½’çš„å†™æ³•ï¼š\n```js\nfunction fn(n, m_1 = 1, m = 1) {  \n  if (n === 1 || n === 2) return m\n\n  return fn(n - 1, m, m + m_1)\n}\n```\næ­¤æ—¶fnæ¯æ¬¡é€’å½’ä»…ä»…æ›´æ–°è‡ªå·±çš„è°ƒç”¨æ ˆï¼Œæ€§èƒ½å¾—åˆ°å¤§å¹…æå‡ğŸ‘\n\nå½“ç„¶æ‰€æœ‰çš„é€’å½’éƒ½å¯ä»¥ç”¨å¾ªç¯æ¥å®ç°ï¼Œä¸å°±é¿å…äº†å †æ ˆæº¢å‡ºçš„å¯èƒ½äº†å— å•Šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ\n\n# summary\n\ndravenï¼šå¥½å¥½çœ‹ å¥½å¥½å­¦\n\n\n","slug":"writeSomething/dynamicProgrammingAndRecursion","published":1,"updated":"2019-02-24T02:52:53.593Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptw9000379483xs0xfpx","content":"<p>è€è™ä¼šåƒç¾Šå—ï¼ŸğŸ…ğŸ‘</p>\n<a id=\"more\"></a>\n<p>è‰åŸä¸Šæœ‰ 1000 åªè€è™å’Œ 1 åªç¾Šï¼Œè€è™åƒç¾Šï¼Œç¾Šåƒè‰ï¼Œä½†æ˜¯è€è™åƒå®Œç¾Šä¼šå˜æˆç¾Šï¼ˆä¸€åªç¾Šåªèƒ½è¢«ä¸€åªè€è™åƒï¼‰</p>\n<p><em>æç¤º:æ¯åªè€è™éƒ½å¾ˆèªæ˜</em></p>\n<h1 id=\"å½’çº³\"><a href=\"#å½’çº³\" class=\"headerlink\" title=\"å½’çº³\"></a>å½’çº³</h1><h4 id=\"case1-ä¸¤åªè€è™ä¸€åªç¾Š\"><a href=\"#case1-ä¸¤åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case1: ä¸¤åªè€è™ä¸€åªç¾Š\"></a>case1: ä¸¤åªè€è™ä¸€åªç¾Š</h4><p>ä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåå˜ä¸ºç¾Šä¼šè¢«å‰©ä¸‹çš„è€è™åƒ</p>\n<h4 id=\"case2-ä¸‰åªè€è™ä¸€åªç¾Š\"><a href=\"#case2-ä¸‰åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case2: ä¸‰åªè€è™ä¸€åªç¾Š\"></a>case2: ä¸‰åªè€è™ä¸€åªç¾Š</h4><p>åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase1</p>\n<h4 id=\"case3-å››åªè€è™ä¸€åªç¾Š\"><a href=\"#case3-å››åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case3: å››åªè€è™ä¸€åªç¾Š\"></a>case3: å››åªè€è™ä¸€åªç¾Š</h4><p>ä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase2ä¼šè¢«åƒ</p>\n<h4 id=\"case4-äº”åªè€è™ä¸€åªç¾Š\"><a href=\"#case4-äº”åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case4: äº”åªè€è™ä¸€åªç¾Š\"></a>case4: äº”åªè€è™ä¸€åªç¾Š</h4><p>åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase3</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>ç”±æœ€åŸºæœ¬çš„å½’çº³æ³•å¯ä»¥åˆ¤æ–­åªæœ‰ä¸€åªç¾Šçš„æ—¶å€™ï¼Œå¶æ•°åªè€è™æƒ…å†µä¸‹ä¸åƒï¼Œè€Œå¥‡æ•°åªè€è™æƒ…å†µä¸‹å¯ä»¥åƒ</p>\n<p>å¼•å‡ºè¯¾é¢˜ <code>Dynamic Programming</code></p>\n<h1 id=\"Dynamic-Programming\"><a href=\"#Dynamic-Programming\" class=\"headerlink\" title=\"Dynamic Programming\"></a>Dynamic Programming</h1><blockquote>\n<p>ç®€å•çš„ç†è§£å°±æ˜¯ä»æœ€åŸºæœ¬çš„çš„æƒ…å†µå…¥æ‰‹é€æ¸å°†æ•´ä¸ªé—®é¢˜è§£å†³ï¼ŒåŠ¨æ€è§„åˆ’ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç§æ¦‚å¿µ</p>\n</blockquote>\n<ul>\n<li>æœ€ä¼˜å­ç»“æ„</li>\n<li>è¾¹ç•Œ</li>\n<li>çŠ¶æ€è½¬ç§»å…¬å¼</li>\n</ul>\n<p>ä¸‹é¢ç”¨å¸¸è§çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé»„é‡‘åˆ†å‰²æ•°åˆ—ã€å…”å­æ•°åˆ—ï¼‰æ¥å…·è±¡åŒ–é—®é¢˜</p>\n<p><em>Fibonacciï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªæ•°åˆ— 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233ï¼Œ377ï¼Œ610ï¼Œ987ï¼Œ1597ï¼Œ2584ï¼Œ4181ï¼Œ6765ï¼Œ10946ï¼Œ17711ï¼Œ28657ï¼Œ46368â€¦â€¦..è¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œ</em></p>\n<p>åœ¨æ•°å­¦ä¸Šï¼Œæ–æ³¢çº³å¥‘æ•°åˆ—ä»¥å¦‚ä¸‹è¢«ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼šF(1)=1ï¼ŒF(2)=1, F(n)=F(n-1)+F(n-2)ï¼ˆn&gt;=3ï¼ŒnâˆˆN*ï¼‰å› æ­¤å¯ä»¥ç›´æ¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn(n<span class=\"number\">-1</span>) + fn(n<span class=\"number\">-2</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬1é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">1</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬2é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">2</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬3é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">3</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬4é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">4</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬5é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">5</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬6é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">6</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬7é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">7</span>)&#125;</span>`</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">// VM455:1 ç¬¬1é¡¹1 ç¬¬2é¡¹1 ç¬¬3é¡¹2 ç¬¬4é¡¹3 ç¬¬5é¡¹5 ç¬¬6é¡¹8 ç¬¬7é¡¹13</span></span><br></pre></td></tr></table></figure></p>\n<p>ç°åœ¨æ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è§£é‡Šä¸Šé¢æå‡ºçš„ä¸‰ä¸ªåŠ¨æ€è§„åˆ’ç›¸å…³çš„æ¦‚å¿µ</p>\n<ol>\n<li>æœ€ä¼˜å­ç»“æ„ï¼šè‹¥æƒ³æ±‚å¾—ç¬¬ <code>m</code> é¡¹çš„å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦å»æ±‚å¾—ç¬¬ <code>m-1</code> å’Œ <code>m-2</code> çš„å€¼å³å¯ï¼Œé‚£ä¹ˆ <code>fn(m-1) + fn(m-2) === f(m)</code> ç­‰å¼æˆç«‹</li>\n<li>è¾¹ç•Œ: å³èŒƒå›´</li>\n<li>çŠ¶æ€è½¬ç§»å…¬å¼ï¼š<code>f(m) = fn(m-1) + fn(m-2)</code></li>\n</ol>\n<p>ä¸Šé¢çš„æ–¹æ³•å…¶å®çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é€’å½’ï¼Œä½†æ˜¯æ€§èƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å…·è±¡åŒ–æ¥çœ‹ï¼š æ±‚å¾—f(5) = ï¼Ÿ</p>\n<ul>\n<li>f(5)ä¾èµ– f(4)å’Œf(3)</li>\n<li>f(4)ä¾èµ– f(3)å’Œf(2)</li>\n<li>f(3)ä¾èµ– f(2)å’Œf(1)</li>\n</ul>\n<p>æ˜¾ç„¶ä¸Šé¢çš„è®¡ç®—æœ‰ç€å¤§é‡çš„é‡å¤æ“ä½œï¼Œæ—¢ç„¶æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯åŸºäºf(1)å’Œf(2), é‚£ä¹ˆä»f(1)å’Œf(2)çš„è®¡ç®—å¼€å§‹å°±é¿å…äº†é‡å¤çš„è®¡ç®—ï¼Œä¹Ÿæ˜¯å°±åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> m = <span class=\"number\">1</span>, m_1 = <span class=\"number\">1</span>, result</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">3</span>; i &lt;= n; i++)&#123;</span><br><span class=\"line\">    result = m + m_1</span><br><span class=\"line\">    m_1 = m</span><br><span class=\"line\">    m = result</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»“æœå’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ä½†æ˜¯æ€§èƒ½å°±ä¼šæœ‰éå¸¸å¤§çš„æå‡äº†</p>\n<h1 id=\"æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\"><a href=\"#æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\" class=\"headerlink\" title=\"æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\"></a>æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’</h1><p><em>é€’å½’ï¼š ç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’ï¼ˆrecursionï¼‰</em></p>\n<p>é‚£ä¹ˆä¸Šé¢ <code>return fn(n-1) + fn(n-2)</code> å°±æ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„é€’å½’</p>\n<p>è¿™é‡Œå†å¼•å…¥ä¸€ä¸ªå°¾é€’å½’çš„æ¦‚å¿µï¼šå°±æ˜¯å‡½æ•°åœ¨å°¾éƒ¨è°ƒç”¨è‡ªèº«</p>\n<p>é‚£ä¸‹é¢æ¥ç®€å•è¯´è¯´ä¸ºä»€ä¹ˆä¸Šé¢é€’å½’çš„å†™æ³•æ€§èƒ½ä¼šé‚£ä¹ˆå·®</p>\n<p>è°ƒç”¨æ ˆéšç€nçš„å¢åŠ è€Œçº¿æ€§å¢åŠ å¾ˆå®¹æ˜“é€ æˆå†…å­˜å †æ ˆæº¢å‡ºã€‚è¿™æ˜¯å› ä¸ºè¿™ç§é€’å½’æ“ä½œä¸­ï¼ŒåŒæ—¶ä¿å­˜äº†å¤§é‡çš„æ ˆå¸§ï¼Œè°ƒç”¨æ ˆéå¸¸é•¿ï¼Œæ¶ˆè€—äº†å·¨å¤§çš„å†…å­˜</p>\n<p>å°†ä¸Šé¢æ–¹æ³•æ”¹ç”¨å°¾é€’å½’çš„å†™æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n, m_1 = <span class=\"number\">1</span>, m = <span class=\"number\">1</span></span>) </span>&#123;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>) <span class=\"keyword\">return</span> m</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn(n - <span class=\"number\">1</span>, m, m + m_1)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ­¤æ—¶fnæ¯æ¬¡é€’å½’ä»…ä»…æ›´æ–°è‡ªå·±çš„è°ƒç”¨æ ˆï¼Œæ€§èƒ½å¾—åˆ°å¤§å¹…æå‡ğŸ‘</p>\n<p>å½“ç„¶æ‰€æœ‰çš„é€’å½’éƒ½å¯ä»¥ç”¨å¾ªç¯æ¥å®ç°ï¼Œä¸å°±é¿å…äº†å †æ ˆæº¢å‡ºçš„å¯èƒ½äº†å— å•Šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</p>\n<h1 id=\"summary\"><a href=\"#summary\" class=\"headerlink\" title=\"summary\"></a>summary</h1><p>dravenï¼šå¥½å¥½çœ‹ å¥½å¥½å­¦</p>\n","site":{"data":{}},"excerpt":"<p>è€è™ä¼šåƒç¾Šå—ï¼ŸğŸ…ğŸ‘</p>","more":"<p>è‰åŸä¸Šæœ‰ 1000 åªè€è™å’Œ 1 åªç¾Šï¼Œè€è™åƒç¾Šï¼Œç¾Šåƒè‰ï¼Œä½†æ˜¯è€è™åƒå®Œç¾Šä¼šå˜æˆç¾Šï¼ˆä¸€åªç¾Šåªèƒ½è¢«ä¸€åªè€è™åƒï¼‰</p>\n<p><em>æç¤º:æ¯åªè€è™éƒ½å¾ˆèªæ˜</em></p>\n<h1 id=\"å½’çº³\"><a href=\"#å½’çº³\" class=\"headerlink\" title=\"å½’çº³\"></a>å½’çº³</h1><h4 id=\"case1-ä¸¤åªè€è™ä¸€åªç¾Š\"><a href=\"#case1-ä¸¤åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case1: ä¸¤åªè€è™ä¸€åªç¾Š\"></a>case1: ä¸¤åªè€è™ä¸€åªç¾Š</h4><p>ä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåå˜ä¸ºç¾Šä¼šè¢«å‰©ä¸‹çš„è€è™åƒ</p>\n<h4 id=\"case2-ä¸‰åªè€è™ä¸€åªç¾Š\"><a href=\"#case2-ä¸‰åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case2: ä¸‰åªè€è™ä¸€åªç¾Š\"></a>case2: ä¸‰åªè€è™ä¸€åªç¾Š</h4><p>åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase1</p>\n<h4 id=\"case3-å››åªè€è™ä¸€åªç¾Š\"><a href=\"#case3-å››åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case3: å››åªè€è™ä¸€åªç¾Š\"></a>case3: å››åªè€è™ä¸€åªç¾Š</h4><p>ä¸åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase2ä¼šè¢«åƒ</p>\n<h4 id=\"case4-äº”åªè€è™ä¸€åªç¾Š\"><a href=\"#case4-äº”åªè€è™ä¸€åªç¾Š\" class=\"headerlink\" title=\"case4: äº”åªè€è™ä¸€åªç¾Š\"></a>case4: äº”åªè€è™ä¸€åªç¾Š</h4><p>åƒï¼šä¸€åªè€è™åƒå®Œç¾Šåæƒ…æ™¯å˜ä¸ºcase3</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>ç”±æœ€åŸºæœ¬çš„å½’çº³æ³•å¯ä»¥åˆ¤æ–­åªæœ‰ä¸€åªç¾Šçš„æ—¶å€™ï¼Œå¶æ•°åªè€è™æƒ…å†µä¸‹ä¸åƒï¼Œè€Œå¥‡æ•°åªè€è™æƒ…å†µä¸‹å¯ä»¥åƒ</p>\n<p>å¼•å‡ºè¯¾é¢˜ <code>Dynamic Programming</code></p>\n<h1 id=\"Dynamic-Programming\"><a href=\"#Dynamic-Programming\" class=\"headerlink\" title=\"Dynamic Programming\"></a>Dynamic Programming</h1><blockquote>\n<p>ç®€å•çš„ç†è§£å°±æ˜¯ä»æœ€åŸºæœ¬çš„çš„æƒ…å†µå…¥æ‰‹é€æ¸å°†æ•´ä¸ªé—®é¢˜è§£å†³ï¼ŒåŠ¨æ€è§„åˆ’ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸‰ç§æ¦‚å¿µ</p>\n</blockquote>\n<ul>\n<li>æœ€ä¼˜å­ç»“æ„</li>\n<li>è¾¹ç•Œ</li>\n<li>çŠ¶æ€è½¬ç§»å…¬å¼</li>\n</ul>\n<p>ä¸‹é¢ç”¨å¸¸è§çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆé»„é‡‘åˆ†å‰²æ•°åˆ—ã€å…”å­æ•°åˆ—ï¼‰æ¥å…·è±¡åŒ–é—®é¢˜</p>\n<p><em>Fibonacciï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªæ•°åˆ— 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233ï¼Œ377ï¼Œ610ï¼Œ987ï¼Œ1597ï¼Œ2584ï¼Œ4181ï¼Œ6765ï¼Œ10946ï¼Œ17711ï¼Œ28657ï¼Œ46368â€¦â€¦..è¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œ</em></p>\n<p>åœ¨æ•°å­¦ä¸Šï¼Œæ–æ³¢çº³å¥‘æ•°åˆ—ä»¥å¦‚ä¸‹è¢«ä»¥é€’æ¨çš„æ–¹æ³•å®šä¹‰ï¼šF(1)=1ï¼ŒF(2)=1, F(n)=F(n-1)+F(n-2)ï¼ˆn&gt;=3ï¼ŒnâˆˆN*ï¼‰å› æ­¤å¯ä»¥ç›´æ¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn(n<span class=\"number\">-1</span>) + fn(n<span class=\"number\">-2</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬1é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">1</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬2é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">2</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬3é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">3</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬4é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">4</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬5é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">5</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬6é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">6</span>)&#125;</span>`</span>,</span><br><span class=\"line\">  <span class=\"string\">`ç¬¬7é¡¹<span class=\"subst\">$&#123;fn(<span class=\"number\">7</span>)&#125;</span>`</span></span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">// VM455:1 ç¬¬1é¡¹1 ç¬¬2é¡¹1 ç¬¬3é¡¹2 ç¬¬4é¡¹3 ç¬¬5é¡¹5 ç¬¬6é¡¹8 ç¬¬7é¡¹13</span></span><br></pre></td></tr></table></figure></p>\n<p>ç°åœ¨æ ¹æ®æ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è§£é‡Šä¸Šé¢æå‡ºçš„ä¸‰ä¸ªåŠ¨æ€è§„åˆ’ç›¸å…³çš„æ¦‚å¿µ</p>\n<ol>\n<li>æœ€ä¼˜å­ç»“æ„ï¼šè‹¥æƒ³æ±‚å¾—ç¬¬ <code>m</code> é¡¹çš„å€¼ï¼Œé‚£ä¹ˆåªéœ€è¦å»æ±‚å¾—ç¬¬ <code>m-1</code> å’Œ <code>m-2</code> çš„å€¼å³å¯ï¼Œé‚£ä¹ˆ <code>fn(m-1) + fn(m-2) === f(m)</code> ç­‰å¼æˆç«‹</li>\n<li>è¾¹ç•Œ: å³èŒƒå›´</li>\n<li>çŠ¶æ€è½¬ç§»å…¬å¼ï¼š<code>f(m) = fn(m-1) + fn(m-2)</code></li>\n</ol>\n<p>ä¸Šé¢çš„æ–¹æ³•å…¶å®çœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é€’å½’ï¼Œä½†æ˜¯æ€§èƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å…·è±¡åŒ–æ¥çœ‹ï¼š æ±‚å¾—f(5) = ï¼Ÿ</p>\n<ul>\n<li>f(5)ä¾èµ– f(4)å’Œf(3)</li>\n<li>f(4)ä¾èµ– f(3)å’Œf(2)</li>\n<li>f(3)ä¾èµ– f(2)å’Œf(1)</li>\n</ul>\n<p>æ˜¾ç„¶ä¸Šé¢çš„è®¡ç®—æœ‰ç€å¤§é‡çš„é‡å¤æ“ä½œï¼Œæ—¢ç„¶æ‰€æœ‰çš„ç»“æœéƒ½æ˜¯åŸºäºf(1)å’Œf(2), é‚£ä¹ˆä»f(1)å’Œf(2)çš„è®¡ç®—å¼€å§‹å°±é¿å…äº†é‡å¤çš„è®¡ç®—ï¼Œä¹Ÿæ˜¯å°±åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œ ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> m = <span class=\"number\">1</span>, m_1 = <span class=\"number\">1</span>, result</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">3</span>; i &lt;= n; i++)&#123;</span><br><span class=\"line\">    result = m + m_1</span><br><span class=\"line\">    m_1 = m</span><br><span class=\"line\">    m = result</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»“æœå’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ä½†æ˜¯æ€§èƒ½å°±ä¼šæœ‰éå¸¸å¤§çš„æå‡äº†</p>\n<h1 id=\"æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\"><a href=\"#æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\" class=\"headerlink\" title=\"æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’\"></a>æ—¢ç„¶ä¸Šé¢æåˆ°äº†é€’å½’æˆ‘ä»¬å°±å†æ¥è¯´è¯´é€’å½’</h1><p><em>é€’å½’ï¼š ç¨‹åºè°ƒç”¨è‡ªèº«çš„ç¼–ç¨‹æŠ€å·§ç§°ä¸ºé€’å½’ï¼ˆrecursionï¼‰</em></p>\n<p>é‚£ä¹ˆä¸Šé¢ <code>return fn(n-1) + fn(n-2)</code> å°±æ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„é€’å½’</p>\n<p>è¿™é‡Œå†å¼•å…¥ä¸€ä¸ªå°¾é€’å½’çš„æ¦‚å¿µï¼šå°±æ˜¯å‡½æ•°åœ¨å°¾éƒ¨è°ƒç”¨è‡ªèº«</p>\n<p>é‚£ä¸‹é¢æ¥ç®€å•è¯´è¯´ä¸ºä»€ä¹ˆä¸Šé¢é€’å½’çš„å†™æ³•æ€§èƒ½ä¼šé‚£ä¹ˆå·®</p>\n<p>è°ƒç”¨æ ˆéšç€nçš„å¢åŠ è€Œçº¿æ€§å¢åŠ å¾ˆå®¹æ˜“é€ æˆå†…å­˜å †æ ˆæº¢å‡ºã€‚è¿™æ˜¯å› ä¸ºè¿™ç§é€’å½’æ“ä½œä¸­ï¼ŒåŒæ—¶ä¿å­˜äº†å¤§é‡çš„æ ˆå¸§ï¼Œè°ƒç”¨æ ˆéå¸¸é•¿ï¼Œæ¶ˆè€—äº†å·¨å¤§çš„å†…å­˜</p>\n<p>å°†ä¸Šé¢æ–¹æ³•æ”¹ç”¨å°¾é€’å½’çš„å†™æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">n, m_1 = <span class=\"number\">1</span>, m = <span class=\"number\">1</span></span>) </span>&#123;  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (n === <span class=\"number\">1</span> || n === <span class=\"number\">2</span>) <span class=\"keyword\">return</span> m</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fn(n - <span class=\"number\">1</span>, m, m + m_1)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ­¤æ—¶fnæ¯æ¬¡é€’å½’ä»…ä»…æ›´æ–°è‡ªå·±çš„è°ƒç”¨æ ˆï¼Œæ€§èƒ½å¾—åˆ°å¤§å¹…æå‡ğŸ‘</p>\n<p>å½“ç„¶æ‰€æœ‰çš„é€’å½’éƒ½å¯ä»¥ç”¨å¾ªç¯æ¥å®ç°ï¼Œä¸å°±é¿å…äº†å †æ ˆæº¢å‡ºçš„å¯èƒ½äº†å— å•Šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</p>\n<h1 id=\"summary\"><a href=\"#summary\" class=\"headerlink\" title=\"summary\"></a>summary</h1><p>dravenï¼šå¥½å¥½çœ‹ å¥½å¥½å­¦</p>"},{"title":"JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼","date":"2019-02-24T14:52:00.000Z","_content":"æŒç»­æ›´æ–°\nJSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä»¥åŠåº”ç”¨åœºæ™¯\n<!-- more -->\n*ä»¥ä¸‹å†…å®¹ä¸ºä¸ªäººç®€å•ç†è§£ï¼Œéƒ¨åˆ†demoç”±ç½‘ä¸Šæ¡ˆä¾‹ç®€å•æ”¹å†™ï¼Œæœ‰é”™è¯¯è¯·åœ¨ä¸‹æ–¹è¯„è®ºæŒ‡å‡ºğŸ˜*\n\n# ä½•è°“è®¾è®¡æ¨¡å¼\n\næ²¡å¿…è¦è¢«é«˜å¤§ä¸Šçš„åè¯æ‰€å“å€’ï¼Œæ—¥å¸¸codingä¸­æˆ–è®¸ä¸€ä¸ªä¸äº†è§£å„ç§è®¾è®¡æ¨¡å¼çš„ç¨‹åºå‘˜å¯èƒ½è‡ªå·±å…¶å®å·²ç»ç”¨åˆ°äº†å¾ˆå¤š\n\næŠ›å¼€å®˜æ–¹çš„å®šä¹‰åœ¨æˆ‘çœ‹æ¥ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ€æƒ³è¢«ç»Ÿä¸€ä¸ºè§„èŒƒï¼ŒæŒ‰ç…§è¿™ä¸ªè§„èŒƒå¯ä»¥å†™å‡ºæ›´ä¼˜é›…å¯æ§äº¦æˆ–æ€§èƒ½æ›´ä½³çš„ä»£ç ï¼Œåƒæ˜¯æ¡†æ¶çš„å•ä½\n\nå®šä¹‰ï¼šåœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆ\n\nè¡¥å……ï¼šå¹¶éæ‰€æœ‰çš„è½¯ä»¶æ¨¡å¼éƒ½æ˜¯è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ç‰¹æŒ‡è½¯ä»¶â€œè®¾è®¡â€å±‚æ¬¡ä¸Šçš„é—®é¢˜ã€‚è¿˜æœ‰å…¶ä»–éè®¾è®¡æ¨¡å¼çš„æ¨¡å¼ï¼Œå¦‚æ¶æ„æ¨¡å¼ã€‚åŒæ—¶ï¼Œç®—æ³•ä¸èƒ½ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºç®—æ³•ä¸»è¦æ˜¯ç”¨æ¥è§£å†³è®¡ç®—ä¸Šçš„é—®é¢˜ï¼Œè€Œéè®¾è®¡ä¸Šçš„é—®é¢˜\n\nè½¯ä»¶è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼Œå¸¸è§„çš„æœ‰23ç§ï¼Œæœ¬æ–‡é’ˆå¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ç§è¿›è¡Œç®€è¦ä»‹ç»\n\n# è®¾è®¡åŸåˆ™\nåœ¨åˆ—ä¸¾å…·ä½“çš„è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆçŸ¥é“è®¾è®¡æ¨¡å¼æœ¬èº«çš„è§„èŒƒæ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯è®¾è®¡åŸåˆ™ï¼Œä¸»è¦ä»¥ä¸‹ä¸‰ç§ï¼š\n- å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼šä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼Œé‚£ä¹ˆåœ¨éœ€æ±‚çš„å˜è¿è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚åº”è¯¥æŠŠå¯¹è±¡æˆ–æ–¹æ³•åˆ’åˆ†æˆè¾ƒå°çš„ç²’åº¦\n\n- æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“ å°½å¯èƒ½å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œåº”å½“å°½é‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¸è¦å‘ç”Ÿç›´æ¥çš„ ç›¸äº’è”ç³»ï¼Œå¯ä»¥è½¬äº¤ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œå¤„ç†\n\n- å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ï¼‰ç­‰åº”è¯¥æ˜¯å¯ä»¥ æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ï¼Œå½“éœ€è¦æ”¹å˜ä¸€ä¸ªç¨‹åºçš„åŠŸèƒ½æˆ–è€…ç»™è¿™ä¸ªç¨‹åºå¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¢åŠ ä»£ç çš„æ–¹å¼ï¼Œå°½é‡é¿å…æ”¹åŠ¨ç¨‹åºçš„æºä»£ç ï¼Œé˜²æ­¢å½±å“åŸç³»ç»Ÿçš„ç¨³å®š\n\n\n\n# ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹\n\n### å®šä¹‰ï¼š\n\nå•ä½“ï¼šä¸€ä¸ªç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´å¹¶å°†ä¸€æ‰¹ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·çš„å¯¹è±¡\n\nå•ä¾‹ï¼šé¡¾åä»…å¯ä»¥å¯ä»¥è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼šåœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ï¼Œåº”ç”¨è¯¥æ¨¡å¼çš„ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹\n*åœ¨javaä¸­å•ä¾‹çš„å®šä¹‰ï¼šä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è‡ªè¡Œå®ä¾‹åŒ–å‘æ•´ä¸ªç³»ç»Ÿæä¾›*\n\n### ä¼˜ç‚¹:\n- å•ä¾‹æ¨¡å¼ä¼šé˜»æ­¢å…¶ä»–å¯¹è±¡å®ä¾‹åŒ–å…¶è‡ªå·±çš„å•ä¾‹å¯¹è±¡çš„å‰¯æœ¬ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½è®¿é—®å”¯ä¸€å®ä¾‹\n- å› ä¸ºç±»æ§åˆ¶äº†å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥ç±»å¯ä»¥çµæ´»æ›´æ”¹å®ä¾‹åŒ–è¿‡ç¨‹\n- å•ä½“å¯ä»¥æ§åˆ¶å±€éƒ¨å˜é‡æ±¡æŸ“\n\n### åº”ç”¨åœºæ™¯ï¼š\n- å¯ä»¥ç”¨å•ä¾‹æ¥åˆ’åˆ†å‘½åç©ºé—´: ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œå¦‚æŸäº›æ•°æ®çš„ç¼“å­˜\n- å€ŸåŠ©å•ä¾‹æ¨¡å¼ï¼Œå¯ä»¥æŠŠä»£ç ç»„ç»‡çš„æ›´ä¸ºä¸€è‡´\n\n#### æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\nç›´æ¥å¯¼å‡ºä¸€ä¸ªæ–¹æ³•å±æ€§é›†åˆçš„å¯¹è±¡\n```js\n// commonjs å¯¼å‡º\nmodule.exports = {\n  getSingleton() {\n    return this \n  }\n}\n```\n#### ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\n```js\nconst Ins1 = (function() {\n  let instance = null\n  // åˆ©ç”¨é—­åŒ…ç‰¹æ€§ä¿è¯å®ä¾‹ç§æœ‰åŒ–\n  return function(opt) {\n    if (instance === null) {\n      instance = this\n    }\n\n    for(let k in opt) {\n      instance[k] = opt[k]\n    }\n\n    return instance\n  }\n})()\n```\næµ‹è¯•ï¼š\n```js\nconst i1 = new Ins1({ name: 'i1' })\n\nconst i2 = new Ins1({ name: 'i2' })\n\nconsole.log(i1 === i2) // true\n\nconsole.log(i1.name) // i2\n```\nè¡¥å……ï¼šåœ¨nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œè‹¥åœ¨æŸä¸ªjsæ–‡ä»¶ä¸­å¯¼å‡ºä¸€ä¸ªç±»ï¼š `class T {} export default new T` ä¹‹ååœ¨å…¶ä»–ä»»ä½•å¤–éƒ¨æ–‡ä»¶å¤šæ¬¡å¼•å…¥å…¶å®éƒ½æ˜¯ä¿è¯äº† T ç±»åªè¢«å®ä¾‹åŒ–äº†ä¸€æ¬¡è€Œä¸ä¼šè¢«å¤šæ¬¡åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºnodeéµå¾ªäº†commonjsçš„è§„èŒƒï¼Œæ‰€æœ‰æ–‡ä»¶æ¨¡å—åœ¨è¢«å¼•ç”¨æ—¶éƒ½ä¼šå…ˆå»æ¨¡å—ç³»ç»Ÿçš„ç¼“å­˜ä¸­æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ç¼“å­˜å¦åˆ™æ‰ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œè€Œè¿™ä¸ªç¼“å­˜å…¶å®ä¹Ÿå°±é™åˆ¶äº†æ¨¡å—å†…è„šæœ¬çš„å¤šæ¬¡åˆå§‹åŒ–\n\n# ç­–ç•¥æ¨¡å¼\n\n### å®šä¹‰ï¼š\nå°±æ˜¯è§£è€¦ï¼Œä½•ä¸ºç­–ç•¥è§£è€¦ï¼š æŒ‡çš„æ˜¯å®šä¹‰ä¸€äº›åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œç›®çš„å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨ä¸ç®—æ³•çš„å®ç°åˆ†ç¦»å¼€æ¥ã€‚è¯´ç™½äº†å°±æ˜¯ä»¥å‰è¦å¾ˆå¤šåˆ¤æ–­çš„å†™æ³•ï¼Œç°åœ¨æŠŠåˆ¤æ–­é‡Œé¢çš„å†…å®¹æŠ½ç¦»å¼€æ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå°çš„ä¸ªä½“ã€‚å¦‚å¤§é‡çš„if elseæˆ–è€…switch caseåˆ¤æ–­å½“éœ€æ±‚æ›´æ”¹æ—¶éœ€è¦æ·»åŠ å’Œæ›´æ”¹åˆ¤æ–­ï¼Œè¿™è¿èƒŒäº†è®¾è®¡æ¨¡å¼çš„å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„åŸåˆ™\n\n### ä¼˜ç‚¹ï¼š\n- å‡å°‘`command c & command v`, æé«˜å¤ç”¨æ€§\n- éµå¾ªå¼€é—­åŸåˆ™ï¼Œç®—æ³•ç‹¬ç«‹æ˜“äºåˆ‡æ¢ã€ç†è§£ã€æ‹“å±•\n\n### åº”ç”¨åœºæ™¯ï¼š\né’ˆå¯¹ä»£ç å¤šç§è¡Œä¸ºè®¾ç½®å¤§é‡çš„æ¡ä»¶åˆ¤æ–­æ—¶å°†æ¯ä¸€ä¸ªè¡Œä¸ºåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªå¯¹è±¡è¢«ç§°ä¸ºä¸€ä¸ªç­–ç•¥ã€‚è®¾ç½®å¤šä¸ªè¿™ç§ç­–ç•¥å¯¹è±¡ï¼Œå¯ä»¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œä¹Ÿæ›´å¥½çš„è¿›è¡Œå•å…ƒæµ‹è¯•\n\n#### æœ€ç®€å•çš„æ‰§è¡Œ\n```js\nfunction closure() {\n  // å®šä¹‰\n  const strategies = {\n      plus10: function(arg) {\n        return arg + 10\n      },\n      plus100: function(arg) {\n        return arg + 100\n      }\n  }\n  // æ‰§è¡Œ\n  return function(plus, base){\n    return strategies[plus](base);\n  }\n}\nconst strategy = closure()\n\nconsole.log(strategy('plus10', 1)) // 11\nconsole.log(strategy('plus100', 1)) // 101\n```\n#### å¯¹æ¯”åˆ†æ\neg.: ä»£ç æƒ…æ™¯ä¸ºè¶…å¸‚ä¿ƒé”€ï¼Œvipä¸º5æŠ˜ï¼Œè€å®¢æˆ·3æŠ˜ï¼Œæ™®é€šé¡¾å®¢æ²¡æŠ˜ï¼Œè®¡ç®—æœ€åéœ€è¦æ”¯ä»˜çš„é‡‘é¢\n\næ„å¤§åˆ©é€»è¾‘:\n\n```js\nfunction context (name, type, price) {\n  if (type === 'vip') {\n    return price * 0.5\n  } else if (type === 'vip') {\n    return price * 0.8\n  } else {\n    return price\n  }\n}\n```\nå¦‚æœtypeç±»å‹éå¸¸å¤šï¼Œå†…éƒ¨é€»è¾‘åˆ†åˆ«ä¹Ÿä¸åªæ˜¯ç®€å•çš„returnä¸€ä¸ªvalï¼Œé‚£å¯¹åç»­çš„ç»´æŠ¤å’Œæµ‹è¯•å°±æ˜¯ç¾éš¾ï¼Œä¸‹é¢æ‹†åˆ†é€»è¾‘ä¸ºç‹¬ç«‹å•å…ƒ:\n``` js\nclass Vip {\n  constructor () {\n    this.discount = 0.5\n  }\n  getPrice (price) {\n    return this.discount * price\n  }\n}\n\nclass Old {\n  constructor () {\n    this.discount = 0.8\n  }\n  getPrice (price) {\n    return this.discount * price\n  }\n}\n\nclass Others {\n  constructor () {\n  }\n  getPrice (price) {\n    return price\n  }\n}\n\nclass Context {\n  constructor () {\n    this.name = ''\n    this.strategy = null\n    this.price = 0\n  }\n  setPrice (name, strategy, price) {\n    this.name = name\n    this.strategy = strategy\n    this.price = price\n  }\n  getPrice () {\n    console.log(this.name, this.strategy.getPrice(this.price), 'å…ƒ')\n    return this.strategy.getPrice(this.price)\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\nconst seller = new Context\nconst vip = new Vip\nconst old = new Old\nconst other = new Others\nseller.setPrice('zs', vip, 1000)\nseller.getPrice()\nseller.setPrice('ls', old, 1000)\nseller.getPrice()\nseller.setPrice('ww', other, 1000)\nseller.getPrice()\n// output:\n// zs 500 å…ƒ\n// ls 800 å…ƒ\n// ww 1000 å…ƒ\n```\næ˜¾ç„¶é€»è¾‘å¤šè€Œå¤æ‚æ—¶å¯ä»¥æå¤§æé«˜ä»£ç å¯è¯»æ€§ä»¥åŠå‡å°‘ç»´æŠ¤æˆæœ¬\n\nè¡¥å……ï¼šä¸Šè¿°ä¸æ–­é‡å¤çš„ä»£ç ç‰‡æ®µçœ‹èµ·æ¥éå¸¸ä¸‘é™‹ï¼Œå…¶å®å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å®ç°æ›´ç®€æ´çš„å†™æ³•ï¼š\n```js\n// å®šä¹‰çˆ¶ç±»\nclass Handler {\n  constructor(discount) {\n    // ä¸ä¼ ä¸ºåŸä»·\n    this.discount = discount || 1\n  }\n\n  getPrice(price) {\n    return this.discount === 1\n      ? price\n      : this.discount * price\n  }\n}\n\n// å£°æ˜å­ç±»\nclass Sub extends Handler {}\n\n// å¯ä»¥è‡ªå®šä¹‰æ›´å¤šä¸åŒçº§åˆ«é¡¾å®¢ä¸åŒéœ€æ±‚\n// class Test extend Handler {\n//   getGifts() {\n//     if (this.discount < 1) {\n//       // èµ é€èµ å“\n//     }\n//   }\n// }\n// const master = new Test(0.1)\n// master.getGifts()\n\n// Contextç±»åŒä¸Šæ–¹ä¾¿ç»Ÿä¸€æ¥å£è¾“å‡º\nclass Context {}\n```\næµ‹è¯•ï¼š\n```js\nconst seller = new Context\nconst vip = new Sub(0.5)\nconst old = new Sub(0.8)\nconst other = new Sub\n\nseller.setPrice('zs', vip, 1000)\nseller.getPrice()\nseller.setPrice('ls', old, 1000)\nseller.getPrice()\nseller.setPrice('ww', other, 1000)\nseller.getPrice()\n\n// output:\n// zs 500 å…ƒ\n// ls 800 å…ƒ\n// ww 1000 å…ƒ\n```\næµ‹è¯•ç»“æœä¸€è‡´\n\n# ä»£ç†æ¨¡å¼\n\n### å®šä¹‰ï¼š\nä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨\nè‘—åçš„ä»£ç†æ¨¡å¼ä¾‹å­ä¸ºå¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰æŒ‡é’ˆå¯¹è±¡\nå¦å¤–ä»£ç†æ¨¡å¼è¿˜å¯åˆ†ä¸ºï¼š\n- è™šæ‹Ÿä»£ç†ï¼šæŠŠä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œå½“å¯¹è±¡åœ¨åˆ›å»ºå‰æˆ–åˆ›å»ºä¸­æ—¶ï¼Œç”±è™šæ‹Ÿä»£ç†æ¥æ‰®æ¼”å¯¹è±¡çš„æ›¿èº«ï¼›å¯¹è±¡åˆ›å»ºåï¼Œä»£ç†å°±ä¼šå°†è¯·æ±‚ç›´æ¥å§”æ‰˜ç»™å¯¹è±¡\n- ä¿æŠ¤ä»£ç†ï¼šç”¨äºæ§åˆ¶ä¸åŒæƒé™çš„å¯¹è±¡å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®\n- ç¼“å­˜ä»£ç†: ç¼“å­˜ä»£ç†å¯ä»¥ä½œä¸ºä¸€äº›å¼€é”€å¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ï¼Œä¸‹æ¬¡è¿ç®—æ—¶ï¼Œå¦‚æœä¼ é€’è¿›æ¥çš„å‚æ•°è·Ÿä¹‹å‰ä¸€è‡´ï¼Œåˆ™å¯ä»¥ç›´æ¥è¿”å›å‰é¢å­˜å‚¨çš„è¿ç®—ç»“æœ\n\n### ä¼˜ç‚¹ï¼š\nç‹¬ç«‹èŒè´£å½’å±ï¼Œä¾¿äºç»´æŠ¤æµ‹è¯•\n\n### åº”ç”¨åœºæ™¯ï¼š\næ¯”å¦‚å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œæ•°æ®ç¼“å­˜ç­‰\n\n#### è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\n```js\nconst imgSet = (() => {\n  let node = new Image\n  document.body.append(node)\n\n  return function(src) {\n    node.src = src\n  }\n})()\n\nconst proxyImg = (() => {\n  let _img = new Image\n\n  _img.onload = function() {\n    setTimeout(imgSet, 2000, this.src)\n  }\n\n  return function(src) {\n    imgSet('https://yphoto.eryufm.cn/upload/assets/jump.gif')\n    _img.src = src\n  }\n})()\n// call\nproxyImg(`https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1551174639&di=90b4757f68c9480f78c132c930c1df10&src=http://desk.fd.zol-img.com.cn/t_s960x600c5/g5/M00/02/02/ChMkJ1bKxkmIObywAArTTfACinwAALHjACDZuIACtNl408.jpg`)\n```\n\n#### ä¿æŠ¤ä»£ç†\nå¯¹è±¡aéœ€è¦ç»™å¯¹è±¡cå‘é€ä¿¡æ¯ï¼Œä¸ºäº†ä¿è¯aå¯¹cæ˜¯ä¸å¯è§ï¼Œå¯ç”¨å¯¹è±¡bä»£ç†è½¬å‘\n```js\n// filter some no use or unneed requestions or data\n// A  ---> B(proxy) ----> C\nconst a = {\n  name: 'a',\n  send (target, info) {\n    target.receive(info)\n  }\n}\nconst c = {\n  name: 'c',\n  receive (target, info) {\n    console.log('c receive ', info, ' from ', target.name)\n  }\n}\nconst b = {\n  name: 'b',\n  receive (info) {\n    if (info) {\n      c.receive(this, info)\n    }\n  }\n}\na.send(b, 'good morning')\na.send(b, '')\na.send(b, 'send again')\n\n// output:\n// c receive good morning from b\n// c receive send again from b\n```\nä¸Šé¢è¡¨ç¤ºä¸€ä¸ªæœ€ç®€å•çš„ä¿æŠ¤ä»£ç†\n\n#### ç¼“å­˜ä»£ç†\né¡¾åæ€ä¹‰å°±æ˜¯ç¼“å­˜ç›¸å…³çš„ä»£ç†\n\næœ‰ä¸€ä¸ªäºŒçº§åˆ«è”åŠ¨çš„æ ‡ç­¾åˆ—è¡¨ï¼Œç¬¬äºŒçº§çš„å„æœ‰è‡ªå·±æ‰€å±çš„å¤šä¸ªæ ‡ç­¾æ ¹æ®ç¬¬ä¸€çº§çš„å‚æ•°æ¥å‘é€æŒ‡å®šè¯·æ±‚æ¥è·å–ï¼Œå¦‚æœæƒ³è¦è¾¾åˆ°ç‚¹å‡»ç¬¬ä¸€çº§åˆ—è¡¨è¿…é€Ÿå±•ç¤ºå‡ºç›¸å…³çš„ç¬¬äºŒçº§æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿç©ºé—²æ—¶é¢„å…ˆå°†æ‰€æœ‰æ ‡ç­¾å…¨éƒ¨è·å–å¹¶ç¼“å­˜\n```js\n// å­˜å‚¨æ‰€æœ‰æ ‡ç­¾\nlet tags\n\nconst sendApiGetTags = index => {\n  // ajax.get('/api', { index })\n}\nlet proxyCache = (async () => {\n  const allTagsCache = {}\n  const number = 5\n  const all = []\n  const params = {}\n\n  for (let index = 0; index < number; index++) {\n    all.push(sendApiGetTags({\n      ...params,\n      index\n    }))\n  }\n  const list = await Promise.all(all)\n\n  list.forEach((res, i) => allTagsCache[i] = res)\n\n  return allTagsCache\n})()\n\nlet setTags = async index => {\n  // ç¼“å­˜ä¸­æœ‰ç›´æ¥æ‹¿\n  if (proxyCache[index]) {\n    tags = proxyCache[index]\n  } else {\n  // ç¼“å­˜ä¸­æ²¡æœ‰åˆ™é‡å‘è¯·æ±‚\n    tags = await sendApiGetTags(index)\n  }\n}\n```\n\n\n\n# å‘å¸ƒè®¢é˜…æ¨¡å¼\n\n### å®šä¹‰ï¼š\nä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè®¢é˜…è€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚\nè‡³äºå‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸æ˜¯åŒä¸€æ ·ä¸œè¥¿ä¸åŒçš„äººå„æœ‰çœ‹æ³•\n\n### ä¼˜ç‚¹ï¼š\nè®¢é˜…è€…å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚å½“æŸç§Actionè¢«è§¦å‘æ—¶å®Œæˆè‡ªå·±çš„è°ƒåº¦\n\n### åº”ç”¨åœºæ™¯ï¼š\nAngularJsçš„å¹¿æ’­ã€vueçš„eventbusç­‰\n\n#### æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\næ„é€ å‘å¸ƒè€…åŸºç±»\n```js\nclass Publisher {\n  constructor () {\n    // è®¢é˜…å‘å¸ƒè€…çš„é˜Ÿåˆ— å­˜å‚¨æ¯ä¸ªè®¢é˜…è€…\n    this.subscribers = []\n  }\n  deliver (data) {\n    // å‘å¸ƒæ¶ˆæ¯ è°ƒç”¨è®¢é˜…è€…çš„å›è°ƒ å‘ŠçŸ¥è®¢é˜…è€…\n    this.subscribers.forEach(fn => fn.shot(data))\n\n    return this\n  }\n}\n```\næ„é€ è®¢é˜…è€…åŸºç±»\n```js\nclass Observer {\n  constructor (call) {\n    // ä¼ å…¥è®¢é˜…å›è°ƒ\n    this.shot = call\n  }\n  subscribe (publisher) {\n    if (!publisher.subscribers.some(v => v.shot === this.shot)) {\n      console.log('è®¢é˜…è¯¥æ¶ˆæ¯')\n      // åˆ¤æ–­å½“å‰è®¢é˜…è€…æ˜¯å¦è®¢é˜…\n      publisher.subscribers.push(this)\n    }\n    return this\n  }\n  unsubscribe (publisher) {\n    // ç§»é™¤å½“å‰è®¢é˜…è€…\n    console.log('å–æ¶ˆè®¢é˜…')\n\n    publisher.subscribers = publisher.subscribers.filter(v => v.shot !== this.shot)\n\n    return this\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\nconst pub = new Publisher\nconst pub2 = new Publisher\nconst obs = new Observer(deliver => console.log(deliver))\n\nobs.subscribe(pub) // è®¢é˜…è¯¥æ¶ˆæ¯\nobs.subscribe(pub2) // è®¢é˜…è¯¥æ¶ˆæ¯\n\npub.deliver('pub deliver first message') // pub deliver first message\npub2.deliver('pub2 deliver first message') // pub2 deliver first message\n\nobs.unsubscribe(pub) // å–æ¶ˆè®¢é˜…\npub.deliver('pub deliver second message') //\n```\n\n# è£…é¥°è€…æ¨¡å¼\n\n### å®šä¹‰ï¼š\nè£…é¥°æ¨¡å¼æŒ‡çš„æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½\n\n### ä¼˜ç‚¹ï¼š\n- è£…é¥°å¯¹è±¡å’ŒçœŸå®å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ã€‚è¿™æ ·å®¢æˆ·ç«¯å¯¹è±¡å°±èƒ½ä»¥å’ŒçœŸå®å¯¹è±¡ç›¸åŒçš„æ–¹å¼å’Œè£…é¥°å¯¹è±¡äº¤äº’\n- è£…é¥°å¯¹è±¡å¯ä»¥åœ¨è½¬å‘è¿™äº›è¯·æ±‚ä»¥å‰æˆ–ä»¥åå¢åŠ ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨è¿è¡Œæ—¶ï¼Œä¸ç”¨ä¿®æ”¹ç»™å®šå¯¹è±¡çš„ç»“æ„å°±å¯ä»¥åœ¨å¤–éƒ¨å¢åŠ é™„åŠ çš„åŠŸèƒ½ã€‚åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°å¯¹ç»™å®šç±»çš„åŠŸèƒ½æ‰©å±•\n\n### åº”ç”¨åœºæ™¯ï¼š\n- éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£\n- éœ€è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤é”€\n- ä¸å¿…æ”¹åŠ¨åŸæœ¬çš„é€»è¾‘é€ æˆä¸å¯çŸ¥é—®é¢˜\n\n#### ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\n\næ™®é€šå‡½æ•°ï¼š\n```js\nfunction fn(msg) {\n  console.log(msg, ' right now')\n}\n\nfn('let go') // lets go right now\n```\næˆ‘ä»¬çŸ¥é“JSä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯åŸºäºçˆ¶ç±» `Function` ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¼šç»§æ‰¿çˆ¶ç±»åŸå‹çš„æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°†å‡½æ•°çš„é’©å­æŒ‚åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šå³å¯ï¼š\n```js\n// æ‰§è¡Œå‰\nFunction.prototype.before = function (call) {\n  const fn = this\n  \n  // è¿”å›ä½“æœ¬èº«ä¹Ÿæ˜¯å‡½æ•°æ‰€ä»¥æ”¯æŒç»§ç»­è°ƒç”¨é’©å­\n  return function () {\n    // è°ƒç”¨é’©å­ï¼ŒåŒæ—¶å‚æ•°ä¼ é€’åˆ°é’©å­å†…\n    call.apply(this, arguments)\n    // è°ƒç”¨è‡ªèº«\n    return fn.apply(this, arguments)\n  }\n}\n// æ‰§è¡Œå\n// å’Œ before åŒç†\nFunction.prototype.after = function (call) {\n  const fn = this\n\n  return function () {\n    const res = fn.apply(this, arguments)\n\n    call.apply(this, arguments)\n\n    // è¿”å›è‡ªèº«çš„è¿”å›å€¼\n    return res\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\n// é‡æ–°åŒ…è£… fn\nfunction fn(msg) {\n  console.log(msg, ' right now')\n}\n\nconst decoratorFn = fn.before(function (msg) {\n  console.log('when we go,', msg)\n}).after(function (msg){\n  console.log('had to go', msg)\n})\n\ndecoratorFn('lets go')\n\n// out put:\n// when we go, right now\n// lets go, right now\n// had to go, right now\n```\n# èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\n\n### å®šä¹‰ï¼š\nå®ƒæ˜¯ä¸€ç§é“¾å¼ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½ä¸¤ç§æ“ä½œï¼Œè¦ä¹ˆå¤„ç†è¯¥è¯·æ±‚åœæ­¢è¯¥è¯·æ±‚æ“ä½œï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†è¯·æ±‚\n\n### ä¼˜ç‚¹ï¼š\nèŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†\n\n### åº”ç”¨åœºæ™¯ï¼š\nJS ä¸­çš„äº‹ä»¶å†’æ³¡ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰å°±æ˜¯ç»å…¸æ¡ˆä¾‹\n\n#### å®ä¾‹åˆ†æ\n\néƒ¨é—¨é‡‡è´­ç‰©å“ä¸åŒé‡‘é¢éœ€è¦èµ°ä¸åŒèŒä½çš„æµç¨‹å®¡æ‰¹ï¼Œé‡‡è´­éƒ¨ç»ç†å¯è‡ªä¸»å†³å®š1wä»¥å†…çš„é‡‡è´­ï¼Œæ€»ç»ç†å¯ä»¥å†³å®š10wä»¥å†…çš„é‡‡è´­ï¼Œè‘£äº‹é•¿å†³å®š100wä»¥å†…çš„é‡‡è´­\nä¸‹é¢åˆ†åˆ«æŠ½è±¡å¤„ç†è€…æ„é€ åŸºç±»\n\nè´£ä»»é“¾è°ƒåº¦ä¸­å¿ƒï¼š\n```js\nclass Handler {\n  constructor() {\n    this.next = null\n  }\n  setNext(_handler) {\n    this.next = _handler\n  }\n  handleRequest(money) {}\n}\n\n\n```\n\né‡‡è´­éƒ¨ç»ç†ï¼š\n```js\nclass CGBHandler extends Handler {\n  handleRequest(money) {\n    // 1w\n    if (money < 10000){\n      console.log('1wä»¥å†…ï¼ŒåŒæ„')\n    } else {\n      console.log('é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­')\n      if (this.next) {\n        this.next.handleRequest(money)\n      }\n    }\n  }\n}\n```\n\næ€»ç»ç†ï¼š\n```js\nclass ZJLHandler extends Handler {\n  handleRequest(money) {\n    // 10w\n    if (money < 100000){\n      console.log('10wä»¥å†…ï¼ŒåŒæ„')\n    } else {\n      console.log('é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­')\n      if (this.next) {\n        this.next.handleRequest(money)\n      }\n    }\n  }\n}\n```\n\nè‘£äº‹é•¿ï¼š\n```js\nclass DSZHandler extends Handler {\n  handleRequest(money) {\n    // 100w\n    if (money >= 100000){\n      console.log('10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†')\n      //å¤„ç†å…¶ä»–é€»è¾‘\n    } \n  }\n}\n```\n\nå°è£…å®¢æˆ·ç«¯æ¥å£ï¼š\n```js\nconst dispatch = (function client() {\n  const cgb = new CGBHandler()\n  const zjl = new ZJLHandler()\n  const dsz = new DSZHandler()\n\n  cgb.setNext(zjl)\n  zjl.setNext(dsz)\n\n  return cgb.handleRequest.bind(cgb)\n})()\n```\næµ‹è¯•ï¼š\n```js\n\ndispath(800000)\n// output:\n// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­\n// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­\n// 10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†\n\ndispath(7000)\n// output:\n// 1wä»¥å†…ï¼ŒåŒæ„\n\n```\nè¡¥å……ï¼š\n- çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚è¯·æ±‚åœ¨è¿™äº›å¯¹è±¡é“¾ä¸­å¿…é¡»è¢«å¤„ç†ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†å¯¹è±¡ï¼Œè¦ä¹ˆåªå¤„ç†è¯·æ±‚ï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘ç»™ä¸‹ä¸ªèŠ‚ç‚¹å¯¹è±¡å¤„ç†\n\n- ä¸çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚åœ¨è´£ä»»é“¾é‡Œä¸ä¸€å®šä¼šæœ‰å¤„ç†ç»“æ„ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œå³å¯ä»¥å¤„ç†éƒ¨åˆ†è¯·æ±‚ï¼Œå¹¶æŠŠè¯·æ±‚å†è½¬å‘ä¸‹ä¸ªèŠ‚ç‚¹å¤„ç†\n\n.\n.\n.\n.\n.\n.\næœªå®Œå¾…ç»­...ğŸ‘\n","source":"_posts/writeSomething/jsDesignPattern.md","raw":"---\ntitle: JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼\ntags:\n  - è®¾è®¡æ¨¡å¼\n  - ç®—æ³•\ndate: 2019-02-24 22:52:00\ncategories: ç®—æ³•\n---\næŒç»­æ›´æ–°\nJSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä»¥åŠåº”ç”¨åœºæ™¯\n<!-- more -->\n*ä»¥ä¸‹å†…å®¹ä¸ºä¸ªäººç®€å•ç†è§£ï¼Œéƒ¨åˆ†demoç”±ç½‘ä¸Šæ¡ˆä¾‹ç®€å•æ”¹å†™ï¼Œæœ‰é”™è¯¯è¯·åœ¨ä¸‹æ–¹è¯„è®ºæŒ‡å‡ºğŸ˜*\n\n# ä½•è°“è®¾è®¡æ¨¡å¼\n\næ²¡å¿…è¦è¢«é«˜å¤§ä¸Šçš„åè¯æ‰€å“å€’ï¼Œæ—¥å¸¸codingä¸­æˆ–è®¸ä¸€ä¸ªä¸äº†è§£å„ç§è®¾è®¡æ¨¡å¼çš„ç¨‹åºå‘˜å¯èƒ½è‡ªå·±å…¶å®å·²ç»ç”¨åˆ°äº†å¾ˆå¤š\n\næŠ›å¼€å®˜æ–¹çš„å®šä¹‰åœ¨æˆ‘çœ‹æ¥ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ€æƒ³è¢«ç»Ÿä¸€ä¸ºè§„èŒƒï¼ŒæŒ‰ç…§è¿™ä¸ªè§„èŒƒå¯ä»¥å†™å‡ºæ›´ä¼˜é›…å¯æ§äº¦æˆ–æ€§èƒ½æ›´ä½³çš„ä»£ç ï¼Œåƒæ˜¯æ¡†æ¶çš„å•ä½\n\nå®šä¹‰ï¼šåœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆ\n\nè¡¥å……ï¼šå¹¶éæ‰€æœ‰çš„è½¯ä»¶æ¨¡å¼éƒ½æ˜¯è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ç‰¹æŒ‡è½¯ä»¶â€œè®¾è®¡â€å±‚æ¬¡ä¸Šçš„é—®é¢˜ã€‚è¿˜æœ‰å…¶ä»–éè®¾è®¡æ¨¡å¼çš„æ¨¡å¼ï¼Œå¦‚æ¶æ„æ¨¡å¼ã€‚åŒæ—¶ï¼Œç®—æ³•ä¸èƒ½ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºç®—æ³•ä¸»è¦æ˜¯ç”¨æ¥è§£å†³è®¡ç®—ä¸Šçš„é—®é¢˜ï¼Œè€Œéè®¾è®¡ä¸Šçš„é—®é¢˜\n\nè½¯ä»¶è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼Œå¸¸è§„çš„æœ‰23ç§ï¼Œæœ¬æ–‡é’ˆå¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ç§è¿›è¡Œç®€è¦ä»‹ç»\n\n# è®¾è®¡åŸåˆ™\nåœ¨åˆ—ä¸¾å…·ä½“çš„è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆçŸ¥é“è®¾è®¡æ¨¡å¼æœ¬èº«çš„è§„èŒƒæ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯è®¾è®¡åŸåˆ™ï¼Œä¸»è¦ä»¥ä¸‹ä¸‰ç§ï¼š\n- å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼šä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼Œé‚£ä¹ˆåœ¨éœ€æ±‚çš„å˜è¿è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚åº”è¯¥æŠŠå¯¹è±¡æˆ–æ–¹æ³•åˆ’åˆ†æˆè¾ƒå°çš„ç²’åº¦\n\n- æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“ å°½å¯èƒ½å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œåº”å½“å°½é‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¸è¦å‘ç”Ÿç›´æ¥çš„ ç›¸äº’è”ç³»ï¼Œå¯ä»¥è½¬äº¤ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œå¤„ç†\n\n- å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ï¼‰ç­‰åº”è¯¥æ˜¯å¯ä»¥ æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ï¼Œå½“éœ€è¦æ”¹å˜ä¸€ä¸ªç¨‹åºçš„åŠŸèƒ½æˆ–è€…ç»™è¿™ä¸ªç¨‹åºå¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¢åŠ ä»£ç çš„æ–¹å¼ï¼Œå°½é‡é¿å…æ”¹åŠ¨ç¨‹åºçš„æºä»£ç ï¼Œé˜²æ­¢å½±å“åŸç³»ç»Ÿçš„ç¨³å®š\n\n\n\n# ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹\n\n### å®šä¹‰ï¼š\n\nå•ä½“ï¼šä¸€ä¸ªç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´å¹¶å°†ä¸€æ‰¹ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·çš„å¯¹è±¡\n\nå•ä¾‹ï¼šé¡¾åä»…å¯ä»¥å¯ä»¥è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼šåœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ï¼Œåº”ç”¨è¯¥æ¨¡å¼çš„ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹\n*åœ¨javaä¸­å•ä¾‹çš„å®šä¹‰ï¼šä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è‡ªè¡Œå®ä¾‹åŒ–å‘æ•´ä¸ªç³»ç»Ÿæä¾›*\n\n### ä¼˜ç‚¹:\n- å•ä¾‹æ¨¡å¼ä¼šé˜»æ­¢å…¶ä»–å¯¹è±¡å®ä¾‹åŒ–å…¶è‡ªå·±çš„å•ä¾‹å¯¹è±¡çš„å‰¯æœ¬ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½è®¿é—®å”¯ä¸€å®ä¾‹\n- å› ä¸ºç±»æ§åˆ¶äº†å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥ç±»å¯ä»¥çµæ´»æ›´æ”¹å®ä¾‹åŒ–è¿‡ç¨‹\n- å•ä½“å¯ä»¥æ§åˆ¶å±€éƒ¨å˜é‡æ±¡æŸ“\n\n### åº”ç”¨åœºæ™¯ï¼š\n- å¯ä»¥ç”¨å•ä¾‹æ¥åˆ’åˆ†å‘½åç©ºé—´: ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œå¦‚æŸäº›æ•°æ®çš„ç¼“å­˜\n- å€ŸåŠ©å•ä¾‹æ¨¡å¼ï¼Œå¯ä»¥æŠŠä»£ç ç»„ç»‡çš„æ›´ä¸ºä¸€è‡´\n\n#### æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\nç›´æ¥å¯¼å‡ºä¸€ä¸ªæ–¹æ³•å±æ€§é›†åˆçš„å¯¹è±¡\n```js\n// commonjs å¯¼å‡º\nmodule.exports = {\n  getSingleton() {\n    return this \n  }\n}\n```\n#### ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\n```js\nconst Ins1 = (function() {\n  let instance = null\n  // åˆ©ç”¨é—­åŒ…ç‰¹æ€§ä¿è¯å®ä¾‹ç§æœ‰åŒ–\n  return function(opt) {\n    if (instance === null) {\n      instance = this\n    }\n\n    for(let k in opt) {\n      instance[k] = opt[k]\n    }\n\n    return instance\n  }\n})()\n```\næµ‹è¯•ï¼š\n```js\nconst i1 = new Ins1({ name: 'i1' })\n\nconst i2 = new Ins1({ name: 'i2' })\n\nconsole.log(i1 === i2) // true\n\nconsole.log(i1.name) // i2\n```\nè¡¥å……ï¼šåœ¨nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œè‹¥åœ¨æŸä¸ªjsæ–‡ä»¶ä¸­å¯¼å‡ºä¸€ä¸ªç±»ï¼š `class T {} export default new T` ä¹‹ååœ¨å…¶ä»–ä»»ä½•å¤–éƒ¨æ–‡ä»¶å¤šæ¬¡å¼•å…¥å…¶å®éƒ½æ˜¯ä¿è¯äº† T ç±»åªè¢«å®ä¾‹åŒ–äº†ä¸€æ¬¡è€Œä¸ä¼šè¢«å¤šæ¬¡åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºnodeéµå¾ªäº†commonjsçš„è§„èŒƒï¼Œæ‰€æœ‰æ–‡ä»¶æ¨¡å—åœ¨è¢«å¼•ç”¨æ—¶éƒ½ä¼šå…ˆå»æ¨¡å—ç³»ç»Ÿçš„ç¼“å­˜ä¸­æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ç¼“å­˜å¦åˆ™æ‰ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œè€Œè¿™ä¸ªç¼“å­˜å…¶å®ä¹Ÿå°±é™åˆ¶äº†æ¨¡å—å†…è„šæœ¬çš„å¤šæ¬¡åˆå§‹åŒ–\n\n# ç­–ç•¥æ¨¡å¼\n\n### å®šä¹‰ï¼š\nå°±æ˜¯è§£è€¦ï¼Œä½•ä¸ºç­–ç•¥è§£è€¦ï¼š æŒ‡çš„æ˜¯å®šä¹‰ä¸€äº›åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œç›®çš„å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨ä¸ç®—æ³•çš„å®ç°åˆ†ç¦»å¼€æ¥ã€‚è¯´ç™½äº†å°±æ˜¯ä»¥å‰è¦å¾ˆå¤šåˆ¤æ–­çš„å†™æ³•ï¼Œç°åœ¨æŠŠåˆ¤æ–­é‡Œé¢çš„å†…å®¹æŠ½ç¦»å¼€æ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå°çš„ä¸ªä½“ã€‚å¦‚å¤§é‡çš„if elseæˆ–è€…switch caseåˆ¤æ–­å½“éœ€æ±‚æ›´æ”¹æ—¶éœ€è¦æ·»åŠ å’Œæ›´æ”¹åˆ¤æ–­ï¼Œè¿™è¿èƒŒäº†è®¾è®¡æ¨¡å¼çš„å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„åŸåˆ™\n\n### ä¼˜ç‚¹ï¼š\n- å‡å°‘`command c & command v`, æé«˜å¤ç”¨æ€§\n- éµå¾ªå¼€é—­åŸåˆ™ï¼Œç®—æ³•ç‹¬ç«‹æ˜“äºåˆ‡æ¢ã€ç†è§£ã€æ‹“å±•\n\n### åº”ç”¨åœºæ™¯ï¼š\né’ˆå¯¹ä»£ç å¤šç§è¡Œä¸ºè®¾ç½®å¤§é‡çš„æ¡ä»¶åˆ¤æ–­æ—¶å°†æ¯ä¸€ä¸ªè¡Œä¸ºåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªå¯¹è±¡è¢«ç§°ä¸ºä¸€ä¸ªç­–ç•¥ã€‚è®¾ç½®å¤šä¸ªè¿™ç§ç­–ç•¥å¯¹è±¡ï¼Œå¯ä»¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œä¹Ÿæ›´å¥½çš„è¿›è¡Œå•å…ƒæµ‹è¯•\n\n#### æœ€ç®€å•çš„æ‰§è¡Œ\n```js\nfunction closure() {\n  // å®šä¹‰\n  const strategies = {\n      plus10: function(arg) {\n        return arg + 10\n      },\n      plus100: function(arg) {\n        return arg + 100\n      }\n  }\n  // æ‰§è¡Œ\n  return function(plus, base){\n    return strategies[plus](base);\n  }\n}\nconst strategy = closure()\n\nconsole.log(strategy('plus10', 1)) // 11\nconsole.log(strategy('plus100', 1)) // 101\n```\n#### å¯¹æ¯”åˆ†æ\neg.: ä»£ç æƒ…æ™¯ä¸ºè¶…å¸‚ä¿ƒé”€ï¼Œvipä¸º5æŠ˜ï¼Œè€å®¢æˆ·3æŠ˜ï¼Œæ™®é€šé¡¾å®¢æ²¡æŠ˜ï¼Œè®¡ç®—æœ€åéœ€è¦æ”¯ä»˜çš„é‡‘é¢\n\næ„å¤§åˆ©é€»è¾‘:\n\n```js\nfunction context (name, type, price) {\n  if (type === 'vip') {\n    return price * 0.5\n  } else if (type === 'vip') {\n    return price * 0.8\n  } else {\n    return price\n  }\n}\n```\nå¦‚æœtypeç±»å‹éå¸¸å¤šï¼Œå†…éƒ¨é€»è¾‘åˆ†åˆ«ä¹Ÿä¸åªæ˜¯ç®€å•çš„returnä¸€ä¸ªvalï¼Œé‚£å¯¹åç»­çš„ç»´æŠ¤å’Œæµ‹è¯•å°±æ˜¯ç¾éš¾ï¼Œä¸‹é¢æ‹†åˆ†é€»è¾‘ä¸ºç‹¬ç«‹å•å…ƒ:\n``` js\nclass Vip {\n  constructor () {\n    this.discount = 0.5\n  }\n  getPrice (price) {\n    return this.discount * price\n  }\n}\n\nclass Old {\n  constructor () {\n    this.discount = 0.8\n  }\n  getPrice (price) {\n    return this.discount * price\n  }\n}\n\nclass Others {\n  constructor () {\n  }\n  getPrice (price) {\n    return price\n  }\n}\n\nclass Context {\n  constructor () {\n    this.name = ''\n    this.strategy = null\n    this.price = 0\n  }\n  setPrice (name, strategy, price) {\n    this.name = name\n    this.strategy = strategy\n    this.price = price\n  }\n  getPrice () {\n    console.log(this.name, this.strategy.getPrice(this.price), 'å…ƒ')\n    return this.strategy.getPrice(this.price)\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\nconst seller = new Context\nconst vip = new Vip\nconst old = new Old\nconst other = new Others\nseller.setPrice('zs', vip, 1000)\nseller.getPrice()\nseller.setPrice('ls', old, 1000)\nseller.getPrice()\nseller.setPrice('ww', other, 1000)\nseller.getPrice()\n// output:\n// zs 500 å…ƒ\n// ls 800 å…ƒ\n// ww 1000 å…ƒ\n```\næ˜¾ç„¶é€»è¾‘å¤šè€Œå¤æ‚æ—¶å¯ä»¥æå¤§æé«˜ä»£ç å¯è¯»æ€§ä»¥åŠå‡å°‘ç»´æŠ¤æˆæœ¬\n\nè¡¥å……ï¼šä¸Šè¿°ä¸æ–­é‡å¤çš„ä»£ç ç‰‡æ®µçœ‹èµ·æ¥éå¸¸ä¸‘é™‹ï¼Œå…¶å®å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å®ç°æ›´ç®€æ´çš„å†™æ³•ï¼š\n```js\n// å®šä¹‰çˆ¶ç±»\nclass Handler {\n  constructor(discount) {\n    // ä¸ä¼ ä¸ºåŸä»·\n    this.discount = discount || 1\n  }\n\n  getPrice(price) {\n    return this.discount === 1\n      ? price\n      : this.discount * price\n  }\n}\n\n// å£°æ˜å­ç±»\nclass Sub extends Handler {}\n\n// å¯ä»¥è‡ªå®šä¹‰æ›´å¤šä¸åŒçº§åˆ«é¡¾å®¢ä¸åŒéœ€æ±‚\n// class Test extend Handler {\n//   getGifts() {\n//     if (this.discount < 1) {\n//       // èµ é€èµ å“\n//     }\n//   }\n// }\n// const master = new Test(0.1)\n// master.getGifts()\n\n// Contextç±»åŒä¸Šæ–¹ä¾¿ç»Ÿä¸€æ¥å£è¾“å‡º\nclass Context {}\n```\næµ‹è¯•ï¼š\n```js\nconst seller = new Context\nconst vip = new Sub(0.5)\nconst old = new Sub(0.8)\nconst other = new Sub\n\nseller.setPrice('zs', vip, 1000)\nseller.getPrice()\nseller.setPrice('ls', old, 1000)\nseller.getPrice()\nseller.setPrice('ww', other, 1000)\nseller.getPrice()\n\n// output:\n// zs 500 å…ƒ\n// ls 800 å…ƒ\n// ww 1000 å…ƒ\n```\næµ‹è¯•ç»“æœä¸€è‡´\n\n# ä»£ç†æ¨¡å¼\n\n### å®šä¹‰ï¼š\nä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨\nè‘—åçš„ä»£ç†æ¨¡å¼ä¾‹å­ä¸ºå¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰æŒ‡é’ˆå¯¹è±¡\nå¦å¤–ä»£ç†æ¨¡å¼è¿˜å¯åˆ†ä¸ºï¼š\n- è™šæ‹Ÿä»£ç†ï¼šæŠŠä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œå½“å¯¹è±¡åœ¨åˆ›å»ºå‰æˆ–åˆ›å»ºä¸­æ—¶ï¼Œç”±è™šæ‹Ÿä»£ç†æ¥æ‰®æ¼”å¯¹è±¡çš„æ›¿èº«ï¼›å¯¹è±¡åˆ›å»ºåï¼Œä»£ç†å°±ä¼šå°†è¯·æ±‚ç›´æ¥å§”æ‰˜ç»™å¯¹è±¡\n- ä¿æŠ¤ä»£ç†ï¼šç”¨äºæ§åˆ¶ä¸åŒæƒé™çš„å¯¹è±¡å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®\n- ç¼“å­˜ä»£ç†: ç¼“å­˜ä»£ç†å¯ä»¥ä½œä¸ºä¸€äº›å¼€é”€å¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ï¼Œä¸‹æ¬¡è¿ç®—æ—¶ï¼Œå¦‚æœä¼ é€’è¿›æ¥çš„å‚æ•°è·Ÿä¹‹å‰ä¸€è‡´ï¼Œåˆ™å¯ä»¥ç›´æ¥è¿”å›å‰é¢å­˜å‚¨çš„è¿ç®—ç»“æœ\n\n### ä¼˜ç‚¹ï¼š\nç‹¬ç«‹èŒè´£å½’å±ï¼Œä¾¿äºç»´æŠ¤æµ‹è¯•\n\n### åº”ç”¨åœºæ™¯ï¼š\næ¯”å¦‚å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œæ•°æ®ç¼“å­˜ç­‰\n\n#### è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\n```js\nconst imgSet = (() => {\n  let node = new Image\n  document.body.append(node)\n\n  return function(src) {\n    node.src = src\n  }\n})()\n\nconst proxyImg = (() => {\n  let _img = new Image\n\n  _img.onload = function() {\n    setTimeout(imgSet, 2000, this.src)\n  }\n\n  return function(src) {\n    imgSet('https://yphoto.eryufm.cn/upload/assets/jump.gif')\n    _img.src = src\n  }\n})()\n// call\nproxyImg(`https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1551174639&di=90b4757f68c9480f78c132c930c1df10&src=http://desk.fd.zol-img.com.cn/t_s960x600c5/g5/M00/02/02/ChMkJ1bKxkmIObywAArTTfACinwAALHjACDZuIACtNl408.jpg`)\n```\n\n#### ä¿æŠ¤ä»£ç†\nå¯¹è±¡aéœ€è¦ç»™å¯¹è±¡cå‘é€ä¿¡æ¯ï¼Œä¸ºäº†ä¿è¯aå¯¹cæ˜¯ä¸å¯è§ï¼Œå¯ç”¨å¯¹è±¡bä»£ç†è½¬å‘\n```js\n// filter some no use or unneed requestions or data\n// A  ---> B(proxy) ----> C\nconst a = {\n  name: 'a',\n  send (target, info) {\n    target.receive(info)\n  }\n}\nconst c = {\n  name: 'c',\n  receive (target, info) {\n    console.log('c receive ', info, ' from ', target.name)\n  }\n}\nconst b = {\n  name: 'b',\n  receive (info) {\n    if (info) {\n      c.receive(this, info)\n    }\n  }\n}\na.send(b, 'good morning')\na.send(b, '')\na.send(b, 'send again')\n\n// output:\n// c receive good morning from b\n// c receive send again from b\n```\nä¸Šé¢è¡¨ç¤ºä¸€ä¸ªæœ€ç®€å•çš„ä¿æŠ¤ä»£ç†\n\n#### ç¼“å­˜ä»£ç†\né¡¾åæ€ä¹‰å°±æ˜¯ç¼“å­˜ç›¸å…³çš„ä»£ç†\n\næœ‰ä¸€ä¸ªäºŒçº§åˆ«è”åŠ¨çš„æ ‡ç­¾åˆ—è¡¨ï¼Œç¬¬äºŒçº§çš„å„æœ‰è‡ªå·±æ‰€å±çš„å¤šä¸ªæ ‡ç­¾æ ¹æ®ç¬¬ä¸€çº§çš„å‚æ•°æ¥å‘é€æŒ‡å®šè¯·æ±‚æ¥è·å–ï¼Œå¦‚æœæƒ³è¦è¾¾åˆ°ç‚¹å‡»ç¬¬ä¸€çº§åˆ—è¡¨è¿…é€Ÿå±•ç¤ºå‡ºç›¸å…³çš„ç¬¬äºŒçº§æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿç©ºé—²æ—¶é¢„å…ˆå°†æ‰€æœ‰æ ‡ç­¾å…¨éƒ¨è·å–å¹¶ç¼“å­˜\n```js\n// å­˜å‚¨æ‰€æœ‰æ ‡ç­¾\nlet tags\n\nconst sendApiGetTags = index => {\n  // ajax.get('/api', { index })\n}\nlet proxyCache = (async () => {\n  const allTagsCache = {}\n  const number = 5\n  const all = []\n  const params = {}\n\n  for (let index = 0; index < number; index++) {\n    all.push(sendApiGetTags({\n      ...params,\n      index\n    }))\n  }\n  const list = await Promise.all(all)\n\n  list.forEach((res, i) => allTagsCache[i] = res)\n\n  return allTagsCache\n})()\n\nlet setTags = async index => {\n  // ç¼“å­˜ä¸­æœ‰ç›´æ¥æ‹¿\n  if (proxyCache[index]) {\n    tags = proxyCache[index]\n  } else {\n  // ç¼“å­˜ä¸­æ²¡æœ‰åˆ™é‡å‘è¯·æ±‚\n    tags = await sendApiGetTags(index)\n  }\n}\n```\n\n\n\n# å‘å¸ƒè®¢é˜…æ¨¡å¼\n\n### å®šä¹‰ï¼š\nä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè®¢é˜…è€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚\nè‡³äºå‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸æ˜¯åŒä¸€æ ·ä¸œè¥¿ä¸åŒçš„äººå„æœ‰çœ‹æ³•\n\n### ä¼˜ç‚¹ï¼š\nè®¢é˜…è€…å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚å½“æŸç§Actionè¢«è§¦å‘æ—¶å®Œæˆè‡ªå·±çš„è°ƒåº¦\n\n### åº”ç”¨åœºæ™¯ï¼š\nAngularJsçš„å¹¿æ’­ã€vueçš„eventbusç­‰\n\n#### æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\næ„é€ å‘å¸ƒè€…åŸºç±»\n```js\nclass Publisher {\n  constructor () {\n    // è®¢é˜…å‘å¸ƒè€…çš„é˜Ÿåˆ— å­˜å‚¨æ¯ä¸ªè®¢é˜…è€…\n    this.subscribers = []\n  }\n  deliver (data) {\n    // å‘å¸ƒæ¶ˆæ¯ è°ƒç”¨è®¢é˜…è€…çš„å›è°ƒ å‘ŠçŸ¥è®¢é˜…è€…\n    this.subscribers.forEach(fn => fn.shot(data))\n\n    return this\n  }\n}\n```\næ„é€ è®¢é˜…è€…åŸºç±»\n```js\nclass Observer {\n  constructor (call) {\n    // ä¼ å…¥è®¢é˜…å›è°ƒ\n    this.shot = call\n  }\n  subscribe (publisher) {\n    if (!publisher.subscribers.some(v => v.shot === this.shot)) {\n      console.log('è®¢é˜…è¯¥æ¶ˆæ¯')\n      // åˆ¤æ–­å½“å‰è®¢é˜…è€…æ˜¯å¦è®¢é˜…\n      publisher.subscribers.push(this)\n    }\n    return this\n  }\n  unsubscribe (publisher) {\n    // ç§»é™¤å½“å‰è®¢é˜…è€…\n    console.log('å–æ¶ˆè®¢é˜…')\n\n    publisher.subscribers = publisher.subscribers.filter(v => v.shot !== this.shot)\n\n    return this\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\nconst pub = new Publisher\nconst pub2 = new Publisher\nconst obs = new Observer(deliver => console.log(deliver))\n\nobs.subscribe(pub) // è®¢é˜…è¯¥æ¶ˆæ¯\nobs.subscribe(pub2) // è®¢é˜…è¯¥æ¶ˆæ¯\n\npub.deliver('pub deliver first message') // pub deliver first message\npub2.deliver('pub2 deliver first message') // pub2 deliver first message\n\nobs.unsubscribe(pub) // å–æ¶ˆè®¢é˜…\npub.deliver('pub deliver second message') //\n```\n\n# è£…é¥°è€…æ¨¡å¼\n\n### å®šä¹‰ï¼š\nè£…é¥°æ¨¡å¼æŒ‡çš„æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½\n\n### ä¼˜ç‚¹ï¼š\n- è£…é¥°å¯¹è±¡å’ŒçœŸå®å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ã€‚è¿™æ ·å®¢æˆ·ç«¯å¯¹è±¡å°±èƒ½ä»¥å’ŒçœŸå®å¯¹è±¡ç›¸åŒçš„æ–¹å¼å’Œè£…é¥°å¯¹è±¡äº¤äº’\n- è£…é¥°å¯¹è±¡å¯ä»¥åœ¨è½¬å‘è¿™äº›è¯·æ±‚ä»¥å‰æˆ–ä»¥åå¢åŠ ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨è¿è¡Œæ—¶ï¼Œä¸ç”¨ä¿®æ”¹ç»™å®šå¯¹è±¡çš„ç»“æ„å°±å¯ä»¥åœ¨å¤–éƒ¨å¢åŠ é™„åŠ çš„åŠŸèƒ½ã€‚åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°å¯¹ç»™å®šç±»çš„åŠŸèƒ½æ‰©å±•\n\n### åº”ç”¨åœºæ™¯ï¼š\n- éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£\n- éœ€è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤é”€\n- ä¸å¿…æ”¹åŠ¨åŸæœ¬çš„é€»è¾‘é€ æˆä¸å¯çŸ¥é—®é¢˜\n\n#### ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\n\næ™®é€šå‡½æ•°ï¼š\n```js\nfunction fn(msg) {\n  console.log(msg, ' right now')\n}\n\nfn('let go') // lets go right now\n```\næˆ‘ä»¬çŸ¥é“JSä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯åŸºäºçˆ¶ç±» `Function` ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¼šç»§æ‰¿çˆ¶ç±»åŸå‹çš„æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°†å‡½æ•°çš„é’©å­æŒ‚åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šå³å¯ï¼š\n```js\n// æ‰§è¡Œå‰\nFunction.prototype.before = function (call) {\n  const fn = this\n  \n  // è¿”å›ä½“æœ¬èº«ä¹Ÿæ˜¯å‡½æ•°æ‰€ä»¥æ”¯æŒç»§ç»­è°ƒç”¨é’©å­\n  return function () {\n    // è°ƒç”¨é’©å­ï¼ŒåŒæ—¶å‚æ•°ä¼ é€’åˆ°é’©å­å†…\n    call.apply(this, arguments)\n    // è°ƒç”¨è‡ªèº«\n    return fn.apply(this, arguments)\n  }\n}\n// æ‰§è¡Œå\n// å’Œ before åŒç†\nFunction.prototype.after = function (call) {\n  const fn = this\n\n  return function () {\n    const res = fn.apply(this, arguments)\n\n    call.apply(this, arguments)\n\n    // è¿”å›è‡ªèº«çš„è¿”å›å€¼\n    return res\n  }\n}\n```\næµ‹è¯•ï¼š\n```js\n// é‡æ–°åŒ…è£… fn\nfunction fn(msg) {\n  console.log(msg, ' right now')\n}\n\nconst decoratorFn = fn.before(function (msg) {\n  console.log('when we go,', msg)\n}).after(function (msg){\n  console.log('had to go', msg)\n})\n\ndecoratorFn('lets go')\n\n// out put:\n// when we go, right now\n// lets go, right now\n// had to go, right now\n```\n# èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\n\n### å®šä¹‰ï¼š\nå®ƒæ˜¯ä¸€ç§é“¾å¼ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½ä¸¤ç§æ“ä½œï¼Œè¦ä¹ˆå¤„ç†è¯¥è¯·æ±‚åœæ­¢è¯¥è¯·æ±‚æ“ä½œï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†è¯·æ±‚\n\n### ä¼˜ç‚¹ï¼š\nèŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†\n\n### åº”ç”¨åœºæ™¯ï¼š\nJS ä¸­çš„äº‹ä»¶å†’æ³¡ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰å°±æ˜¯ç»å…¸æ¡ˆä¾‹\n\n#### å®ä¾‹åˆ†æ\n\néƒ¨é—¨é‡‡è´­ç‰©å“ä¸åŒé‡‘é¢éœ€è¦èµ°ä¸åŒèŒä½çš„æµç¨‹å®¡æ‰¹ï¼Œé‡‡è´­éƒ¨ç»ç†å¯è‡ªä¸»å†³å®š1wä»¥å†…çš„é‡‡è´­ï¼Œæ€»ç»ç†å¯ä»¥å†³å®š10wä»¥å†…çš„é‡‡è´­ï¼Œè‘£äº‹é•¿å†³å®š100wä»¥å†…çš„é‡‡è´­\nä¸‹é¢åˆ†åˆ«æŠ½è±¡å¤„ç†è€…æ„é€ åŸºç±»\n\nè´£ä»»é“¾è°ƒåº¦ä¸­å¿ƒï¼š\n```js\nclass Handler {\n  constructor() {\n    this.next = null\n  }\n  setNext(_handler) {\n    this.next = _handler\n  }\n  handleRequest(money) {}\n}\n\n\n```\n\né‡‡è´­éƒ¨ç»ç†ï¼š\n```js\nclass CGBHandler extends Handler {\n  handleRequest(money) {\n    // 1w\n    if (money < 10000){\n      console.log('1wä»¥å†…ï¼ŒåŒæ„')\n    } else {\n      console.log('é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­')\n      if (this.next) {\n        this.next.handleRequest(money)\n      }\n    }\n  }\n}\n```\n\næ€»ç»ç†ï¼š\n```js\nclass ZJLHandler extends Handler {\n  handleRequest(money) {\n    // 10w\n    if (money < 100000){\n      console.log('10wä»¥å†…ï¼ŒåŒæ„')\n    } else {\n      console.log('é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­')\n      if (this.next) {\n        this.next.handleRequest(money)\n      }\n    }\n  }\n}\n```\n\nè‘£äº‹é•¿ï¼š\n```js\nclass DSZHandler extends Handler {\n  handleRequest(money) {\n    // 100w\n    if (money >= 100000){\n      console.log('10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†')\n      //å¤„ç†å…¶ä»–é€»è¾‘\n    } \n  }\n}\n```\n\nå°è£…å®¢æˆ·ç«¯æ¥å£ï¼š\n```js\nconst dispatch = (function client() {\n  const cgb = new CGBHandler()\n  const zjl = new ZJLHandler()\n  const dsz = new DSZHandler()\n\n  cgb.setNext(zjl)\n  zjl.setNext(dsz)\n\n  return cgb.handleRequest.bind(cgb)\n})()\n```\næµ‹è¯•ï¼š\n```js\n\ndispath(800000)\n// output:\n// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­\n// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­\n// 10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†\n\ndispath(7000)\n// output:\n// 1wä»¥å†…ï¼ŒåŒæ„\n\n```\nè¡¥å……ï¼š\n- çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚è¯·æ±‚åœ¨è¿™äº›å¯¹è±¡é“¾ä¸­å¿…é¡»è¢«å¤„ç†ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†å¯¹è±¡ï¼Œè¦ä¹ˆåªå¤„ç†è¯·æ±‚ï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘ç»™ä¸‹ä¸ªèŠ‚ç‚¹å¯¹è±¡å¤„ç†\n\n- ä¸çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚åœ¨è´£ä»»é“¾é‡Œä¸ä¸€å®šä¼šæœ‰å¤„ç†ç»“æ„ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œå³å¯ä»¥å¤„ç†éƒ¨åˆ†è¯·æ±‚ï¼Œå¹¶æŠŠè¯·æ±‚å†è½¬å‘ä¸‹ä¸ªèŠ‚ç‚¹å¤„ç†\n\n.\n.\n.\n.\n.\n.\næœªå®Œå¾…ç»­...ğŸ‘\n","slug":"writeSomething/jsDesignPattern","published":1,"updated":"2019-03-05T08:28:36.180Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptwb00057948qncuinnt","content":"<p>æŒç»­æ›´æ–°<br>JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä»¥åŠåº”ç”¨åœºæ™¯<br><a id=\"more\"></a><br><em>ä»¥ä¸‹å†…å®¹ä¸ºä¸ªäººç®€å•ç†è§£ï¼Œéƒ¨åˆ†demoç”±ç½‘ä¸Šæ¡ˆä¾‹ç®€å•æ”¹å†™ï¼Œæœ‰é”™è¯¯è¯·åœ¨ä¸‹æ–¹è¯„è®ºæŒ‡å‡ºğŸ˜</em></p>\n<h1 id=\"ä½•è°“è®¾è®¡æ¨¡å¼\"><a href=\"#ä½•è°“è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"ä½•è°“è®¾è®¡æ¨¡å¼\"></a>ä½•è°“è®¾è®¡æ¨¡å¼</h1><p>æ²¡å¿…è¦è¢«é«˜å¤§ä¸Šçš„åè¯æ‰€å“å€’ï¼Œæ—¥å¸¸codingä¸­æˆ–è®¸ä¸€ä¸ªä¸äº†è§£å„ç§è®¾è®¡æ¨¡å¼çš„ç¨‹åºå‘˜å¯èƒ½è‡ªå·±å…¶å®å·²ç»ç”¨åˆ°äº†å¾ˆå¤š</p>\n<p>æŠ›å¼€å®˜æ–¹çš„å®šä¹‰åœ¨æˆ‘çœ‹æ¥ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ€æƒ³è¢«ç»Ÿä¸€ä¸ºè§„èŒƒï¼ŒæŒ‰ç…§è¿™ä¸ªè§„èŒƒå¯ä»¥å†™å‡ºæ›´ä¼˜é›…å¯æ§äº¦æˆ–æ€§èƒ½æ›´ä½³çš„ä»£ç ï¼Œåƒæ˜¯æ¡†æ¶çš„å•ä½</p>\n<p>å®šä¹‰ï¼šåœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆ</p>\n<p>è¡¥å……ï¼šå¹¶éæ‰€æœ‰çš„è½¯ä»¶æ¨¡å¼éƒ½æ˜¯è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ç‰¹æŒ‡è½¯ä»¶â€œè®¾è®¡â€å±‚æ¬¡ä¸Šçš„é—®é¢˜ã€‚è¿˜æœ‰å…¶ä»–éè®¾è®¡æ¨¡å¼çš„æ¨¡å¼ï¼Œå¦‚æ¶æ„æ¨¡å¼ã€‚åŒæ—¶ï¼Œç®—æ³•ä¸èƒ½ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºç®—æ³•ä¸»è¦æ˜¯ç”¨æ¥è§£å†³è®¡ç®—ä¸Šçš„é—®é¢˜ï¼Œè€Œéè®¾è®¡ä¸Šçš„é—®é¢˜</p>\n<p>è½¯ä»¶è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼Œå¸¸è§„çš„æœ‰23ç§ï¼Œæœ¬æ–‡é’ˆå¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ç§è¿›è¡Œç®€è¦ä»‹ç»</p>\n<h1 id=\"è®¾è®¡åŸåˆ™\"><a href=\"#è®¾è®¡åŸåˆ™\" class=\"headerlink\" title=\"è®¾è®¡åŸåˆ™\"></a>è®¾è®¡åŸåˆ™</h1><p>åœ¨åˆ—ä¸¾å…·ä½“çš„è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆçŸ¥é“è®¾è®¡æ¨¡å¼æœ¬èº«çš„è§„èŒƒæ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯è®¾è®¡åŸåˆ™ï¼Œä¸»è¦ä»¥ä¸‹ä¸‰ç§ï¼š</p>\n<ul>\n<li><p>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼šä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼Œé‚£ä¹ˆåœ¨éœ€æ±‚çš„å˜è¿è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚åº”è¯¥æŠŠå¯¹è±¡æˆ–æ–¹æ³•åˆ’åˆ†æˆè¾ƒå°çš„ç²’åº¦</p>\n</li>\n<li><p>æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“ å°½å¯èƒ½å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œåº”å½“å°½é‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¸è¦å‘ç”Ÿç›´æ¥çš„ ç›¸äº’è”ç³»ï¼Œå¯ä»¥è½¬äº¤ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œå¤„ç†</p>\n</li>\n<li><p>å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ï¼‰ç­‰åº”è¯¥æ˜¯å¯ä»¥ æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ï¼Œå½“éœ€è¦æ”¹å˜ä¸€ä¸ªç¨‹åºçš„åŠŸèƒ½æˆ–è€…ç»™è¿™ä¸ªç¨‹åºå¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¢åŠ ä»£ç çš„æ–¹å¼ï¼Œå°½é‡é¿å…æ”¹åŠ¨ç¨‹åºçš„æºä»£ç ï¼Œé˜²æ­¢å½±å“åŸç³»ç»Ÿçš„ç¨³å®š</p>\n</li>\n</ul>\n<h1 id=\"ä»æœ€ç®€å•çš„å•ä½“-å•ä¾‹æ¨¡å¼å¼€å§‹\"><a href=\"#ä»æœ€ç®€å•çš„å•ä½“-å•ä¾‹æ¨¡å¼å¼€å§‹\" class=\"headerlink\" title=\"ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹\"></a>ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹</h1><h3 id=\"å®šä¹‰ï¼š\"><a href=\"#å®šä¹‰ï¼š\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å•ä½“ï¼šä¸€ä¸ªç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´å¹¶å°†ä¸€æ‰¹ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·çš„å¯¹è±¡</p>\n<p>å•ä¾‹ï¼šé¡¾åä»…å¯ä»¥å¯ä»¥è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼šåœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ï¼Œåº”ç”¨è¯¥æ¨¡å¼çš„ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹<br><em>åœ¨javaä¸­å•ä¾‹çš„å®šä¹‰ï¼šä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è‡ªè¡Œå®ä¾‹åŒ–å‘æ•´ä¸ªç³»ç»Ÿæä¾›</em></p>\n<h3 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹:\"></a>ä¼˜ç‚¹:</h3><ul>\n<li>å•ä¾‹æ¨¡å¼ä¼šé˜»æ­¢å…¶ä»–å¯¹è±¡å®ä¾‹åŒ–å…¶è‡ªå·±çš„å•ä¾‹å¯¹è±¡çš„å‰¯æœ¬ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½è®¿é—®å”¯ä¸€å®ä¾‹</li>\n<li>å› ä¸ºç±»æ§åˆ¶äº†å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥ç±»å¯ä»¥çµæ´»æ›´æ”¹å®ä¾‹åŒ–è¿‡ç¨‹</li>\n<li>å•ä½“å¯ä»¥æ§åˆ¶å±€éƒ¨å˜é‡æ±¡æŸ“</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><ul>\n<li>å¯ä»¥ç”¨å•ä¾‹æ¥åˆ’åˆ†å‘½åç©ºé—´: ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œå¦‚æŸäº›æ•°æ®çš„ç¼“å­˜</li>\n<li>å€ŸåŠ©å•ä¾‹æ¨¡å¼ï¼Œå¯ä»¥æŠŠä»£ç ç»„ç»‡çš„æ›´ä¸ºä¸€è‡´</li>\n</ul>\n<h4 id=\"æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\"><a href=\"#æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\" class=\"headerlink\" title=\"æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\"></a>æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼</h4><p>ç›´æ¥å¯¼å‡ºä¸€ä¸ªæ–¹æ³•å±æ€§é›†åˆçš„å¯¹è±¡<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// commonjs å¯¼å‡º</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  getSingleton() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\"><a href=\"#ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\" class=\"headerlink\" title=\"ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\"></a>ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Ins1 = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> instance = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"comment\">// åˆ©ç”¨é—­åŒ…ç‰¹æ€§ä¿è¯å®ä¾‹ç§æœ‰åŒ–</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">opt</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (instance === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      instance = <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> k <span class=\"keyword\">in</span> opt) &#123;</span><br><span class=\"line\">      instance[k] = opt[k]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> instance</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> i1 = <span class=\"keyword\">new</span> Ins1(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'i1'</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> i2 = <span class=\"keyword\">new</span> Ins1(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'i2'</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i1 === i2) <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i1.name) <span class=\"comment\">// i2</span></span><br></pre></td></tr></table></figure></p>\n<p>è¡¥å……ï¼šåœ¨nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œè‹¥åœ¨æŸä¸ªjsæ–‡ä»¶ä¸­å¯¼å‡ºä¸€ä¸ªç±»ï¼š <code>class T {} export default new T</code> ä¹‹ååœ¨å…¶ä»–ä»»ä½•å¤–éƒ¨æ–‡ä»¶å¤šæ¬¡å¼•å…¥å…¶å®éƒ½æ˜¯ä¿è¯äº† T ç±»åªè¢«å®ä¾‹åŒ–äº†ä¸€æ¬¡è€Œä¸ä¼šè¢«å¤šæ¬¡åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºnodeéµå¾ªäº†commonjsçš„è§„èŒƒï¼Œæ‰€æœ‰æ–‡ä»¶æ¨¡å—åœ¨è¢«å¼•ç”¨æ—¶éƒ½ä¼šå…ˆå»æ¨¡å—ç³»ç»Ÿçš„ç¼“å­˜ä¸­æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ç¼“å­˜å¦åˆ™æ‰ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œè€Œè¿™ä¸ªç¼“å­˜å…¶å®ä¹Ÿå°±é™åˆ¶äº†æ¨¡å—å†…è„šæœ¬çš„å¤šæ¬¡åˆå§‹åŒ–</p>\n<h1 id=\"ç­–ç•¥æ¨¡å¼\"><a href=\"#ç­–ç•¥æ¨¡å¼\" class=\"headerlink\" title=\"ç­–ç•¥æ¨¡å¼\"></a>ç­–ç•¥æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-1\"><a href=\"#å®šä¹‰ï¼š-1\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å°±æ˜¯è§£è€¦ï¼Œä½•ä¸ºç­–ç•¥è§£è€¦ï¼š æŒ‡çš„æ˜¯å®šä¹‰ä¸€äº›åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œç›®çš„å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨ä¸ç®—æ³•çš„å®ç°åˆ†ç¦»å¼€æ¥ã€‚è¯´ç™½äº†å°±æ˜¯ä»¥å‰è¦å¾ˆå¤šåˆ¤æ–­çš„å†™æ³•ï¼Œç°åœ¨æŠŠåˆ¤æ–­é‡Œé¢çš„å†…å®¹æŠ½ç¦»å¼€æ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå°çš„ä¸ªä½“ã€‚å¦‚å¤§é‡çš„if elseæˆ–è€…switch caseåˆ¤æ–­å½“éœ€æ±‚æ›´æ”¹æ—¶éœ€è¦æ·»åŠ å’Œæ›´æ”¹åˆ¤æ–­ï¼Œè¿™è¿èƒŒäº†è®¾è®¡æ¨¡å¼çš„å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„åŸåˆ™</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š\"><a href=\"#ä¼˜ç‚¹ï¼š\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><ul>\n<li>å‡å°‘<code>command c &amp; command v</code>, æé«˜å¤ç”¨æ€§</li>\n<li>éµå¾ªå¼€é—­åŸåˆ™ï¼Œç®—æ³•ç‹¬ç«‹æ˜“äºåˆ‡æ¢ã€ç†è§£ã€æ‹“å±•</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-1\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-1\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>é’ˆå¯¹ä»£ç å¤šç§è¡Œä¸ºè®¾ç½®å¤§é‡çš„æ¡ä»¶åˆ¤æ–­æ—¶å°†æ¯ä¸€ä¸ªè¡Œä¸ºåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªå¯¹è±¡è¢«ç§°ä¸ºä¸€ä¸ªç­–ç•¥ã€‚è®¾ç½®å¤šä¸ªè¿™ç§ç­–ç•¥å¯¹è±¡ï¼Œå¯ä»¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œä¹Ÿæ›´å¥½çš„è¿›è¡Œå•å…ƒæµ‹è¯•</p>\n<h4 id=\"æœ€ç®€å•çš„æ‰§è¡Œ\"><a href=\"#æœ€ç®€å•çš„æ‰§è¡Œ\" class=\"headerlink\" title=\"æœ€ç®€å•çš„æ‰§è¡Œ\"></a>æœ€ç®€å•çš„æ‰§è¡Œ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">closure</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å®šä¹‰</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> strategies = &#123;</span><br><span class=\"line\">      plus10: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arg + <span class=\"number\">10</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      plus100: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arg + <span class=\"number\">100</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ‰§è¡Œ</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">plus, base</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> strategies[plus](base);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> strategy = closure()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strategy(<span class=\"string\">'plus10'</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 11</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strategy(<span class=\"string\">'plus100'</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 101</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"å¯¹æ¯”åˆ†æ\"><a href=\"#å¯¹æ¯”åˆ†æ\" class=\"headerlink\" title=\"å¯¹æ¯”åˆ†æ\"></a>å¯¹æ¯”åˆ†æ</h4><p>eg.: ä»£ç æƒ…æ™¯ä¸ºè¶…å¸‚ä¿ƒé”€ï¼Œvipä¸º5æŠ˜ï¼Œè€å®¢æˆ·3æŠ˜ï¼Œæ™®é€šé¡¾å®¢æ²¡æŠ˜ï¼Œè®¡ç®—æœ€åéœ€è¦æ”¯ä»˜çš„é‡‘é¢</p>\n<p>æ„å¤§åˆ©é€»è¾‘:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">context</span> (<span class=\"params\">name, type, price</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">'vip'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.5</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type === <span class=\"string\">'vip'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœtypeç±»å‹éå¸¸å¤šï¼Œå†…éƒ¨é€»è¾‘åˆ†åˆ«ä¹Ÿä¸åªæ˜¯ç®€å•çš„returnä¸€ä¸ªvalï¼Œé‚£å¯¹åç»­çš„ç»´æŠ¤å’Œæµ‹è¯•å°±æ˜¯ç¾éš¾ï¼Œä¸‹é¢æ‹†åˆ†é€»è¾‘ä¸ºç‹¬ç«‹å•å…ƒ:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vip</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = <span class=\"number\">0.5</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Old</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = <span class=\"number\">0.8</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Others</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.strategy = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setPrice (name, strategy, price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.strategy = strategy</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice () &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name, <span class=\"keyword\">this</span>.strategy.getPrice(<span class=\"keyword\">this</span>.price), <span class=\"string\">'å…ƒ'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.strategy.getPrice(<span class=\"keyword\">this</span>.price)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> seller = <span class=\"keyword\">new</span> Context</span><br><span class=\"line\"><span class=\"keyword\">const</span> vip = <span class=\"keyword\">new</span> Vip</span><br><span class=\"line\"><span class=\"keyword\">const</span> old = <span class=\"keyword\">new</span> Old</span><br><span class=\"line\"><span class=\"keyword\">const</span> other = <span class=\"keyword\">new</span> Others</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'zs'</span>, vip, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ls'</span>, old, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ww'</span>, other, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// zs 500 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ls 800 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ww 1000 å…ƒ</span></span><br></pre></td></tr></table></figure></p>\n<p>æ˜¾ç„¶é€»è¾‘å¤šè€Œå¤æ‚æ—¶å¯ä»¥æå¤§æé«˜ä»£ç å¯è¯»æ€§ä»¥åŠå‡å°‘ç»´æŠ¤æˆæœ¬</p>\n<p>è¡¥å……ï¼šä¸Šè¿°ä¸æ–­é‡å¤çš„ä»£ç ç‰‡æ®µçœ‹èµ·æ¥éå¸¸ä¸‘é™‹ï¼Œå…¶å®å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å®ç°æ›´ç®€æ´çš„å†™æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰çˆ¶ç±»</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(discount) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸ä¼ ä¸ºåŸä»·</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = discount || <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getPrice(price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount === <span class=\"number\">1</span></span><br><span class=\"line\">      ? price</span><br><span class=\"line\">      : <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å£°æ˜å­ç±»</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sub</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¯ä»¥è‡ªå®šä¹‰æ›´å¤šä¸åŒçº§åˆ«é¡¾å®¢ä¸åŒéœ€æ±‚</span></span><br><span class=\"line\"><span class=\"comment\">// class Test extend Handler &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   getGifts() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     if (this.discount &lt; 1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//       // èµ é€èµ å“</span></span><br><span class=\"line\"><span class=\"comment\">//     &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// const master = new Test(0.1)</span></span><br><span class=\"line\"><span class=\"comment\">// master.getGifts()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Contextç±»åŒä¸Šæ–¹ä¾¿ç»Ÿä¸€æ¥å£è¾“å‡º</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> seller = <span class=\"keyword\">new</span> Context</span><br><span class=\"line\"><span class=\"keyword\">const</span> vip = <span class=\"keyword\">new</span> Sub(<span class=\"number\">0.5</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> old = <span class=\"keyword\">new</span> Sub(<span class=\"number\">0.8</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> other = <span class=\"keyword\">new</span> Sub</span><br><span class=\"line\"></span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'zs'</span>, vip, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ls'</span>, old, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ww'</span>, other, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// zs 500 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ls 800 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ww 1000 å…ƒ</span></span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ç»“æœä¸€è‡´</p>\n<h1 id=\"ä»£ç†æ¨¡å¼\"><a href=\"#ä»£ç†æ¨¡å¼\" class=\"headerlink\" title=\"ä»£ç†æ¨¡å¼\"></a>ä»£ç†æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-2\"><a href=\"#å®šä¹‰ï¼š-2\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨<br>è‘—åçš„ä»£ç†æ¨¡å¼ä¾‹å­ä¸ºå¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰æŒ‡é’ˆå¯¹è±¡<br>å¦å¤–ä»£ç†æ¨¡å¼è¿˜å¯åˆ†ä¸ºï¼š</p>\n<ul>\n<li>è™šæ‹Ÿä»£ç†ï¼šæŠŠä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œå½“å¯¹è±¡åœ¨åˆ›å»ºå‰æˆ–åˆ›å»ºä¸­æ—¶ï¼Œç”±è™šæ‹Ÿä»£ç†æ¥æ‰®æ¼”å¯¹è±¡çš„æ›¿èº«ï¼›å¯¹è±¡åˆ›å»ºåï¼Œä»£ç†å°±ä¼šå°†è¯·æ±‚ç›´æ¥å§”æ‰˜ç»™å¯¹è±¡</li>\n<li>ä¿æŠ¤ä»£ç†ï¼šç”¨äºæ§åˆ¶ä¸åŒæƒé™çš„å¯¹è±¡å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®</li>\n<li>ç¼“å­˜ä»£ç†: ç¼“å­˜ä»£ç†å¯ä»¥ä½œä¸ºä¸€äº›å¼€é”€å¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ï¼Œä¸‹æ¬¡è¿ç®—æ—¶ï¼Œå¦‚æœä¼ é€’è¿›æ¥çš„å‚æ•°è·Ÿä¹‹å‰ä¸€è‡´ï¼Œåˆ™å¯ä»¥ç›´æ¥è¿”å›å‰é¢å­˜å‚¨çš„è¿ç®—ç»“æœ</li>\n</ul>\n<h3 id=\"ä¼˜ç‚¹ï¼š-1\"><a href=\"#ä¼˜ç‚¹ï¼š-1\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>ç‹¬ç«‹èŒè´£å½’å±ï¼Œä¾¿äºç»´æŠ¤æµ‹è¯•</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-2\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-2\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>æ¯”å¦‚å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œæ•°æ®ç¼“å­˜ç­‰</p>\n<h4 id=\"è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\"><a href=\"#è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\" class=\"headerlink\" title=\"è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\"></a>è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> imgSet = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> node = <span class=\"keyword\">new</span> Image</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.body.append(node)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">src</span>) </span>&#123;</span><br><span class=\"line\">    node.src = src</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyImg = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> _img = <span class=\"keyword\">new</span> Image</span><br><span class=\"line\"></span><br><span class=\"line\">  _img.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(imgSet, <span class=\"number\">2000</span>, <span class=\"keyword\">this</span>.src)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">src</span>) </span>&#123;</span><br><span class=\"line\">    imgSet(<span class=\"string\">'https://yphoto.eryufm.cn/upload/assets/jump.gif'</span>)</span><br><span class=\"line\">    _img.src = src</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"><span class=\"comment\">// call</span></span><br><span class=\"line\">proxyImg(<span class=\"string\">`https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&amp;quality=100&amp;size=b4000_4000&amp;sec=1551174639&amp;di=90b4757f68c9480f78c132c930c1df10&amp;src=http://desk.fd.zol-img.com.cn/t_s960x600c5/g5/M00/02/02/ChMkJ1bKxkmIObywAArTTfACinwAALHjACDZuIACtNl408.jpg`</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¿æŠ¤ä»£ç†\"><a href=\"#ä¿æŠ¤ä»£ç†\" class=\"headerlink\" title=\"ä¿æŠ¤ä»£ç†\"></a>ä¿æŠ¤ä»£ç†</h4><p>å¯¹è±¡aéœ€è¦ç»™å¯¹è±¡cå‘é€ä¿¡æ¯ï¼Œä¸ºäº†ä¿è¯aå¯¹cæ˜¯ä¸å¯è§ï¼Œå¯ç”¨å¯¹è±¡bä»£ç†è½¬å‘<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// filter some no use or unneed requestions or data</span></span><br><span class=\"line\"><span class=\"comment\">// A  ---&gt; B(proxy) ----&gt; C</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> a = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'a'</span>,</span><br><span class=\"line\">  send (target, info) &#123;</span><br><span class=\"line\">    target.receive(info)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> c = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'c'</span>,</span><br><span class=\"line\">  receive (target, info) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'c receive '</span>, info, <span class=\"string\">' from '</span>, target.name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'b'</span>,</span><br><span class=\"line\">  receive (info) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (info) &#123;</span><br><span class=\"line\">      c.receive(<span class=\"keyword\">this</span>, info)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a.send(b, <span class=\"string\">'good morning'</span>)</span><br><span class=\"line\">a.send(b, <span class=\"string\">''</span>)</span><br><span class=\"line\">a.send(b, <span class=\"string\">'send again'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// c receive good morning from b</span></span><br><span class=\"line\"><span class=\"comment\">// c receive send again from b</span></span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢è¡¨ç¤ºä¸€ä¸ªæœ€ç®€å•çš„ä¿æŠ¤ä»£ç†</p>\n<h4 id=\"ç¼“å­˜ä»£ç†\"><a href=\"#ç¼“å­˜ä»£ç†\" class=\"headerlink\" title=\"ç¼“å­˜ä»£ç†\"></a>ç¼“å­˜ä»£ç†</h4><p>é¡¾åæ€ä¹‰å°±æ˜¯ç¼“å­˜ç›¸å…³çš„ä»£ç†</p>\n<p>æœ‰ä¸€ä¸ªäºŒçº§åˆ«è”åŠ¨çš„æ ‡ç­¾åˆ—è¡¨ï¼Œç¬¬äºŒçº§çš„å„æœ‰è‡ªå·±æ‰€å±çš„å¤šä¸ªæ ‡ç­¾æ ¹æ®ç¬¬ä¸€çº§çš„å‚æ•°æ¥å‘é€æŒ‡å®šè¯·æ±‚æ¥è·å–ï¼Œå¦‚æœæƒ³è¦è¾¾åˆ°ç‚¹å‡»ç¬¬ä¸€çº§åˆ—è¡¨è¿…é€Ÿå±•ç¤ºå‡ºç›¸å…³çš„ç¬¬äºŒçº§æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿç©ºé—²æ—¶é¢„å…ˆå°†æ‰€æœ‰æ ‡ç­¾å…¨éƒ¨è·å–å¹¶ç¼“å­˜<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­˜å‚¨æ‰€æœ‰æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> tags</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sendApiGetTags = <span class=\"function\"><span class=\"params\">index</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ajax.get('/api', &#123; index &#125;)</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> proxyCache = <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">async</span> (</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> allTagsCache = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> number = <span class=\"number\">5</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> all = []</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> index = <span class=\"number\">0</span>; index &lt; number; index++) &#123;</span><br><span class=\"line\">    all.push(sendApiGetTags(&#123;</span><br><span class=\"line\">      ...params,</span><br><span class=\"line\">      index</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> list = <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(all)</span><br><span class=\"line\"></span><br><span class=\"line\">  list.forEach(<span class=\"function\">(<span class=\"params\">res, i</span>) =&gt;</span> allTagsCache[i] = res)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> allTagsCache</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> setTags = <span class=\"keyword\">async</span> index =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç¼“å­˜ä¸­æœ‰ç›´æ¥æ‹¿</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (proxyCache[index]) &#123;</span><br><span class=\"line\">    tags = proxyCache[index]</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç¼“å­˜ä¸­æ²¡æœ‰åˆ™é‡å‘è¯·æ±‚</span></span><br><span class=\"line\">    tags = <span class=\"keyword\">await</span> sendApiGetTags(index)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"å‘å¸ƒè®¢é˜…æ¨¡å¼\"><a href=\"#å‘å¸ƒè®¢é˜…æ¨¡å¼\" class=\"headerlink\" title=\"å‘å¸ƒè®¢é˜…æ¨¡å¼\"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-3\"><a href=\"#å®šä¹‰ï¼š-3\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè®¢é˜…è€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚<br>è‡³äºå‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸æ˜¯åŒä¸€æ ·ä¸œè¥¿ä¸åŒçš„äººå„æœ‰çœ‹æ³•</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-2\"><a href=\"#ä¼˜ç‚¹ï¼š-2\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>è®¢é˜…è€…å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚å½“æŸç§Actionè¢«è§¦å‘æ—¶å®Œæˆè‡ªå·±çš„è°ƒåº¦</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-3\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-3\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>AngularJsçš„å¹¿æ’­ã€vueçš„eventbusç­‰</p>\n<h4 id=\"æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\"><a href=\"#æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\" class=\"headerlink\" title=\"æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\"></a>æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»</h4><p>æ„é€ å‘å¸ƒè€…åŸºç±»<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Publisher</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¢é˜…å‘å¸ƒè€…çš„é˜Ÿåˆ— å­˜å‚¨æ¯ä¸ªè®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subscribers = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  deliver (data) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å‘å¸ƒæ¶ˆæ¯ è°ƒç”¨è®¢é˜…è€…çš„å›è°ƒ å‘ŠçŸ¥è®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subscribers.forEach(<span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> fn.shot(data))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ„é€ è®¢é˜…è€…åŸºç±»<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> (call) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¼ å…¥è®¢é˜…å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.shot = call</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  subscribe (publisher) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!publisher.subscribers.some(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> v.shot === <span class=\"keyword\">this</span>.shot)) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'è®¢é˜…è¯¥æ¶ˆæ¯'</span>)</span><br><span class=\"line\">      <span class=\"comment\">// åˆ¤æ–­å½“å‰è®¢é˜…è€…æ˜¯å¦è®¢é˜…</span></span><br><span class=\"line\">      publisher.subscribers.push(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  unsubscribe (publisher) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç§»é™¤å½“å‰è®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'å–æ¶ˆè®¢é˜…'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    publisher.subscribers = publisher.subscribers.filter(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> v.shot !== <span class=\"keyword\">this</span>.shot)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> pub = <span class=\"keyword\">new</span> Publisher</span><br><span class=\"line\"><span class=\"keyword\">const</span> pub2 = <span class=\"keyword\">new</span> Publisher</span><br><span class=\"line\"><span class=\"keyword\">const</span> obs = <span class=\"keyword\">new</span> Observer(<span class=\"function\"><span class=\"params\">deliver</span> =&gt;</span> <span class=\"built_in\">console</span>.log(deliver))</span><br><span class=\"line\"></span><br><span class=\"line\">obs.subscribe(pub) <span class=\"comment\">// è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br><span class=\"line\">obs.subscribe(pub2) <span class=\"comment\">// è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br><span class=\"line\"></span><br><span class=\"line\">pub.deliver(<span class=\"string\">'pub deliver first message'</span>) <span class=\"comment\">// pub deliver first message</span></span><br><span class=\"line\">pub2.deliver(<span class=\"string\">'pub2 deliver first message'</span>) <span class=\"comment\">// pub2 deliver first message</span></span><br><span class=\"line\"></span><br><span class=\"line\">obs.unsubscribe(pub) <span class=\"comment\">// å–æ¶ˆè®¢é˜…</span></span><br><span class=\"line\">pub.deliver(<span class=\"string\">'pub deliver second message'</span>) <span class=\"comment\">//</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"è£…é¥°è€…æ¨¡å¼\"><a href=\"#è£…é¥°è€…æ¨¡å¼\" class=\"headerlink\" title=\"è£…é¥°è€…æ¨¡å¼\"></a>è£…é¥°è€…æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-4\"><a href=\"#å®šä¹‰ï¼š-4\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>è£…é¥°æ¨¡å¼æŒ‡çš„æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-3\"><a href=\"#ä¼˜ç‚¹ï¼š-3\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><ul>\n<li>è£…é¥°å¯¹è±¡å’ŒçœŸå®å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ã€‚è¿™æ ·å®¢æˆ·ç«¯å¯¹è±¡å°±èƒ½ä»¥å’ŒçœŸå®å¯¹è±¡ç›¸åŒçš„æ–¹å¼å’Œè£…é¥°å¯¹è±¡äº¤äº’</li>\n<li>è£…é¥°å¯¹è±¡å¯ä»¥åœ¨è½¬å‘è¿™äº›è¯·æ±‚ä»¥å‰æˆ–ä»¥åå¢åŠ ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨è¿è¡Œæ—¶ï¼Œä¸ç”¨ä¿®æ”¹ç»™å®šå¯¹è±¡çš„ç»“æ„å°±å¯ä»¥åœ¨å¤–éƒ¨å¢åŠ é™„åŠ çš„åŠŸèƒ½ã€‚åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°å¯¹ç»™å®šç±»çš„åŠŸèƒ½æ‰©å±•</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-4\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-4\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><ul>\n<li>éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£</li>\n<li>éœ€è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤é”€</li>\n<li>ä¸å¿…æ”¹åŠ¨åŸæœ¬çš„é€»è¾‘é€ æˆä¸å¯çŸ¥é—®é¢˜</li>\n</ul>\n<h4 id=\"ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\"><a href=\"#ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\" class=\"headerlink\" title=\"ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\"></a>ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­</h4><p>æ™®é€šå‡½æ•°ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(msg, <span class=\"string\">' right now'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fn(<span class=\"string\">'let go'</span>) <span class=\"comment\">// lets go right now</span></span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬çŸ¥é“JSä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯åŸºäºçˆ¶ç±» <code>Function</code> ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¼šç»§æ‰¿çˆ¶ç±»åŸå‹çš„æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°†å‡½æ•°çš„é’©å­æŒ‚åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šå³å¯ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‰§è¡Œå‰</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.before = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">call</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fn = <span class=\"keyword\">this</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä½“æœ¬èº«ä¹Ÿæ˜¯å‡½æ•°æ‰€ä»¥æ”¯æŒç»§ç»­è°ƒç”¨é’©å­</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨é’©å­ï¼ŒåŒæ—¶å‚æ•°ä¼ é€’åˆ°é’©å­å†…</span></span><br><span class=\"line\">    call.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨è‡ªèº«</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æ‰§è¡Œå</span></span><br><span class=\"line\"><span class=\"comment\">// å’Œ before åŒç†</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.after = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">call</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fn = <span class=\"keyword\">this</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    call.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›è‡ªèº«çš„è¿”å›å€¼</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é‡æ–°åŒ…è£… fn</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(msg, <span class=\"string\">' right now'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> decoratorFn = fn.before(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'when we go,'</span>, msg)</span><br><span class=\"line\">&#125;).after(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">msg</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'had to go'</span>, msg)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">decoratorFn(<span class=\"string\">'lets go'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// out put:</span></span><br><span class=\"line\"><span class=\"comment\">// when we go, right now</span></span><br><span class=\"line\"><span class=\"comment\">// lets go, right now</span></span><br><span class=\"line\"><span class=\"comment\">// had to go, right now</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\"><a href=\"#èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\" class=\"headerlink\" title=\"èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\"></a>èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-5\"><a href=\"#å®šä¹‰ï¼š-5\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å®ƒæ˜¯ä¸€ç§é“¾å¼ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½ä¸¤ç§æ“ä½œï¼Œè¦ä¹ˆå¤„ç†è¯¥è¯·æ±‚åœæ­¢è¯¥è¯·æ±‚æ“ä½œï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†è¯·æ±‚</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-4\"><a href=\"#ä¼˜ç‚¹ï¼š-4\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>èŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-5\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-5\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>JS ä¸­çš„äº‹ä»¶å†’æ³¡ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰å°±æ˜¯ç»å…¸æ¡ˆä¾‹</p>\n<h4 id=\"å®ä¾‹åˆ†æ\"><a href=\"#å®ä¾‹åˆ†æ\" class=\"headerlink\" title=\"å®ä¾‹åˆ†æ\"></a>å®ä¾‹åˆ†æ</h4><p>éƒ¨é—¨é‡‡è´­ç‰©å“ä¸åŒé‡‘é¢éœ€è¦èµ°ä¸åŒèŒä½çš„æµç¨‹å®¡æ‰¹ï¼Œé‡‡è´­éƒ¨ç»ç†å¯è‡ªä¸»å†³å®š1wä»¥å†…çš„é‡‡è´­ï¼Œæ€»ç»ç†å¯ä»¥å†³å®š10wä»¥å†…çš„é‡‡è´­ï¼Œè‘£äº‹é•¿å†³å®š100wä»¥å†…çš„é‡‡è´­<br>ä¸‹é¢åˆ†åˆ«æŠ½è±¡å¤„ç†è€…æ„é€ åŸºç±»</p>\n<p>è´£ä»»é“¾è°ƒåº¦ä¸­å¿ƒï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setNext(_handler) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = _handler</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleRequest(money) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>é‡‡è´­éƒ¨ç»ç†ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CGBHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &lt; <span class=\"number\">10000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'1wä»¥å†…ï¼ŒåŒæ„'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next.handleRequest(money)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ€»ç»ç†ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZJLHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 10w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &lt; <span class=\"number\">100000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'10wä»¥å†…ï¼ŒåŒæ„'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next.handleRequest(money)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è‘£äº‹é•¿ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DSZHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 100w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &gt;= <span class=\"number\">100000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†'</span>)</span><br><span class=\"line\">      <span class=\"comment\">//å¤„ç†å…¶ä»–é€»è¾‘</span></span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å°è£…å®¢æˆ·ç«¯æ¥å£ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> dispatch = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">client</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cgb = <span class=\"keyword\">new</span> CGBHandler()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> zjl = <span class=\"keyword\">new</span> ZJLHandler()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dsz = <span class=\"keyword\">new</span> DSZHandler()</span><br><span class=\"line\"></span><br><span class=\"line\">  cgb.setNext(zjl)</span><br><span class=\"line\">  zjl.setNext(dsz)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> cgb.handleRequest.bind(cgb)</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">dispath(<span class=\"number\">800000</span>)</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­</span></span><br><span class=\"line\"><span class=\"comment\">// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­</span></span><br><span class=\"line\"><span class=\"comment\">// 10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†</span></span><br><span class=\"line\"></span><br><span class=\"line\">dispath(<span class=\"number\">7000</span>)</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// 1wä»¥å†…ï¼ŒåŒæ„</span></span><br></pre></td></tr></table></figure></p>\n<p>è¡¥å……ï¼š</p>\n<ul>\n<li><p>çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚è¯·æ±‚åœ¨è¿™äº›å¯¹è±¡é“¾ä¸­å¿…é¡»è¢«å¤„ç†ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†å¯¹è±¡ï¼Œè¦ä¹ˆåªå¤„ç†è¯·æ±‚ï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘ç»™ä¸‹ä¸ªèŠ‚ç‚¹å¯¹è±¡å¤„ç†</p>\n</li>\n<li><p>ä¸çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚åœ¨è´£ä»»é“¾é‡Œä¸ä¸€å®šä¼šæœ‰å¤„ç†ç»“æ„ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œå³å¯ä»¥å¤„ç†éƒ¨åˆ†è¯·æ±‚ï¼Œå¹¶æŠŠè¯·æ±‚å†è½¬å‘ä¸‹ä¸ªèŠ‚ç‚¹å¤„ç†</p>\n</li>\n</ul>\n<p>.<br>.<br>.<br>.<br>.<br>.<br>æœªå®Œå¾…ç»­â€¦ğŸ‘</p>\n","site":{"data":{}},"excerpt":"<p>æŒç»­æ›´æ–°<br>JSå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä»¥åŠåº”ç”¨åœºæ™¯<br></p>","more":"<br><em>ä»¥ä¸‹å†…å®¹ä¸ºä¸ªäººç®€å•ç†è§£ï¼Œéƒ¨åˆ†demoç”±ç½‘ä¸Šæ¡ˆä¾‹ç®€å•æ”¹å†™ï¼Œæœ‰é”™è¯¯è¯·åœ¨ä¸‹æ–¹è¯„è®ºæŒ‡å‡ºğŸ˜</em><p></p>\n<h1 id=\"ä½•è°“è®¾è®¡æ¨¡å¼\"><a href=\"#ä½•è°“è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"ä½•è°“è®¾è®¡æ¨¡å¼\"></a>ä½•è°“è®¾è®¡æ¨¡å¼</h1><p>æ²¡å¿…è¦è¢«é«˜å¤§ä¸Šçš„åè¯æ‰€å“å€’ï¼Œæ—¥å¸¸codingä¸­æˆ–è®¸ä¸€ä¸ªä¸äº†è§£å„ç§è®¾è®¡æ¨¡å¼çš„ç¨‹åºå‘˜å¯èƒ½è‡ªå·±å…¶å®å·²ç»ç”¨åˆ°äº†å¾ˆå¤š</p>\n<p>æŠ›å¼€å®˜æ–¹çš„å®šä¹‰åœ¨æˆ‘çœ‹æ¥ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ€æƒ³è¢«ç»Ÿä¸€ä¸ºè§„èŒƒï¼ŒæŒ‰ç…§è¿™ä¸ªè§„èŒƒå¯ä»¥å†™å‡ºæ›´ä¼˜é›…å¯æ§äº¦æˆ–æ€§èƒ½æ›´ä½³çš„ä»£ç ï¼Œåƒæ˜¯æ¡†æ¶çš„å•ä½</p>\n<p>å®šä¹‰ï¼šåœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰æ˜¯å¯¹è½¯ä»¶è®¾è®¡ä¸­æ™®éå­˜åœ¨ï¼ˆåå¤å‡ºç°ï¼‰çš„å„ç§é—®é¢˜ï¼Œæ‰€æå‡ºçš„è§£å†³æ–¹æ¡ˆ</p>\n<p>è¡¥å……ï¼šå¹¶éæ‰€æœ‰çš„è½¯ä»¶æ¨¡å¼éƒ½æ˜¯è®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼ç‰¹æŒ‡è½¯ä»¶â€œè®¾è®¡â€å±‚æ¬¡ä¸Šçš„é—®é¢˜ã€‚è¿˜æœ‰å…¶ä»–éè®¾è®¡æ¨¡å¼çš„æ¨¡å¼ï¼Œå¦‚æ¶æ„æ¨¡å¼ã€‚åŒæ—¶ï¼Œç®—æ³•ä¸èƒ½ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºç®—æ³•ä¸»è¦æ˜¯ç”¨æ¥è§£å†³è®¡ç®—ä¸Šçš„é—®é¢˜ï¼Œè€Œéè®¾è®¡ä¸Šçš„é—®é¢˜</p>\n<p>è½¯ä»¶è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼Œå¸¸è§„çš„æœ‰23ç§ï¼Œæœ¬æ–‡é’ˆå¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ç§è¿›è¡Œç®€è¦ä»‹ç»</p>\n<h1 id=\"è®¾è®¡åŸåˆ™\"><a href=\"#è®¾è®¡åŸåˆ™\" class=\"headerlink\" title=\"è®¾è®¡åŸåˆ™\"></a>è®¾è®¡åŸåˆ™</h1><p>åœ¨åˆ—ä¸¾å…·ä½“çš„è®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆçŸ¥é“è®¾è®¡æ¨¡å¼æœ¬èº«çš„è§„èŒƒæ˜¯ä»€ä¹ˆï¼Œè¿™å°±æ˜¯è®¾è®¡åŸåˆ™ï¼Œä¸»è¦ä»¥ä¸‹ä¸‰ç§ï¼š</p>\n<ul>\n<li><p>å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰ï¼šä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼Œé‚£ä¹ˆåœ¨éœ€æ±‚çš„å˜è¿è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ”¹å†™è¿™ä¸ªæ–¹æ³•çš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚åº”è¯¥æŠŠå¯¹è±¡æˆ–æ–¹æ³•åˆ’åˆ†æˆè¾ƒå°çš„ç²’åº¦</p>\n</li>\n<li><p>æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLKPï¼‰ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“åº”å½“ å°½å¯èƒ½å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œåº”å½“å°½é‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¹‹é—´ä¸å¿…å½¼æ­¤ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡å°±ä¸è¦å‘ç”Ÿç›´æ¥çš„ ç›¸äº’è”ç³»ï¼Œå¯ä»¥è½¬äº¤ç»™ç¬¬ä¸‰æ–¹è¿›è¡Œå¤„ç†</p>\n</li>\n<li><p>å¼€æ”¾-å°é—­åŸåˆ™ï¼ˆOCPï¼‰ï¼šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ï¼‰ç­‰åº”è¯¥æ˜¯å¯ä»¥ æ‰©å±•çš„ï¼Œä½†æ˜¯ä¸å¯ä¿®æ”¹ï¼Œå½“éœ€è¦æ”¹å˜ä¸€ä¸ªç¨‹åºçš„åŠŸèƒ½æˆ–è€…ç»™è¿™ä¸ªç¨‹åºå¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¢åŠ ä»£ç çš„æ–¹å¼ï¼Œå°½é‡é¿å…æ”¹åŠ¨ç¨‹åºçš„æºä»£ç ï¼Œé˜²æ­¢å½±å“åŸç³»ç»Ÿçš„ç¨³å®š</p>\n</li>\n</ul>\n<h1 id=\"ä»æœ€ç®€å•çš„å•ä½“-å•ä¾‹æ¨¡å¼å¼€å§‹\"><a href=\"#ä»æœ€ç®€å•çš„å•ä½“-å•ä¾‹æ¨¡å¼å¼€å§‹\" class=\"headerlink\" title=\"ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹\"></a>ä»æœ€ç®€å•çš„å•ä½“/å•ä¾‹æ¨¡å¼å¼€å§‹</h1><h3 id=\"å®šä¹‰ï¼š\"><a href=\"#å®šä¹‰ï¼š\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å•ä½“ï¼šä¸€ä¸ªç”¨æ¥åˆ’åˆ†å‘½åç©ºé—´å¹¶å°†ä¸€æ‰¹ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·çš„å¯¹è±¡</p>\n<p>å•ä¾‹ï¼šé¡¾åä»…å¯ä»¥å¯ä»¥è¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼šåœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ï¼Œåº”ç”¨è¯¥æ¨¡å¼çš„ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå¯¹è±¡å®ä¾‹<br><em>åœ¨javaä¸­å•ä¾‹çš„å®šä¹‰ï¼šä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è‡ªè¡Œå®ä¾‹åŒ–å‘æ•´ä¸ªç³»ç»Ÿæä¾›</em></p>\n<h3 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹:\"></a>ä¼˜ç‚¹:</h3><ul>\n<li>å•ä¾‹æ¨¡å¼ä¼šé˜»æ­¢å…¶ä»–å¯¹è±¡å®ä¾‹åŒ–å…¶è‡ªå·±çš„å•ä¾‹å¯¹è±¡çš„å‰¯æœ¬ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰å¯¹è±¡éƒ½è®¿é—®å”¯ä¸€å®ä¾‹</li>\n<li>å› ä¸ºç±»æ§åˆ¶äº†å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥ç±»å¯ä»¥çµæ´»æ›´æ”¹å®ä¾‹åŒ–è¿‡ç¨‹</li>\n<li>å•ä½“å¯ä»¥æ§åˆ¶å±€éƒ¨å˜é‡æ±¡æŸ“</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><ul>\n<li>å¯ä»¥ç”¨å•ä¾‹æ¥åˆ’åˆ†å‘½åç©ºé—´: ä¸€äº›å¯¹è±¡æˆ‘ä»¬å¾€å¾€åªéœ€è¦ä¸€ä¸ªï¼Œå¦‚æŸäº›æ•°æ®çš„ç¼“å­˜</li>\n<li>å€ŸåŠ©å•ä¾‹æ¨¡å¼ï¼Œå¯ä»¥æŠŠä»£ç ç»„ç»‡çš„æ›´ä¸ºä¸€è‡´</li>\n</ul>\n<h4 id=\"æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\"><a href=\"#æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\" class=\"headerlink\" title=\"æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼\"></a>æœ€åŸºæœ¬çš„å•ä½“æ¨¡å¼</h4><p>ç›´æ¥å¯¼å‡ºä¸€ä¸ªæ–¹æ³•å±æ€§é›†åˆçš„å¯¹è±¡<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// commonjs å¯¼å‡º</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  getSingleton() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span> </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\"><a href=\"#ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\" class=\"headerlink\" title=\"ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹\"></a>ç”¨é—­åŒ…æ¥å®ç°å•ä¾‹</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Ins1 = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> instance = <span class=\"literal\">null</span></span><br><span class=\"line\">  <span class=\"comment\">// åˆ©ç”¨é—­åŒ…ç‰¹æ€§ä¿è¯å®ä¾‹ç§æœ‰åŒ–</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">opt</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (instance === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      instance = <span class=\"keyword\">this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> k <span class=\"keyword\">in</span> opt) &#123;</span><br><span class=\"line\">      instance[k] = opt[k]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> instance</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> i1 = <span class=\"keyword\">new</span> Ins1(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'i1'</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> i2 = <span class=\"keyword\">new</span> Ins1(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'i2'</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i1 === i2) <span class=\"comment\">// true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(i1.name) <span class=\"comment\">// i2</span></span><br></pre></td></tr></table></figure></p>\n<p>è¡¥å……ï¼šåœ¨nodeä¸­ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œè‹¥åœ¨æŸä¸ªjsæ–‡ä»¶ä¸­å¯¼å‡ºä¸€ä¸ªç±»ï¼š <code>class T {} export default new T</code> ä¹‹ååœ¨å…¶ä»–ä»»ä½•å¤–éƒ¨æ–‡ä»¶å¤šæ¬¡å¼•å…¥å…¶å®éƒ½æ˜¯ä¿è¯äº† T ç±»åªè¢«å®ä¾‹åŒ–äº†ä¸€æ¬¡è€Œä¸ä¼šè¢«å¤šæ¬¡åˆå§‹åŒ–ã€‚è¿™æ˜¯å› ä¸ºnodeéµå¾ªäº†commonjsçš„è§„èŒƒï¼Œæ‰€æœ‰æ–‡ä»¶æ¨¡å—åœ¨è¢«å¼•ç”¨æ—¶éƒ½ä¼šå…ˆå»æ¨¡å—ç³»ç»Ÿçš„ç¼“å­˜ä¸­æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›ç¼“å­˜å¦åˆ™æ‰ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œè€Œè¿™ä¸ªç¼“å­˜å…¶å®ä¹Ÿå°±é™åˆ¶äº†æ¨¡å—å†…è„šæœ¬çš„å¤šæ¬¡åˆå§‹åŒ–</p>\n<h1 id=\"ç­–ç•¥æ¨¡å¼\"><a href=\"#ç­–ç•¥æ¨¡å¼\" class=\"headerlink\" title=\"ç­–ç•¥æ¨¡å¼\"></a>ç­–ç•¥æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-1\"><a href=\"#å®šä¹‰ï¼š-1\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å°±æ˜¯è§£è€¦ï¼Œä½•ä¸ºç­–ç•¥è§£è€¦ï¼š æŒ‡çš„æ˜¯å®šä¹‰ä¸€äº›åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œç›®çš„å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨ä¸ç®—æ³•çš„å®ç°åˆ†ç¦»å¼€æ¥ã€‚è¯´ç™½äº†å°±æ˜¯ä»¥å‰è¦å¾ˆå¤šåˆ¤æ–­çš„å†™æ³•ï¼Œç°åœ¨æŠŠåˆ¤æ–­é‡Œé¢çš„å†…å®¹æŠ½ç¦»å¼€æ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå°çš„ä¸ªä½“ã€‚å¦‚å¤§é‡çš„if elseæˆ–è€…switch caseåˆ¤æ–­å½“éœ€æ±‚æ›´æ”¹æ—¶éœ€è¦æ·»åŠ å’Œæ›´æ”¹åˆ¤æ–­ï¼Œè¿™è¿èƒŒäº†è®¾è®¡æ¨¡å¼çš„å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾çš„åŸåˆ™</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š\"><a href=\"#ä¼˜ç‚¹ï¼š\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><ul>\n<li>å‡å°‘<code>command c &amp; command v</code>, æé«˜å¤ç”¨æ€§</li>\n<li>éµå¾ªå¼€é—­åŸåˆ™ï¼Œç®—æ³•ç‹¬ç«‹æ˜“äºåˆ‡æ¢ã€ç†è§£ã€æ‹“å±•</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-1\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-1\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>é’ˆå¯¹ä»£ç å¤šç§è¡Œä¸ºè®¾ç½®å¤§é‡çš„æ¡ä»¶åˆ¤æ–­æ—¶å°†æ¯ä¸€ä¸ªè¡Œä¸ºåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¯¹è±¡ã€‚æ¯ä¸€ä¸ªå¯¹è±¡è¢«ç§°ä¸ºä¸€ä¸ªç­–ç•¥ã€‚è®¾ç½®å¤šä¸ªè¿™ç§ç­–ç•¥å¯¹è±¡ï¼Œå¯ä»¥æ”¹è¿›æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œä¹Ÿæ›´å¥½çš„è¿›è¡Œå•å…ƒæµ‹è¯•</p>\n<h4 id=\"æœ€ç®€å•çš„æ‰§è¡Œ\"><a href=\"#æœ€ç®€å•çš„æ‰§è¡Œ\" class=\"headerlink\" title=\"æœ€ç®€å•çš„æ‰§è¡Œ\"></a>æœ€ç®€å•çš„æ‰§è¡Œ</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">closure</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å®šä¹‰</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> strategies = &#123;</span><br><span class=\"line\">      plus10: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arg + <span class=\"number\">10</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      plus100: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">arg</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> arg + <span class=\"number\">100</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ‰§è¡Œ</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">plus, base</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> strategies[plus](base);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> strategy = closure()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strategy(<span class=\"string\">'plus10'</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 11</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strategy(<span class=\"string\">'plus100'</span>, <span class=\"number\">1</span>)) <span class=\"comment\">// 101</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"å¯¹æ¯”åˆ†æ\"><a href=\"#å¯¹æ¯”åˆ†æ\" class=\"headerlink\" title=\"å¯¹æ¯”åˆ†æ\"></a>å¯¹æ¯”åˆ†æ</h4><p>eg.: ä»£ç æƒ…æ™¯ä¸ºè¶…å¸‚ä¿ƒé”€ï¼Œvipä¸º5æŠ˜ï¼Œè€å®¢æˆ·3æŠ˜ï¼Œæ™®é€šé¡¾å®¢æ²¡æŠ˜ï¼Œè®¡ç®—æœ€åéœ€è¦æ”¯ä»˜çš„é‡‘é¢</p>\n<p>æ„å¤§åˆ©é€»è¾‘:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">context</span> (<span class=\"params\">name, type, price</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === <span class=\"string\">'vip'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.5</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type === <span class=\"string\">'vip'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price * <span class=\"number\">0.8</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœtypeç±»å‹éå¸¸å¤šï¼Œå†…éƒ¨é€»è¾‘åˆ†åˆ«ä¹Ÿä¸åªæ˜¯ç®€å•çš„returnä¸€ä¸ªvalï¼Œé‚£å¯¹åç»­çš„ç»´æŠ¤å’Œæµ‹è¯•å°±æ˜¯ç¾éš¾ï¼Œä¸‹é¢æ‹†åˆ†é€»è¾‘ä¸ºç‹¬ç«‹å•å…ƒ:<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Vip</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = <span class=\"number\">0.5</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Old</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = <span class=\"number\">0.8</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Others</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice (price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = <span class=\"string\">''</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.strategy = <span class=\"literal\">null</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setPrice (name, strategy, price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = name</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.strategy = strategy</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.price = price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  getPrice () &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.name, <span class=\"keyword\">this</span>.strategy.getPrice(<span class=\"keyword\">this</span>.price), <span class=\"string\">'å…ƒ'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.strategy.getPrice(<span class=\"keyword\">this</span>.price)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> seller = <span class=\"keyword\">new</span> Context</span><br><span class=\"line\"><span class=\"keyword\">const</span> vip = <span class=\"keyword\">new</span> Vip</span><br><span class=\"line\"><span class=\"keyword\">const</span> old = <span class=\"keyword\">new</span> Old</span><br><span class=\"line\"><span class=\"keyword\">const</span> other = <span class=\"keyword\">new</span> Others</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'zs'</span>, vip, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ls'</span>, old, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ww'</span>, other, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// zs 500 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ls 800 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ww 1000 å…ƒ</span></span><br></pre></td></tr></table></figure></p>\n<p>æ˜¾ç„¶é€»è¾‘å¤šè€Œå¤æ‚æ—¶å¯ä»¥æå¤§æé«˜ä»£ç å¯è¯»æ€§ä»¥åŠå‡å°‘ç»´æŠ¤æˆæœ¬</p>\n<p>è¡¥å……ï¼šä¸Šè¿°ä¸æ–­é‡å¤çš„ä»£ç ç‰‡æ®µçœ‹èµ·æ¥éå¸¸ä¸‘é™‹ï¼Œå…¶å®å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å®ç°æ›´ç®€æ´çš„å†™æ³•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šä¹‰çˆ¶ç±»</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(discount) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸ä¼ ä¸ºåŸä»·</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.discount = discount || <span class=\"number\">1</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  getPrice(price) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.discount === <span class=\"number\">1</span></span><br><span class=\"line\">      ? price</span><br><span class=\"line\">      : <span class=\"keyword\">this</span>.discount * price</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å£°æ˜å­ç±»</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sub</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¯ä»¥è‡ªå®šä¹‰æ›´å¤šä¸åŒçº§åˆ«é¡¾å®¢ä¸åŒéœ€æ±‚</span></span><br><span class=\"line\"><span class=\"comment\">// class Test extend Handler &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   getGifts() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     if (this.discount &lt; 1) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//       // èµ é€èµ å“</span></span><br><span class=\"line\"><span class=\"comment\">//     &#125;</span></span><br><span class=\"line\"><span class=\"comment\">//   &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"><span class=\"comment\">// const master = new Test(0.1)</span></span><br><span class=\"line\"><span class=\"comment\">// master.getGifts()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Contextç±»åŒä¸Šæ–¹ä¾¿ç»Ÿä¸€æ¥å£è¾“å‡º</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Context</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> seller = <span class=\"keyword\">new</span> Context</span><br><span class=\"line\"><span class=\"keyword\">const</span> vip = <span class=\"keyword\">new</span> Sub(<span class=\"number\">0.5</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> old = <span class=\"keyword\">new</span> Sub(<span class=\"number\">0.8</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> other = <span class=\"keyword\">new</span> Sub</span><br><span class=\"line\"></span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'zs'</span>, vip, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ls'</span>, old, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\">seller.setPrice(<span class=\"string\">'ww'</span>, other, <span class=\"number\">1000</span>)</span><br><span class=\"line\">seller.getPrice()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// zs 500 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ls 800 å…ƒ</span></span><br><span class=\"line\"><span class=\"comment\">// ww 1000 å…ƒ</span></span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ç»“æœä¸€è‡´</p>\n<h1 id=\"ä»£ç†æ¨¡å¼\"><a href=\"#ä»£ç†æ¨¡å¼\" class=\"headerlink\" title=\"ä»£ç†æ¨¡å¼\"></a>ä»£ç†æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-2\"><a href=\"#å®šä¹‰ï¼š-2\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨<br>è‘—åçš„ä»£ç†æ¨¡å¼ä¾‹å­ä¸ºå¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰æŒ‡é’ˆå¯¹è±¡<br>å¦å¤–ä»£ç†æ¨¡å¼è¿˜å¯åˆ†ä¸ºï¼š</p>\n<ul>\n<li>è™šæ‹Ÿä»£ç†ï¼šæŠŠä¸€äº›å¼€é”€å¾ˆå¤§çš„å¯¹è±¡ï¼Œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œå½“å¯¹è±¡åœ¨åˆ›å»ºå‰æˆ–åˆ›å»ºä¸­æ—¶ï¼Œç”±è™šæ‹Ÿä»£ç†æ¥æ‰®æ¼”å¯¹è±¡çš„æ›¿èº«ï¼›å¯¹è±¡åˆ›å»ºåï¼Œä»£ç†å°±ä¼šå°†è¯·æ±‚ç›´æ¥å§”æ‰˜ç»™å¯¹è±¡</li>\n<li>ä¿æŠ¤ä»£ç†ï¼šç”¨äºæ§åˆ¶ä¸åŒæƒé™çš„å¯¹è±¡å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®</li>\n<li>ç¼“å­˜ä»£ç†: ç¼“å­˜ä»£ç†å¯ä»¥ä½œä¸ºä¸€äº›å¼€é”€å¤§çš„è¿ç®—ç»“æœæä¾›æš‚æ—¶çš„å­˜å‚¨ï¼Œä¸‹æ¬¡è¿ç®—æ—¶ï¼Œå¦‚æœä¼ é€’è¿›æ¥çš„å‚æ•°è·Ÿä¹‹å‰ä¸€è‡´ï¼Œåˆ™å¯ä»¥ç›´æ¥è¿”å›å‰é¢å­˜å‚¨çš„è¿ç®—ç»“æœ</li>\n</ul>\n<h3 id=\"ä¼˜ç‚¹ï¼š-1\"><a href=\"#ä¼˜ç‚¹ï¼š-1\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>ç‹¬ç«‹èŒè´£å½’å±ï¼Œä¾¿äºç»´æŠ¤æµ‹è¯•</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-2\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-2\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>æ¯”å¦‚å›¾ç‰‡çš„æ‡’åŠ è½½ï¼Œæ•°æ®ç¼“å­˜ç­‰</p>\n<h4 id=\"è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\"><a href=\"#è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\" class=\"headerlink\" title=\"è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½\"></a>è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> imgSet = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> node = <span class=\"keyword\">new</span> Image</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.body.append(node)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">src</span>) </span>&#123;</span><br><span class=\"line\">    node.src = src</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> proxyImg = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> _img = <span class=\"keyword\">new</span> Image</span><br><span class=\"line\"></span><br><span class=\"line\">  _img.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setTimeout(imgSet, <span class=\"number\">2000</span>, <span class=\"keyword\">this</span>.src)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">src</span>) </span>&#123;</span><br><span class=\"line\">    imgSet(<span class=\"string\">'https://yphoto.eryufm.cn/upload/assets/jump.gif'</span>)</span><br><span class=\"line\">    _img.src = src</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"><span class=\"comment\">// call</span></span><br><span class=\"line\">proxyImg(<span class=\"string\">`https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&amp;quality=100&amp;size=b4000_4000&amp;sec=1551174639&amp;di=90b4757f68c9480f78c132c930c1df10&amp;src=http://desk.fd.zol-img.com.cn/t_s960x600c5/g5/M00/02/02/ChMkJ1bKxkmIObywAArTTfACinwAALHjACDZuIACtNl408.jpg`</span>)</span><br></pre></td></tr></table></figure>\n<h4 id=\"ä¿æŠ¤ä»£ç†\"><a href=\"#ä¿æŠ¤ä»£ç†\" class=\"headerlink\" title=\"ä¿æŠ¤ä»£ç†\"></a>ä¿æŠ¤ä»£ç†</h4><p>å¯¹è±¡aéœ€è¦ç»™å¯¹è±¡cå‘é€ä¿¡æ¯ï¼Œä¸ºäº†ä¿è¯aå¯¹cæ˜¯ä¸å¯è§ï¼Œå¯ç”¨å¯¹è±¡bä»£ç†è½¬å‘<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// filter some no use or unneed requestions or data</span></span><br><span class=\"line\"><span class=\"comment\">// A  ---&gt; B(proxy) ----&gt; C</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> a = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'a'</span>,</span><br><span class=\"line\">  send (target, info) &#123;</span><br><span class=\"line\">    target.receive(info)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> c = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'c'</span>,</span><br><span class=\"line\">  receive (target, info) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'c receive '</span>, info, <span class=\"string\">' from '</span>, target.name)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> b = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">'b'</span>,</span><br><span class=\"line\">  receive (info) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (info) &#123;</span><br><span class=\"line\">      c.receive(<span class=\"keyword\">this</span>, info)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">a.send(b, <span class=\"string\">'good morning'</span>)</span><br><span class=\"line\">a.send(b, <span class=\"string\">''</span>)</span><br><span class=\"line\">a.send(b, <span class=\"string\">'send again'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// c receive good morning from b</span></span><br><span class=\"line\"><span class=\"comment\">// c receive send again from b</span></span><br></pre></td></tr></table></figure></p>\n<p>ä¸Šé¢è¡¨ç¤ºä¸€ä¸ªæœ€ç®€å•çš„ä¿æŠ¤ä»£ç†</p>\n<h4 id=\"ç¼“å­˜ä»£ç†\"><a href=\"#ç¼“å­˜ä»£ç†\" class=\"headerlink\" title=\"ç¼“å­˜ä»£ç†\"></a>ç¼“å­˜ä»£ç†</h4><p>é¡¾åæ€ä¹‰å°±æ˜¯ç¼“å­˜ç›¸å…³çš„ä»£ç†</p>\n<p>æœ‰ä¸€ä¸ªäºŒçº§åˆ«è”åŠ¨çš„æ ‡ç­¾åˆ—è¡¨ï¼Œç¬¬äºŒçº§çš„å„æœ‰è‡ªå·±æ‰€å±çš„å¤šä¸ªæ ‡ç­¾æ ¹æ®ç¬¬ä¸€çº§çš„å‚æ•°æ¥å‘é€æŒ‡å®šè¯·æ±‚æ¥è·å–ï¼Œå¦‚æœæƒ³è¦è¾¾åˆ°ç‚¹å‡»ç¬¬ä¸€çº§åˆ—è¡¨è¿…é€Ÿå±•ç¤ºå‡ºç›¸å…³çš„ç¬¬äºŒçº§æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿç©ºé—²æ—¶é¢„å…ˆå°†æ‰€æœ‰æ ‡ç­¾å…¨éƒ¨è·å–å¹¶ç¼“å­˜<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å­˜å‚¨æ‰€æœ‰æ ‡ç­¾</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> tags</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> sendApiGetTags = <span class=\"function\"><span class=\"params\">index</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ajax.get('/api', &#123; index &#125;)</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> proxyCache = <span class=\"function\">(<span class=\"params\"><span class=\"keyword\">async</span> (</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> allTagsCache = &#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> number = <span class=\"number\">5</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> all = []</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> index = <span class=\"number\">0</span>; index &lt; number; index++) &#123;</span><br><span class=\"line\">    all.push(sendApiGetTags(&#123;</span><br><span class=\"line\">      ...params,</span><br><span class=\"line\">      index</span><br><span class=\"line\">    &#125;))</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> list = <span class=\"keyword\">await</span> <span class=\"built_in\">Promise</span>.all(all)</span><br><span class=\"line\"></span><br><span class=\"line\">  list.forEach(<span class=\"function\">(<span class=\"params\">res, i</span>) =&gt;</span> allTagsCache[i] = res)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> allTagsCache</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> setTags = <span class=\"keyword\">async</span> index =&gt; &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç¼“å­˜ä¸­æœ‰ç›´æ¥æ‹¿</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (proxyCache[index]) &#123;</span><br><span class=\"line\">    tags = proxyCache[index]</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ç¼“å­˜ä¸­æ²¡æœ‰åˆ™é‡å‘è¯·æ±‚</span></span><br><span class=\"line\">    tags = <span class=\"keyword\">await</span> sendApiGetTags(index)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"å‘å¸ƒè®¢é˜…æ¨¡å¼\"><a href=\"#å‘å¸ƒè®¢é˜…æ¨¡å¼\" class=\"headerlink\" title=\"å‘å¸ƒè®¢é˜…æ¨¡å¼\"></a>å‘å¸ƒè®¢é˜…æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-3\"><a href=\"#å®šä¹‰ï¼š-3\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè®¢é˜…è€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨è‡ªèº«çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è®¢é˜…è€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±çš„çŠ¶æ€ã€‚<br>è‡³äºå‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸æ˜¯åŒä¸€æ ·ä¸œè¥¿ä¸åŒçš„äººå„æœ‰çœ‹æ³•</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-2\"><a href=\"#ä¼˜ç‚¹ï¼š-2\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>è®¢é˜…è€…å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚å½“æŸç§Actionè¢«è§¦å‘æ—¶å®Œæˆè‡ªå·±çš„è°ƒåº¦</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-3\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-3\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>AngularJsçš„å¹¿æ’­ã€vueçš„eventbusç­‰</p>\n<h4 id=\"æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\"><a href=\"#æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\" class=\"headerlink\" title=\"æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»\"></a>æ ¹æ®ä¸»ä½“æ„å»ºå‘å¸ƒè®¢é˜…çš„åŸºç±»</h4><p>æ„é€ å‘å¸ƒè€…åŸºç±»<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Publisher</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> () &#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¢é˜…å‘å¸ƒè€…çš„é˜Ÿåˆ— å­˜å‚¨æ¯ä¸ªè®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subscribers = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  deliver (data) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å‘å¸ƒæ¶ˆæ¯ è°ƒç”¨è®¢é˜…è€…çš„å›è°ƒ å‘ŠçŸ¥è®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.subscribers.forEach(<span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> fn.shot(data))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ„é€ è®¢é˜…è€…åŸºç±»<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observer</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span> (call) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¼ å…¥è®¢é˜…å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.shot = call</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  subscribe (publisher) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!publisher.subscribers.some(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> v.shot === <span class=\"keyword\">this</span>.shot)) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'è®¢é˜…è¯¥æ¶ˆæ¯'</span>)</span><br><span class=\"line\">      <span class=\"comment\">// åˆ¤æ–­å½“å‰è®¢é˜…è€…æ˜¯å¦è®¢é˜…</span></span><br><span class=\"line\">      publisher.subscribers.push(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  unsubscribe (publisher) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç§»é™¤å½“å‰è®¢é˜…è€…</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'å–æ¶ˆè®¢é˜…'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    publisher.subscribers = publisher.subscribers.filter(<span class=\"function\"><span class=\"params\">v</span> =&gt;</span> v.shot !== <span class=\"keyword\">this</span>.shot)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> pub = <span class=\"keyword\">new</span> Publisher</span><br><span class=\"line\"><span class=\"keyword\">const</span> pub2 = <span class=\"keyword\">new</span> Publisher</span><br><span class=\"line\"><span class=\"keyword\">const</span> obs = <span class=\"keyword\">new</span> Observer(<span class=\"function\"><span class=\"params\">deliver</span> =&gt;</span> <span class=\"built_in\">console</span>.log(deliver))</span><br><span class=\"line\"></span><br><span class=\"line\">obs.subscribe(pub) <span class=\"comment\">// è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br><span class=\"line\">obs.subscribe(pub2) <span class=\"comment\">// è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br><span class=\"line\"></span><br><span class=\"line\">pub.deliver(<span class=\"string\">'pub deliver first message'</span>) <span class=\"comment\">// pub deliver first message</span></span><br><span class=\"line\">pub2.deliver(<span class=\"string\">'pub2 deliver first message'</span>) <span class=\"comment\">// pub2 deliver first message</span></span><br><span class=\"line\"></span><br><span class=\"line\">obs.unsubscribe(pub) <span class=\"comment\">// å–æ¶ˆè®¢é˜…</span></span><br><span class=\"line\">pub.deliver(<span class=\"string\">'pub deliver second message'</span>) <span class=\"comment\">//</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"è£…é¥°è€…æ¨¡å¼\"><a href=\"#è£…é¥°è€…æ¨¡å¼\" class=\"headerlink\" title=\"è£…é¥°è€…æ¨¡å¼\"></a>è£…é¥°è€…æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-4\"><a href=\"#å®šä¹‰ï¼š-4\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>è£…é¥°æ¨¡å¼æŒ‡çš„æ˜¯åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-3\"><a href=\"#ä¼˜ç‚¹ï¼š-3\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><ul>\n<li>è£…é¥°å¯¹è±¡å’ŒçœŸå®å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ã€‚è¿™æ ·å®¢æˆ·ç«¯å¯¹è±¡å°±èƒ½ä»¥å’ŒçœŸå®å¯¹è±¡ç›¸åŒçš„æ–¹å¼å’Œè£…é¥°å¯¹è±¡äº¤äº’</li>\n<li>è£…é¥°å¯¹è±¡å¯ä»¥åœ¨è½¬å‘è¿™äº›è¯·æ±‚ä»¥å‰æˆ–ä»¥åå¢åŠ ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨è¿è¡Œæ—¶ï¼Œä¸ç”¨ä¿®æ”¹ç»™å®šå¯¹è±¡çš„ç»“æ„å°±å¯ä»¥åœ¨å¤–éƒ¨å¢åŠ é™„åŠ çš„åŠŸèƒ½ã€‚åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°å¯¹ç»™å®šç±»çš„åŠŸèƒ½æ‰©å±•</li>\n</ul>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-4\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-4\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><ul>\n<li>éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£</li>\n<li>éœ€è¦åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤é”€</li>\n<li>ä¸å¿…æ”¹åŠ¨åŸæœ¬çš„é€»è¾‘é€ æˆä¸å¯çŸ¥é—®é¢˜</li>\n</ul>\n<h4 id=\"ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\"><a href=\"#ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\" class=\"headerlink\" title=\"ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­\"></a>ç»™æ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ·»åŠ è°ƒç”¨å‰å’Œè°ƒç”¨åçš„é’©å­</h4><p>æ™®é€šå‡½æ•°ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(msg, <span class=\"string\">' right now'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">fn(<span class=\"string\">'let go'</span>) <span class=\"comment\">// lets go right now</span></span><br></pre></td></tr></table></figure></p>\n<p>æˆ‘ä»¬çŸ¥é“JSä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯åŸºäºçˆ¶ç±» <code>Function</code> ç”Ÿæˆçš„ï¼Œæ‰€ä»¥ä¼šç»§æ‰¿çˆ¶ç±»åŸå‹çš„æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å°†å‡½æ•°çš„é’©å­æŒ‚åœ¨çˆ¶ç±»çš„åŸå‹ä¸Šå³å¯ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‰§è¡Œå‰</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.before = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">call</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fn = <span class=\"keyword\">this</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// è¿”å›ä½“æœ¬èº«ä¹Ÿæ˜¯å‡½æ•°æ‰€ä»¥æ”¯æŒç»§ç»­è°ƒç”¨é’©å­</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨é’©å­ï¼ŒåŒæ—¶å‚æ•°ä¼ é€’åˆ°é’©å­å†…</span></span><br><span class=\"line\">    call.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">    <span class=\"comment\">// è°ƒç”¨è‡ªèº«</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æ‰§è¡Œå</span></span><br><span class=\"line\"><span class=\"comment\">// å’Œ before åŒç†</span></span><br><span class=\"line\"><span class=\"built_in\">Function</span>.prototype.after = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">call</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fn = <span class=\"keyword\">this</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> res = fn.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    call.apply(<span class=\"keyword\">this</span>, <span class=\"built_in\">arguments</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// è¿”å›è‡ªèº«çš„è¿”å›å€¼</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> res</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é‡æ–°åŒ…è£… fn</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(msg, <span class=\"string\">' right now'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> decoratorFn = fn.before(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">msg</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'when we go,'</span>, msg)</span><br><span class=\"line\">&#125;).after(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">msg</span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'had to go'</span>, msg)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">decoratorFn(<span class=\"string\">'lets go'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// out put:</span></span><br><span class=\"line\"><span class=\"comment\">// when we go, right now</span></span><br><span class=\"line\"><span class=\"comment\">// lets go, right now</span></span><br><span class=\"line\"><span class=\"comment\">// had to go, right now</span></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\"><a href=\"#èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\" class=\"headerlink\" title=\"èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼\"></a>èŒè´£é“¾ï¼ˆè´£ä»»é“¾ï¼‰æ¨¡å¼</h1><h3 id=\"å®šä¹‰ï¼š-5\"><a href=\"#å®šä¹‰ï¼š-5\" class=\"headerlink\" title=\"å®šä¹‰ï¼š\"></a>å®šä¹‰ï¼š</h3><p>å®ƒæ˜¯ä¸€ç§é“¾å¼ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½ä¸¤ç§æ“ä½œï¼Œè¦ä¹ˆå¤„ç†è¯¥è¯·æ±‚åœæ­¢è¯¥è¯·æ±‚æ“ä½œï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†è¯·æ±‚</p>\n<h3 id=\"ä¼˜ç‚¹ï¼š-4\"><a href=\"#ä¼˜ç‚¹ï¼š-4\" class=\"headerlink\" title=\"ä¼˜ç‚¹ï¼š\"></a>ä¼˜ç‚¹ï¼š</h3><p>èŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†</p>\n<h3 id=\"åº”ç”¨åœºæ™¯ï¼š-5\"><a href=\"#åº”ç”¨åœºæ™¯ï¼š-5\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯ï¼š\"></a>åº”ç”¨åœºæ™¯ï¼š</h3><p>JS ä¸­çš„äº‹ä»¶å†’æ³¡ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰å°±æ˜¯ç»å…¸æ¡ˆä¾‹</p>\n<h4 id=\"å®ä¾‹åˆ†æ\"><a href=\"#å®ä¾‹åˆ†æ\" class=\"headerlink\" title=\"å®ä¾‹åˆ†æ\"></a>å®ä¾‹åˆ†æ</h4><p>éƒ¨é—¨é‡‡è´­ç‰©å“ä¸åŒé‡‘é¢éœ€è¦èµ°ä¸åŒèŒä½çš„æµç¨‹å®¡æ‰¹ï¼Œé‡‡è´­éƒ¨ç»ç†å¯è‡ªä¸»å†³å®š1wä»¥å†…çš„é‡‡è´­ï¼Œæ€»ç»ç†å¯ä»¥å†³å®š10wä»¥å†…çš„é‡‡è´­ï¼Œè‘£äº‹é•¿å†³å®š100wä»¥å†…çš„é‡‡è´­<br>ä¸‹é¢åˆ†åˆ«æŠ½è±¡å¤„ç†è€…æ„é€ åŸºç±»</p>\n<p>è´£ä»»é“¾è°ƒåº¦ä¸­å¿ƒï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  setNext(_handler) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.next = _handler</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  handleRequest(money) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>é‡‡è´­éƒ¨ç»ç†ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CGBHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &lt; <span class=\"number\">10000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'1wä»¥å†…ï¼ŒåŒæ„'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next.handleRequest(money)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>æ€»ç»ç†ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZJLHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 10w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &lt; <span class=\"number\">100000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'10wä»¥å†…ï¼ŒåŒæ„'</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.next) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.next.handleRequest(money)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>è‘£äº‹é•¿ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DSZHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">  handleRequest(money) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 100w</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (money &gt;= <span class=\"number\">100000</span>)&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†'</span>)</span><br><span class=\"line\">      <span class=\"comment\">//å¤„ç†å…¶ä»–é€»è¾‘</span></span><br><span class=\"line\">    &#125; </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>å°è£…å®¢æˆ·ç«¯æ¥å£ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> dispatch = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">client</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cgb = <span class=\"keyword\">new</span> CGBHandler()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> zjl = <span class=\"keyword\">new</span> ZJLHandler()</span><br><span class=\"line\">  <span class=\"keyword\">const</span> dsz = <span class=\"keyword\">new</span> DSZHandler()</span><br><span class=\"line\"></span><br><span class=\"line\">  cgb.setNext(zjl)</span><br><span class=\"line\">  zjl.setNext(dsz)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> cgb.handleRequest.bind(cgb)</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure></p>\n<p>æµ‹è¯•ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">dispath(<span class=\"number\">800000</span>)</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†1wä»¥å†…çš„é‡‡è´­</span></span><br><span class=\"line\"><span class=\"comment\">// é‡‘é¢å¤ªå¤§ï¼Œåªèƒ½å¤„ç†10wä»¥å†…çš„é‡‡è´­</span></span><br><span class=\"line\"><span class=\"comment\">// 10ä¸‡ä»¥ä¸Šçš„æˆ‘æ¥å¤„ç†</span></span><br><span class=\"line\"></span><br><span class=\"line\">dispath(<span class=\"number\">7000</span>)</span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// 1wä»¥å†…ï¼ŒåŒæ„</span></span><br></pre></td></tr></table></figure></p>\n<p>è¡¥å……ï¼š</p>\n<ul>\n<li><p>çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚è¯·æ±‚åœ¨è¿™äº›å¯¹è±¡é“¾ä¸­å¿…é¡»è¢«å¤„ç†ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†å¯¹è±¡ï¼Œè¦ä¹ˆåªå¤„ç†è¯·æ±‚ï¼Œè¦ä¹ˆæŠŠè¯·æ±‚è½¬å‘ç»™ä¸‹ä¸ªèŠ‚ç‚¹å¯¹è±¡å¤„ç†</p>\n</li>\n<li><p>ä¸çº¯çš„è´£ä»»é“¾ï¼šè¦æ±‚åœ¨è´£ä»»é“¾é‡Œä¸ä¸€å®šä¼šæœ‰å¤„ç†ç»“æ„ï¼Œè€Œä¸”ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œå³å¯ä»¥å¤„ç†éƒ¨åˆ†è¯·æ±‚ï¼Œå¹¶æŠŠè¯·æ±‚å†è½¬å‘ä¸‹ä¸ªèŠ‚ç‚¹å¤„ç†</p>\n</li>\n</ul>\n<p>.<br>.<br>.<br>.<br>.<br>.<br>æœªå®Œå¾…ç»­â€¦ğŸ‘</p>"},{"title":"åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹","date":"2019-02-22T11:00:00.000Z","_content":"\nåè¡Œä»£ç å®ç° `koa2` æ´‹è‘±æ¨¡å‹\n\n<!--more-->\n\n#### æ´‹è‘±å›¾æ¨¡å‹\n![avatar](/onion.png)\n\nkoa2ä¸Šç‹¬ç‰¹çš„ä¸­é—´ä»¶æµç¨‹æ§åˆ¶ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ´‹è‘±æ¨¡å‹\n\n# è¿è¡Œ koa2 demo\n```js\nconst Koa = require('koa2')\n\nconst app = new Koa()\n\napp.use(async (ctx, next)=>{\n    console.log(1, ' start')\n    await next()\n    console.log(1, ' end')\n})\n\napp.use(async (ctx, next) => {\n    console.log(2, ' start')\n    await next()\n    console.log(2, ' end')\n})\napp.use(async (ctx, next) => {\n    console.log(3, ' start')\n    await next()\n    console.log(3, ' end')\n})\n\napp.listen(3000)\n```\nè¾“å‡ºç»“æœï¼š\n```bash\n1 start\n2 start\n3 start\n3 end\n2 end\n1 end\n```\n\nå±•ç°å¦‚ä¸Šå›¾æ´‹è‘±å¼çš„è¾“å‡ºç»“æœ\n\n# å½’çº³\n\næ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å°è£…ï¼Œè¦æƒ³è¾¾æˆæ´‹è‘±æ¨¡å‹å¼çš„æµç¨‹æ§åˆ¶ï¼Œä¸»è¦çœ‹ä¸Šé¢demoä¸­ callback çš„ç¬¬äºŒä¸ªå‚æ•° next æ–¹æ³•ï¼ˆctxæš‚æ—¶å’Œæœ¬æ–‡å†…å®¹æ— å…³ï¼‰ï¼Œä¸€æ­¥ä¸€æ­¥æ¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ€è€ƒï¼š\n- é¦–å…ˆå˜ä¸ºæœ€ç®€caseï¼šåªæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°\n- é‚£ä¹ˆå¦‚æœæƒ³è¦ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œnextæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬è‹¥æ˜¯æŠŠnextæ–¹æ³•æœ¬èº«å°±æ˜¯ä½œä¸ºç¬¬äºŒä¸ªä¸­é—´ä»¶å‡½æ•°è¿›è¡Œè°ƒç”¨å°±ä¼šå¾—åˆ° `1 start -> 2 start -> 2 end -> 1 end` çš„ç»“æœ\n- åŒç†å¦‚æœæ˜¯ä¸‰ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç¬¬ä¸‰ä¸ªä¸­é—´ä»¶å½“åšç¬¬äºŒä¸ªä¸­é—´ä»¶çš„ next æ–¹æ³•ï¼Œå†æŠŠç¬¬äºŒä¸ªä¸­é—´ä»¶å½“åšç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„ next å›è°ƒ\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\nå’Œä¹‹å‰çš„ä¸€ç¯‡ [åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹](http://localhost:4000/2019/02/21/do%20something/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%92%8C%E9%80%92%E5%BD%92%EF%BC%9A%E4%BB%8E%E8%99%8E%E7%BE%8A%E8%8D%89%E5%BC%80%E5%A7%8B/#%E4%BB%8E%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%83%85%E5%86%B5%E5%85%A5%E6%89%8B) ç±»ä¼¼è¿›è¡Œç®€å•çš„å½’çº³ä¹‹åå¾—å‡ºæ€è·¯ï¼Œæœ€å…³é”®çš„æµç¨‹æ§åˆ¶é—®é¢˜æ—¢ç„¶æœ‰äº†æ€è·¯ä¸‹é¢å¼€å§‹å°è£…ä»£ç \n\n# ä¸‰æ­¥å®Œæˆå°è£…\n\nç¬¬ä¸€æ­¥ï¼šé¦–å…ˆæ„é€ ä¸€ä¸ªåŸºæœ¬çš„Appæ„é€ ç±»è¿›è¡Œæ–¹æ³•æŒ‚è½½ä¾èµ–æ”¶é›†ç­‰, æ‹¥æœ‰ä¸€ä¸ª use æ–¹æ³•å¯¹ä¸­é—´ä»¶å‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå»ºç«‹ä¸€ä¸ªå­˜å‚¨æ ˆ middleware ç”¨æ¥å­˜æ”¾æ”¶é›†çš„ä¾èµ–ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```js\nclass App {\n  constructor() {\n    this.middleware = []\n  }\n  use(fn) {\n    this.middleware.push(fn)\n  }\n}\n```\n\nç¬¬äºŒæ­¥ï¼šæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ª compose å‡½æ•° å¯¹æ”¶é›†åˆ°çš„ä¾èµ–è¿›è¡Œå¤„ç†ï¼Œå‚æ•°æ˜¯æ”¶é›†çš„ä¾èµ–æ ˆï¼Œè¿”å›ä¸€ä¸ªé€šè¿‡ä¸€å±‚å±‚ä¸­é—´ä»¶å‡½æ•°åŒ…è£…çš„æ–°å‡½æ•°ï¼Œæ•°ç»„æœ‰ä¸ª reduce æ–¹æ³•å¯ä»¥å¾ˆè½»æ˜“çš„å¸®æˆ‘ä»¬åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯éœ€è¦æŒ‰ç…§æ”¶é›†çš„ä¸­é—´ä»¶çš„é¡ºåºæ‰§è¡Œæ¯ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„å½’çº³å¦‚æœæŒ‰1 -> 2 -> 3çš„æµç¨‹é¡ºåºéå†æ˜¾ç„¶å°±ä¼šå°†æœ€æ—©æ”¶é›†çš„ä¾èµ–åŒ…è£…åœ¨æœ€å†…å±‚ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æœ‰ reduceRightğŸ˜„ï¼Œ ä»£ç å¦‚ä¸‹ï¼š\n```js\nconst compose = middlewares =>\n  middlewares.reduceRight((oldNext, fn) =>\n    createNext(fn, oldNext), async () => Promise.resolve())\n```\n\nç¬¬ä¸‰æ­¥ï¼šæ˜¾ç„¶æ¥ä¸‹æ¥æœ€å…³é”®çš„å°±æ˜¯å¯¹ä¸Šé¢ compose å‡½æ•°ä¸­çš„ createNext æ–¹æ³•è¿›è¡Œå°è£…ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œnextæ–¹æ³•æ˜¯å¯¹ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°çš„å¤„ç†ï¼Œä¸€ä¸ªå‚æ•°æ˜¯ä¸­é—´ä»¶å‡½æ•°ï¼Œè€Œå¦ä¸€ä¸ªæ˜¾ç„¶å°±æ˜¯é‚£ä¸ªnextæ–¹æ³•ï¼ŒåŒ…è£…è°ƒç”¨åè¿”å›ä¸€ä¸ªæ–°çš„nextå‡½æ•°ä¼ é€’åˆ°ä¸‹ä¸€å±‚åŒ…è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```js\nconst createNext = (middleware, oldNext) =>\n  async () =>\n    await middleware(oldNext)\n```\n\nä»¥ä¸ŠåŸºæœ¬çš„å°è£…å·²ç»å®Œæˆï¼Œæ ¸å¿ƒä»£ç åªæœ‰ middlewares å’Œ createNext ä¸¤ä¸ªå‡½æ•°ï¼Œåªæœ‰6è¡Œï¼Œä¸‹é¢å¯¹ä¸Šé¢æ•´ä¸ªæµç¨‹è¿›è¡Œèšåˆæµ‹è¯•\n\n# æµ‹è¯•\n```js\nclass App {\n  constructor() {\n    this.middleware = []\n  }\n  use(fn) {\n    this.middleware.push(fn)\n  }\n}\n\nconst app = new App\n\napp.use(async function m1(next) {\n  console.log('m1')\n  await next()\n  console.log('m1 end')\n})\n\napp.use(async function m2(next) {\n  console.log('m2')\n  await next()\n  console.log('m2 end')\n})\n\napp.use(async function m3(next) {\n  console.log('m3')\n  await next()\n  console.log('m3 end')\n})\n\n\nconst createNext = (middleware, oldNext) =>\n  async () =>\n    await middleware(oldNext)\n\nconst compose = middlewares =>\n  middlewares.reduceRight((oldNext, fn) =>\n    createNext(fn, oldNext), async () => Promise.resolve())\n\ncompose(app.middleware)()\n\n// output:\n// m1\n// m2\n// m3\n// m3 end\n// m2 end\n// m1 end\n```\n\nè¾¾åˆ°é¢„æœŸç»“æœahhhhhğŸ’\n\n# summary\n\nå½“ç„¶è¿™é‡Œåªæ˜¯ç®€å•çš„å°è£…ä¸€ä¸‹ï¼Œå…³äºä¸Šä¸‹æ–‡ä¼ é€’é”™è¯¯æ•è·ä¹‹ç±»éƒ½æ²¡åšï¼Œä½†æ˜¯å·²ç»å®Œæˆä¸€ä¸ªæ ‡å‡†çš„æ´‹è‘±æ¨¡å‹çš„æµç¨‹æ§åˆ¶äº†ï¼Œä¸‹æ¬¡æœ‰æœºä¼šè®²è§£å®Œæ•´çš„å°è£… koa2","source":"_posts/writeSomething/koa2OnionModel.md","raw":"---\ntitle: åè¡Œä»£ç å®ç°Koa2æ´‹è‘±æ¨¡å‹\ntags:\n  - å°è£…\n  - koa\n  - æ´‹è‘±æ¨¡å‹\ndate: 2019-02-22 19:00:00\ncategories: å°è£…\n---\n\nåè¡Œä»£ç å®ç° `koa2` æ´‹è‘±æ¨¡å‹\n\n<!--more-->\n\n#### æ´‹è‘±å›¾æ¨¡å‹\n![avatar](/onion.png)\n\nkoa2ä¸Šç‹¬ç‰¹çš„ä¸­é—´ä»¶æµç¨‹æ§åˆ¶ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ´‹è‘±æ¨¡å‹\n\n# è¿è¡Œ koa2 demo\n```js\nconst Koa = require('koa2')\n\nconst app = new Koa()\n\napp.use(async (ctx, next)=>{\n    console.log(1, ' start')\n    await next()\n    console.log(1, ' end')\n})\n\napp.use(async (ctx, next) => {\n    console.log(2, ' start')\n    await next()\n    console.log(2, ' end')\n})\napp.use(async (ctx, next) => {\n    console.log(3, ' start')\n    await next()\n    console.log(3, ' end')\n})\n\napp.listen(3000)\n```\nè¾“å‡ºç»“æœï¼š\n```bash\n1 start\n2 start\n3 start\n3 end\n2 end\n1 end\n```\n\nå±•ç°å¦‚ä¸Šå›¾æ´‹è‘±å¼çš„è¾“å‡ºç»“æœ\n\n# å½’çº³\n\næ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å°è£…ï¼Œè¦æƒ³è¾¾æˆæ´‹è‘±æ¨¡å‹å¼çš„æµç¨‹æ§åˆ¶ï¼Œä¸»è¦çœ‹ä¸Šé¢demoä¸­ callback çš„ç¬¬äºŒä¸ªå‚æ•° next æ–¹æ³•ï¼ˆctxæš‚æ—¶å’Œæœ¬æ–‡å†…å®¹æ— å…³ï¼‰ï¼Œä¸€æ­¥ä¸€æ­¥æ¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ€è€ƒï¼š\n- é¦–å…ˆå˜ä¸ºæœ€ç®€caseï¼šåªæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°\n- é‚£ä¹ˆå¦‚æœæƒ³è¦ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œnextæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬è‹¥æ˜¯æŠŠnextæ–¹æ³•æœ¬èº«å°±æ˜¯ä½œä¸ºç¬¬äºŒä¸ªä¸­é—´ä»¶å‡½æ•°è¿›è¡Œè°ƒç”¨å°±ä¼šå¾—åˆ° `1 start -> 2 start -> 2 end -> 1 end` çš„ç»“æœ\n- åŒç†å¦‚æœæ˜¯ä¸‰ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç¬¬ä¸‰ä¸ªä¸­é—´ä»¶å½“åšç¬¬äºŒä¸ªä¸­é—´ä»¶çš„ next æ–¹æ³•ï¼Œå†æŠŠç¬¬äºŒä¸ªä¸­é—´ä»¶å½“åšç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„ next å›è°ƒ\n\n.\n\n.\n\n.\n\n.\n\n.\n\n.\nå’Œä¹‹å‰çš„ä¸€ç¯‡ [åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹](http://localhost:4000/2019/02/21/do%20something/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%92%8C%E9%80%92%E5%BD%92%EF%BC%9A%E4%BB%8E%E8%99%8E%E7%BE%8A%E8%8D%89%E5%BC%80%E5%A7%8B/#%E4%BB%8E%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%83%85%E5%86%B5%E5%85%A5%E6%89%8B) ç±»ä¼¼è¿›è¡Œç®€å•çš„å½’çº³ä¹‹åå¾—å‡ºæ€è·¯ï¼Œæœ€å…³é”®çš„æµç¨‹æ§åˆ¶é—®é¢˜æ—¢ç„¶æœ‰äº†æ€è·¯ä¸‹é¢å¼€å§‹å°è£…ä»£ç \n\n# ä¸‰æ­¥å®Œæˆå°è£…\n\nç¬¬ä¸€æ­¥ï¼šé¦–å…ˆæ„é€ ä¸€ä¸ªåŸºæœ¬çš„Appæ„é€ ç±»è¿›è¡Œæ–¹æ³•æŒ‚è½½ä¾èµ–æ”¶é›†ç­‰, æ‹¥æœ‰ä¸€ä¸ª use æ–¹æ³•å¯¹ä¸­é—´ä»¶å‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå»ºç«‹ä¸€ä¸ªå­˜å‚¨æ ˆ middleware ç”¨æ¥å­˜æ”¾æ”¶é›†çš„ä¾èµ–ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```js\nclass App {\n  constructor() {\n    this.middleware = []\n  }\n  use(fn) {\n    this.middleware.push(fn)\n  }\n}\n```\n\nç¬¬äºŒæ­¥ï¼šæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ª compose å‡½æ•° å¯¹æ”¶é›†åˆ°çš„ä¾èµ–è¿›è¡Œå¤„ç†ï¼Œå‚æ•°æ˜¯æ”¶é›†çš„ä¾èµ–æ ˆï¼Œè¿”å›ä¸€ä¸ªé€šè¿‡ä¸€å±‚å±‚ä¸­é—´ä»¶å‡½æ•°åŒ…è£…çš„æ–°å‡½æ•°ï¼Œæ•°ç»„æœ‰ä¸ª reduce æ–¹æ³•å¯ä»¥å¾ˆè½»æ˜“çš„å¸®æˆ‘ä»¬åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯éœ€è¦æŒ‰ç…§æ”¶é›†çš„ä¸­é—´ä»¶çš„é¡ºåºæ‰§è¡Œæ¯ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„å½’çº³å¦‚æœæŒ‰1 -> 2 -> 3çš„æµç¨‹é¡ºåºéå†æ˜¾ç„¶å°±ä¼šå°†æœ€æ—©æ”¶é›†çš„ä¾èµ–åŒ…è£…åœ¨æœ€å†…å±‚ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æœ‰ reduceRightğŸ˜„ï¼Œ ä»£ç å¦‚ä¸‹ï¼š\n```js\nconst compose = middlewares =>\n  middlewares.reduceRight((oldNext, fn) =>\n    createNext(fn, oldNext), async () => Promise.resolve())\n```\n\nç¬¬ä¸‰æ­¥ï¼šæ˜¾ç„¶æ¥ä¸‹æ¥æœ€å…³é”®çš„å°±æ˜¯å¯¹ä¸Šé¢ compose å‡½æ•°ä¸­çš„ createNext æ–¹æ³•è¿›è¡Œå°è£…ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œnextæ–¹æ³•æ˜¯å¯¹ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°çš„å¤„ç†ï¼Œä¸€ä¸ªå‚æ•°æ˜¯ä¸­é—´ä»¶å‡½æ•°ï¼Œè€Œå¦ä¸€ä¸ªæ˜¾ç„¶å°±æ˜¯é‚£ä¸ªnextæ–¹æ³•ï¼ŒåŒ…è£…è°ƒç”¨åè¿”å›ä¸€ä¸ªæ–°çš„nextå‡½æ•°ä¼ é€’åˆ°ä¸‹ä¸€å±‚åŒ…è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```js\nconst createNext = (middleware, oldNext) =>\n  async () =>\n    await middleware(oldNext)\n```\n\nä»¥ä¸ŠåŸºæœ¬çš„å°è£…å·²ç»å®Œæˆï¼Œæ ¸å¿ƒä»£ç åªæœ‰ middlewares å’Œ createNext ä¸¤ä¸ªå‡½æ•°ï¼Œåªæœ‰6è¡Œï¼Œä¸‹é¢å¯¹ä¸Šé¢æ•´ä¸ªæµç¨‹è¿›è¡Œèšåˆæµ‹è¯•\n\n# æµ‹è¯•\n```js\nclass App {\n  constructor() {\n    this.middleware = []\n  }\n  use(fn) {\n    this.middleware.push(fn)\n  }\n}\n\nconst app = new App\n\napp.use(async function m1(next) {\n  console.log('m1')\n  await next()\n  console.log('m1 end')\n})\n\napp.use(async function m2(next) {\n  console.log('m2')\n  await next()\n  console.log('m2 end')\n})\n\napp.use(async function m3(next) {\n  console.log('m3')\n  await next()\n  console.log('m3 end')\n})\n\n\nconst createNext = (middleware, oldNext) =>\n  async () =>\n    await middleware(oldNext)\n\nconst compose = middlewares =>\n  middlewares.reduceRight((oldNext, fn) =>\n    createNext(fn, oldNext), async () => Promise.resolve())\n\ncompose(app.middleware)()\n\n// output:\n// m1\n// m2\n// m3\n// m3 end\n// m2 end\n// m1 end\n```\n\nè¾¾åˆ°é¢„æœŸç»“æœahhhhhğŸ’\n\n# summary\n\nå½“ç„¶è¿™é‡Œåªæ˜¯ç®€å•çš„å°è£…ä¸€ä¸‹ï¼Œå…³äºä¸Šä¸‹æ–‡ä¼ é€’é”™è¯¯æ•è·ä¹‹ç±»éƒ½æ²¡åšï¼Œä½†æ˜¯å·²ç»å®Œæˆä¸€ä¸ªæ ‡å‡†çš„æ´‹è‘±æ¨¡å‹çš„æµç¨‹æ§åˆ¶äº†ï¼Œä¸‹æ¬¡æœ‰æœºä¼šè®²è§£å®Œæ•´çš„å°è£… koa2","slug":"writeSomething/koa2OnionModel","published":1,"updated":"2019-02-24T02:52:53.594Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptwd00087948o32rg548","content":"<p>åè¡Œä»£ç å®ç° <code>koa2</code> æ´‹è‘±æ¨¡å‹</p>\n<a id=\"more\"></a>\n<h4 id=\"æ´‹è‘±å›¾æ¨¡å‹\"><a href=\"#æ´‹è‘±å›¾æ¨¡å‹\" class=\"headerlink\" title=\"æ´‹è‘±å›¾æ¨¡å‹\"></a>æ´‹è‘±å›¾æ¨¡å‹</h4><p><img src=\"/2019/02/22/writeSomething/koa2OnionModel/onion.png\" alt=\"avatar\"></p>\n<p>koa2ä¸Šç‹¬ç‰¹çš„ä¸­é—´ä»¶æµç¨‹æ§åˆ¶ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ´‹è‘±æ¨¡å‹</p>\n<h1 id=\"è¿è¡Œ-koa2-demo\"><a href=\"#è¿è¡Œ-koa2-demo\" class=\"headerlink\" title=\"è¿è¡Œ koa2 demo\"></a>è¿è¡Œ koa2 demo</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Koa = <span class=\"built_in\">require</span>(<span class=\"string\">'koa2'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Koa()</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">3000</span>)</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœï¼š<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1 start</span><br><span class=\"line\">2 start</span><br><span class=\"line\">3 start</span><br><span class=\"line\">3 end</span><br><span class=\"line\">2 end</span><br><span class=\"line\">1 end</span><br></pre></td></tr></table></figure></p>\n<p>å±•ç°å¦‚ä¸Šå›¾æ´‹è‘±å¼çš„è¾“å‡ºç»“æœ</p>\n<h1 id=\"å½’çº³\"><a href=\"#å½’çº³\" class=\"headerlink\" title=\"å½’çº³\"></a>å½’çº³</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å°è£…ï¼Œè¦æƒ³è¾¾æˆæ´‹è‘±æ¨¡å‹å¼çš„æµç¨‹æ§åˆ¶ï¼Œä¸»è¦çœ‹ä¸Šé¢demoä¸­ callback çš„ç¬¬äºŒä¸ªå‚æ•° next æ–¹æ³•ï¼ˆctxæš‚æ—¶å’Œæœ¬æ–‡å†…å®¹æ— å…³ï¼‰ï¼Œä¸€æ­¥ä¸€æ­¥æ¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ€è€ƒï¼š</p>\n<ul>\n<li>é¦–å…ˆå˜ä¸ºæœ€ç®€caseï¼šåªæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°</li>\n<li>é‚£ä¹ˆå¦‚æœæƒ³è¦ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œnextæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬è‹¥æ˜¯æŠŠnextæ–¹æ³•æœ¬èº«å°±æ˜¯ä½œä¸ºç¬¬äºŒä¸ªä¸­é—´ä»¶å‡½æ•°è¿›è¡Œè°ƒç”¨å°±ä¼šå¾—åˆ° <code>1 start -&gt; 2 start -&gt; 2 end -&gt; 1 end</code> çš„ç»“æœ</li>\n<li>åŒç†å¦‚æœæ˜¯ä¸‰ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç¬¬ä¸‰ä¸ªä¸­é—´ä»¶å½“åšç¬¬äºŒä¸ªä¸­é—´ä»¶çš„ next æ–¹æ³•ï¼Œå†æŠŠç¬¬äºŒä¸ªä¸­é—´ä»¶å½“åšç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„ next å›è°ƒ</li>\n</ul>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.<br>å’Œä¹‹å‰çš„ä¸€ç¯‡ <a href=\"http://localhost:4000/2019/02/21/do%20something/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%92%8C%E9%80%92%E5%BD%92%EF%BC%9A%E4%BB%8E%E8%99%8E%E7%BE%8A%E8%8D%89%E5%BC%80%E5%A7%8B/#%E4%BB%8E%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%83%85%E5%86%B5%E5%85%A5%E6%89%8B\" target=\"_blank\" rel=\"noopener\">åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹</a> ç±»ä¼¼è¿›è¡Œç®€å•çš„å½’çº³ä¹‹åå¾—å‡ºæ€è·¯ï¼Œæœ€å…³é”®çš„æµç¨‹æ§åˆ¶é—®é¢˜æ—¢ç„¶æœ‰äº†æ€è·¯ä¸‹é¢å¼€å§‹å°è£…ä»£ç </p>\n<h1 id=\"ä¸‰æ­¥å®Œæˆå°è£…\"><a href=\"#ä¸‰æ­¥å®Œæˆå°è£…\" class=\"headerlink\" title=\"ä¸‰æ­¥å®Œæˆå°è£…\"></a>ä¸‰æ­¥å®Œæˆå°è£…</h1><p>ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆæ„é€ ä¸€ä¸ªåŸºæœ¬çš„Appæ„é€ ç±»è¿›è¡Œæ–¹æ³•æŒ‚è½½ä¾èµ–æ”¶é›†ç­‰, æ‹¥æœ‰ä¸€ä¸ª use æ–¹æ³•å¯¹ä¸­é—´ä»¶å‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå»ºç«‹ä¸€ä¸ªå­˜å‚¨æ ˆ middleware ç”¨æ¥å­˜æ”¾æ”¶é›†çš„ä¾èµ–ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ç¬¬äºŒæ­¥ï¼šæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ª compose å‡½æ•° å¯¹æ”¶é›†åˆ°çš„ä¾èµ–è¿›è¡Œå¤„ç†ï¼Œå‚æ•°æ˜¯æ”¶é›†çš„ä¾èµ–æ ˆï¼Œè¿”å›ä¸€ä¸ªé€šè¿‡ä¸€å±‚å±‚ä¸­é—´ä»¶å‡½æ•°åŒ…è£…çš„æ–°å‡½æ•°ï¼Œæ•°ç»„æœ‰ä¸ª reduce æ–¹æ³•å¯ä»¥å¾ˆè½»æ˜“çš„å¸®æˆ‘ä»¬åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯éœ€è¦æŒ‰ç…§æ”¶é›†çš„ä¸­é—´ä»¶çš„é¡ºåºæ‰§è¡Œæ¯ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„å½’çº³å¦‚æœæŒ‰1 -&gt; 2 -&gt; 3çš„æµç¨‹é¡ºåºéå†æ˜¾ç„¶å°±ä¼šå°†æœ€æ—©æ”¶é›†çš„ä¾èµ–åŒ…è£…åœ¨æœ€å†…å±‚ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æœ‰ reduceRightğŸ˜„ï¼Œ ä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span></span><br><span class=\"line\">  middlewares.reduceRight(<span class=\"function\">(<span class=\"params\">oldNext, fn</span>) =&gt;</span></span><br><span class=\"line\">    createNext(fn, oldNext), <span class=\"keyword\">async</span> () =&gt; <span class=\"built_in\">Promise</span>.resolve())</span><br></pre></td></tr></table></figure></p>\n<p>ç¬¬ä¸‰æ­¥ï¼šæ˜¾ç„¶æ¥ä¸‹æ¥æœ€å…³é”®çš„å°±æ˜¯å¯¹ä¸Šé¢ compose å‡½æ•°ä¸­çš„ createNext æ–¹æ³•è¿›è¡Œå°è£…ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œnextæ–¹æ³•æ˜¯å¯¹ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°çš„å¤„ç†ï¼Œä¸€ä¸ªå‚æ•°æ˜¯ä¸­é—´ä»¶å‡½æ•°ï¼Œè€Œå¦ä¸€ä¸ªæ˜¾ç„¶å°±æ˜¯é‚£ä¸ªnextæ–¹æ³•ï¼ŒåŒ…è£…è°ƒç”¨åè¿”å›ä¸€ä¸ªæ–°çš„nextå‡½æ•°ä¼ é€’åˆ°ä¸‹ä¸€å±‚åŒ…è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> createNext = <span class=\"function\">(<span class=\"params\">middleware, oldNext</span>) =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">async</span> () =&gt;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> middleware(oldNext)</span><br></pre></td></tr></table></figure></p>\n<p>ä»¥ä¸ŠåŸºæœ¬çš„å°è£…å·²ç»å®Œæˆï¼Œæ ¸å¿ƒä»£ç åªæœ‰ middlewares å’Œ createNext ä¸¤ä¸ªå‡½æ•°ï¼Œåªæœ‰6è¡Œï¼Œä¸‹é¢å¯¹ä¸Šé¢æ•´ä¸ªæµç¨‹è¿›è¡Œèšåˆæµ‹è¯•</p>\n<h1 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> App</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m1</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m1'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m1 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m2</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m2'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m2 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m3</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m3'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m3 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> createNext = <span class=\"function\">(<span class=\"params\">middleware, oldNext</span>) =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">async</span> () =&gt;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> middleware(oldNext)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span></span><br><span class=\"line\">  middlewares.reduceRight(<span class=\"function\">(<span class=\"params\">oldNext, fn</span>) =&gt;</span></span><br><span class=\"line\">    createNext(fn, oldNext), <span class=\"keyword\">async</span> () =&gt; <span class=\"built_in\">Promise</span>.resolve())</span><br><span class=\"line\"></span><br><span class=\"line\">compose(app.middleware)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// m1</span></span><br><span class=\"line\"><span class=\"comment\">// m2</span></span><br><span class=\"line\"><span class=\"comment\">// m3</span></span><br><span class=\"line\"><span class=\"comment\">// m3 end</span></span><br><span class=\"line\"><span class=\"comment\">// m2 end</span></span><br><span class=\"line\"><span class=\"comment\">// m1 end</span></span><br></pre></td></tr></table></figure>\n<p>è¾¾åˆ°é¢„æœŸç»“æœahhhhhğŸ’</p>\n<h1 id=\"summary\"><a href=\"#summary\" class=\"headerlink\" title=\"summary\"></a>summary</h1><p>å½“ç„¶è¿™é‡Œåªæ˜¯ç®€å•çš„å°è£…ä¸€ä¸‹ï¼Œå…³äºä¸Šä¸‹æ–‡ä¼ é€’é”™è¯¯æ•è·ä¹‹ç±»éƒ½æ²¡åšï¼Œä½†æ˜¯å·²ç»å®Œæˆä¸€ä¸ªæ ‡å‡†çš„æ´‹è‘±æ¨¡å‹çš„æµç¨‹æ§åˆ¶äº†ï¼Œä¸‹æ¬¡æœ‰æœºä¼šè®²è§£å®Œæ•´çš„å°è£… koa2</p>\n","site":{"data":{}},"excerpt":"<p>åè¡Œä»£ç å®ç° <code>koa2</code> æ´‹è‘±æ¨¡å‹</p>","more":"<h4 id=\"æ´‹è‘±å›¾æ¨¡å‹\"><a href=\"#æ´‹è‘±å›¾æ¨¡å‹\" class=\"headerlink\" title=\"æ´‹è‘±å›¾æ¨¡å‹\"></a>æ´‹è‘±å›¾æ¨¡å‹</h4><p><img src=\"/2019/02/22/writeSomething/koa2OnionModel/onion.png\" alt=\"avatar\"></p>\n<p>koa2ä¸Šç‹¬ç‰¹çš„ä¸­é—´ä»¶æµç¨‹æ§åˆ¶ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ´‹è‘±æ¨¡å‹</p>\n<h1 id=\"è¿è¡Œ-koa2-demo\"><a href=\"#è¿è¡Œ-koa2-demo\" class=\"headerlink\" title=\"è¿è¡Œ koa2 demo\"></a>è¿è¡Œ koa2 demo</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Koa = <span class=\"built_in\">require</span>(<span class=\"string\">'koa2'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> Koa()</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next)=&gt;&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">1</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">2</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> (ctx, next) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>, <span class=\"string\">' start'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"number\">3</span>, <span class=\"string\">' end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.listen(<span class=\"number\">3000</span>)</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºç»“æœï¼š<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1 start</span><br><span class=\"line\">2 start</span><br><span class=\"line\">3 start</span><br><span class=\"line\">3 end</span><br><span class=\"line\">2 end</span><br><span class=\"line\">1 end</span><br></pre></td></tr></table></figure></p>\n<p>å±•ç°å¦‚ä¸Šå›¾æ´‹è‘±å¼çš„è¾“å‡ºç»“æœ</p>\n<h1 id=\"å½’çº³\"><a href=\"#å½’çº³\" class=\"headerlink\" title=\"å½’çº³\"></a>å½’çº³</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å°è£…ï¼Œè¦æƒ³è¾¾æˆæ´‹è‘±æ¨¡å‹å¼çš„æµç¨‹æ§åˆ¶ï¼Œä¸»è¦çœ‹ä¸Šé¢demoä¸­ callback çš„ç¬¬äºŒä¸ªå‚æ•° next æ–¹æ³•ï¼ˆctxæš‚æ—¶å’Œæœ¬æ–‡å†…å®¹æ— å…³ï¼‰ï¼Œä¸€æ­¥ä¸€æ­¥æ¥æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ€è€ƒï¼š</p>\n<ul>\n<li>é¦–å…ˆå˜ä¸ºæœ€ç®€caseï¼šåªæœ‰ä¸¤ä¸ªä¸­é—´ä»¶å‡½æ•°</li>\n<li>é‚£ä¹ˆå¦‚æœæƒ³è¦ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œnextæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬è‹¥æ˜¯æŠŠnextæ–¹æ³•æœ¬èº«å°±æ˜¯ä½œä¸ºç¬¬äºŒä¸ªä¸­é—´ä»¶å‡½æ•°è¿›è¡Œè°ƒç”¨å°±ä¼šå¾—åˆ° <code>1 start -&gt; 2 start -&gt; 2 end -&gt; 1 end</code> çš„ç»“æœ</li>\n<li>åŒç†å¦‚æœæ˜¯ä¸‰ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å°†ç¬¬ä¸‰ä¸ªä¸­é—´ä»¶å½“åšç¬¬äºŒä¸ªä¸­é—´ä»¶çš„ next æ–¹æ³•ï¼Œå†æŠŠç¬¬äºŒä¸ªä¸­é—´ä»¶å½“åšç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„ next å›è°ƒ</li>\n</ul>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.</p>\n<p>.<br>å’Œä¹‹å‰çš„ä¸€ç¯‡ <a href=\"http://localhost:4000/2019/02/21/do%20something/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E5%92%8C%E9%80%92%E5%BD%92%EF%BC%9A%E4%BB%8E%E8%99%8E%E7%BE%8A%E8%8D%89%E5%BC%80%E5%A7%8B/#%E4%BB%8E%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%83%85%E5%86%B5%E5%85%A5%E6%89%8B\" target=\"_blank\" rel=\"noopener\">åŠ¨æ€è§„åˆ’å’Œé€’å½’ï¼šä»è™ç¾Šè‰å¼€å§‹</a> ç±»ä¼¼è¿›è¡Œç®€å•çš„å½’çº³ä¹‹åå¾—å‡ºæ€è·¯ï¼Œæœ€å…³é”®çš„æµç¨‹æ§åˆ¶é—®é¢˜æ—¢ç„¶æœ‰äº†æ€è·¯ä¸‹é¢å¼€å§‹å°è£…ä»£ç </p>\n<h1 id=\"ä¸‰æ­¥å®Œæˆå°è£…\"><a href=\"#ä¸‰æ­¥å®Œæˆå°è£…\" class=\"headerlink\" title=\"ä¸‰æ­¥å®Œæˆå°è£…\"></a>ä¸‰æ­¥å®Œæˆå°è£…</h1><p>ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆæ„é€ ä¸€ä¸ªåŸºæœ¬çš„Appæ„é€ ç±»è¿›è¡Œæ–¹æ³•æŒ‚è½½ä¾èµ–æ”¶é›†ç­‰, æ‹¥æœ‰ä¸€ä¸ª use æ–¹æ³•å¯¹ä¸­é—´ä»¶å‡½æ•°è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œå»ºç«‹ä¸€ä¸ªå­˜å‚¨æ ˆ middleware ç”¨æ¥å­˜æ”¾æ”¶é›†çš„ä¾èµ–ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ç¬¬äºŒæ­¥ï¼šæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ª compose å‡½æ•° å¯¹æ”¶é›†åˆ°çš„ä¾èµ–è¿›è¡Œå¤„ç†ï¼Œå‚æ•°æ˜¯æ”¶é›†çš„ä¾èµ–æ ˆï¼Œè¿”å›ä¸€ä¸ªé€šè¿‡ä¸€å±‚å±‚ä¸­é—´ä»¶å‡½æ•°åŒ…è£…çš„æ–°å‡½æ•°ï¼Œæ•°ç»„æœ‰ä¸ª reduce æ–¹æ³•å¯ä»¥å¾ˆè½»æ˜“çš„å¸®æˆ‘ä»¬åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯éœ€è¦æŒ‰ç…§æ”¶é›†çš„ä¸­é—´ä»¶çš„é¡ºåºæ‰§è¡Œæ¯ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ŒæŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„å½’çº³å¦‚æœæŒ‰1 -&gt; 2 -&gt; 3çš„æµç¨‹é¡ºåºéå†æ˜¾ç„¶å°±ä¼šå°†æœ€æ—©æ”¶é›†çš„ä¾èµ–åŒ…è£…åœ¨æœ€å†…å±‚ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æœ‰ reduceRightğŸ˜„ï¼Œ ä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span></span><br><span class=\"line\">  middlewares.reduceRight(<span class=\"function\">(<span class=\"params\">oldNext, fn</span>) =&gt;</span></span><br><span class=\"line\">    createNext(fn, oldNext), <span class=\"keyword\">async</span> () =&gt; <span class=\"built_in\">Promise</span>.resolve())</span><br></pre></td></tr></table></figure></p>\n<p>ç¬¬ä¸‰æ­¥ï¼šæ˜¾ç„¶æ¥ä¸‹æ¥æœ€å…³é”®çš„å°±æ˜¯å¯¹ä¸Šé¢ compose å‡½æ•°ä¸­çš„ createNext æ–¹æ³•è¿›è¡Œå°è£…ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œnextæ–¹æ³•æ˜¯å¯¹ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°çš„å¤„ç†ï¼Œä¸€ä¸ªå‚æ•°æ˜¯ä¸­é—´ä»¶å‡½æ•°ï¼Œè€Œå¦ä¸€ä¸ªæ˜¾ç„¶å°±æ˜¯é‚£ä¸ªnextæ–¹æ³•ï¼ŒåŒ…è£…è°ƒç”¨åè¿”å›ä¸€ä¸ªæ–°çš„nextå‡½æ•°ä¼ é€’åˆ°ä¸‹ä¸€å±‚åŒ…è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> createNext = <span class=\"function\">(<span class=\"params\">middleware, oldNext</span>) =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">async</span> () =&gt;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> middleware(oldNext)</span><br></pre></td></tr></table></figure></p>\n<p>ä»¥ä¸ŠåŸºæœ¬çš„å°è£…å·²ç»å®Œæˆï¼Œæ ¸å¿ƒä»£ç åªæœ‰ middlewares å’Œ createNext ä¸¤ä¸ªå‡½æ•°ï¼Œåªæœ‰6è¡Œï¼Œä¸‹é¢å¯¹ä¸Šé¢æ•´ä¸ªæµç¨‹è¿›è¡Œèšåˆæµ‹è¯•</p>\n<h1 id=\"æµ‹è¯•\"><a href=\"#æµ‹è¯•\" class=\"headerlink\" title=\"æµ‹è¯•\"></a>æµ‹è¯•</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware = []</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  use(fn) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.middleware.push(fn)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> App</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m1</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m1'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m1 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m2</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m2'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m2 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">m3</span>(<span class=\"params\">next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m3'</span>)</span><br><span class=\"line\">  <span class=\"keyword\">await</span> next()</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'m3 end'</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> createNext = <span class=\"function\">(<span class=\"params\">middleware, oldNext</span>) =&gt;</span></span><br><span class=\"line\">  <span class=\"keyword\">async</span> () =&gt;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> middleware(oldNext)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> compose = <span class=\"function\"><span class=\"params\">middlewares</span> =&gt;</span></span><br><span class=\"line\">  middlewares.reduceRight(<span class=\"function\">(<span class=\"params\">oldNext, fn</span>) =&gt;</span></span><br><span class=\"line\">    createNext(fn, oldNext), <span class=\"keyword\">async</span> () =&gt; <span class=\"built_in\">Promise</span>.resolve())</span><br><span class=\"line\"></span><br><span class=\"line\">compose(app.middleware)()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// output:</span></span><br><span class=\"line\"><span class=\"comment\">// m1</span></span><br><span class=\"line\"><span class=\"comment\">// m2</span></span><br><span class=\"line\"><span class=\"comment\">// m3</span></span><br><span class=\"line\"><span class=\"comment\">// m3 end</span></span><br><span class=\"line\"><span class=\"comment\">// m2 end</span></span><br><span class=\"line\"><span class=\"comment\">// m1 end</span></span><br></pre></td></tr></table></figure>\n<p>è¾¾åˆ°é¢„æœŸç»“æœahhhhhğŸ’</p>\n<h1 id=\"summary\"><a href=\"#summary\" class=\"headerlink\" title=\"summary\"></a>summary</h1><p>å½“ç„¶è¿™é‡Œåªæ˜¯ç®€å•çš„å°è£…ä¸€ä¸‹ï¼Œå…³äºä¸Šä¸‹æ–‡ä¼ é€’é”™è¯¯æ•è·ä¹‹ç±»éƒ½æ²¡åšï¼Œä½†æ˜¯å·²ç»å®Œæˆä¸€ä¸ªæ ‡å‡†çš„æ´‹è‘±æ¨¡å‹çš„æµç¨‹æ§åˆ¶äº†ï¼Œä¸‹æ¬¡æœ‰æœºä¼šè®²è§£å®Œæ•´çš„å°è£… koa2</p>"},{"title":"å…³äºäº’è”ç½‘å¯’å†¬","date":"2019-02-28T11:14:00.000Z","_content":"\nå½“å‘¨å›´çš„ç¨‹åºå‘˜éƒ½åœ¨è¯´å¤–é¢è¡Œæƒ…å¾ˆå·®çš„æ—¶å€™ï¼Œè²Œä¼¼è¿™ä¸ª2019å¹´å†¬å¤©çš„é£æ ¼å¤–çš„å‡›å†½\n<!-- more -->\n\nâ€œé¢äº†å¥½å¤šå®¶æ²¡æ‹¿åˆ°ä¸€ä¸ªofferâ€\nâ€œå”‰ï¼Œä¸€ç›´æ¥ä¸åˆ°é¢è¯•é‚€è¯·â€\nâ€œå¤–é¢è¡Œæƒ…æ˜¯çœŸçš„å·®å•Šï¼Œå¤§å‚éƒ½åœ¨è£å‘˜â€\n.\n.\n.\n# winter of internet\n\näº’è”ç½‘å¯’å†¬çœŸçš„æ¥äº†å—ï¼Ÿå½“å¤§å®¶éƒ½åœ¨è¿™ä¹ˆè¯´çš„æ—¶å€™å¤§æ¦‚å°±ç®—æ˜¯äº†å§ï¼Œè‡³å°‘å¯¹äºå¾ˆå¤šé¢è¯•ä¸é¡ºç”šè‡³æ¥ä¸åˆ°é¢è¯•é‚€è¯·çš„äººæ¥è¯´\n\næœ‰æ®µæ—¶é—´è¿ç»­é¢äº†å¥½å‡ ä¸ªâ€˜ç»ç†â€™ã€â€˜è´Ÿè´£äººâ€™å¤´è¡”çš„åº”è˜äººå‘˜ï¼Œæ³¨æ„äº†ä¸€ä¸‹ç«Ÿç„¶å…¨æ˜¯åŒä¸€ä¸ªå…¬å¸ï¼Œæœ‰ä¸€æ¬¡é¢è¯•æˆ‘é—®äº†ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥çŒ©ä¾¿åˆ©è£å‘˜äº†ï¼Œå½“æ—¶å¿ƒä¸­ä¸ä»¥ä¸ºæ„ï¼Œè²Œä¼¼è¿™ä¸ªä¾¿åˆ©åº—åæ°”ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå¯èƒ½æ²¡æœ‰æ‹¿åˆ°åç»­çš„èèµ„äº†å§\n\næ²¡è¿‡å¤šä¹…ä¾¿æœ‰ç½‘ä¼ é˜¿é‡Œç­‰å¤§å‚ä¸å†ç¤¾æ‹›çš„æ–°é—»ï¼Œå…¬å¸å…¬å…³è‚¯å®šæ˜¯è¦è¾Ÿè°£çš„ï¼Œæ— éæ˜¯ä¸€ç›´æ¸´æœ›äººæ‰å¼•è¿›æ€å¯ä¸å†æ‹›äººã€‚å†…å¿ƒè¿™æ—¶ä¾ç„¶æ€€ç–‘è¿™ä¸ªäº’è”ç½‘çš„æ—¶ä»£ä¼šæœ‰çœŸæ­£çš„å¯’å†¬å—ï¼Ÿå½“ç„¶ä»”ç»†æƒ³æƒ³ä¹Ÿä¼šæ˜ç™½ï¼Œå°±ç®—æ˜¯å¯’å†¬å½»åº•ä¸æ‹›äººæ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨æ‹›äººçš„æŠŠæ§ä¸Šè‚¯å®šéä¹‹å‰å¯æ¯”\n\nç„¶è€Œæ—¢ç„¶ç½‘ä¼ å¯’å†¬ï¼Œæ€èƒ½åªæœ‰è¿™ä¹ˆä¸€äº›ã€‚çŸ¥é“ç¾å›¢ç‚¹è¯„æ•´ä¸ªäº‹ä¸šéƒ¨å°†è¢«æ’¤æ‰ï¼Œç‚¹è¯„å‘˜å·¥æˆ–è½¬å²—æˆ–æ‹¿èµ”å¿çš„æ—¶å€™çªç„¶å‘è§‰å¯èƒ½è¿™ä¸ªå†¬å¤©ä¸æ˜¯åœ¨å’Œä½ å¼€ç©ç¬‘ï¼Œä¸Šæµ·è¿™åº§å—æ–¹åŸå¸‚ä¸€å®šè¦è®©ç”Ÿæ´»åœ¨è¿™ç‰‡åœŸåœ°ä¸Šçš„åŒ—æ–¹äººæ„Ÿå—ä¸€ä¸‹çœŸæ­£çš„å¯’å†·ã€‚å…¶å®è¯´åˆ°è¿™é‡Œæˆ‘çªç„¶æƒ³åˆ°é±¼æ³¡æ³¡çš„CTOæ­£æ˜¯18å¹´å¹´æœ«ä»ç‚¹è¯„ç©ºé™è¿‡æ¥ï¼Œæ˜¯åœ¨ä½è€…é•¿è¿œçš„æˆ˜ç•¥ç›®å…‰å—ï¼Ÿç•¥å¾®æœ‰ç‚¹â€˜ä¸å¯’è€Œæ —â€™ï¼Ÿ\n\näº¬ä¸œæ‰§è¡Œæœ«å°¾æ·˜æ±°æœºåˆ¶ã€‚å¦‚ä½•æ‰§è¡Œï¼Ÿè£å‘˜35%\n\nå¹´åå›åˆ°ä¸Šæµ·ï¼Œæœ‹å‹å‘Šè¯‰æˆ‘æ²ªæ±Ÿæ•™è‚²è£äº†æ•´ä¸¤å±‚æ¥¼\n\nå‰æ®µæ—¶é—´åˆå¬é—»æ»´æ»´ä¸Šæµ·åˆ†éƒ¨è¦è¢«æ’¤æ‰ï¼Œæƒ³äº†æƒ³æœ‰æœ‹å‹ä¹‹å‰åœ¨é‚£é¢å¾…è¿‡è²Œä¼¼è§„æ¨¡æœ¬èº«ä¹Ÿä¸å¤§ã€‚emmmï¼Œæˆ‘åº”è¯¥æ˜¯éº»æœ¨äº†ï¼Œåæ¥å¬è¯´æ˜¯æ»´æ»´è£å‘˜15%è¾¾2000äºº\n\næˆ‘è‚¯å®šæ˜¯éº»æœ¨äº†\n\n# added fuel to the fire\n\nè£å‘˜ï¼Ÿä¸ï¼Œæ—¢ç„¶æ˜¯å¯’å†¬ï¼Œè£å‘˜æ‰‹æ®µä¹Ÿå¤ªå•ä¸€äº†ï¼Œè¡¨é¢è£å‘˜ï¼Œå¯¹å†…å‘¢ï¼Ÿ\n\nè€æ¿ï¼šâ€œ996æ˜¯ä¸€ä¸ªå¥½è®¡åˆ’ï¼Œjust do itâ€\n\nå¤§å®¶éƒ½çŸ¥é“åä¸ºç­‰å…¬å¸è¿½æ±‚çš„ç‹¼æ€§æ–‡åŒ–ä»¥åŠä»–ä»¬æ‰€å®æ–½çš„â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼ŒèŠä¼çš„å‘˜å·¥ä¼¼ä¹ä¸ºåŠ ç­è€Œç”Ÿã€‚è¿˜æœ‰ä¸Šæµ·æ–°å…´ä¼ä¸š â€˜æ‹¼å¤•å¤•â€™ çš„ â€˜11 12 6â€™ ç”šè‡³åŠ ç­è‡³å‡Œæ™¨ä¸‰ç‚¹ã€‚å½“ç„¶é«˜ä»˜å‡ºä¹Ÿå¯¹åº”äº†é«˜å›æŠ¥ï¼Œè¿›å»çš„äººæ²¡å¿…è¦æŠ±æ€¨å¤ªå¤šæ¯•ç«Ÿæ˜¯è‡ªå·±çš„é€‰æ‹©ã€‚å¾ˆå¤šäººè¿é—¨æ§›éƒ½æ‘¸ä¸åˆ°å‘¢\n\nè¦è¯´åˆ° â€˜996â€™ ä¸€ç›´æ˜¯æœ€ä»¤ç¨‹åºå‘˜ä½œå‘•çš„ä¸€ä¸ªåè¯ï¼Œç„¶è€Œå·±äº¥æ–°å¹´ä¼Šå§‹ï¼Œæ­å·æŸâ€˜æœ‰èµâ€™å…¬å¸çš„CEOç«Ÿç„¶åœ¨å¹´ä¼šç›´æ¥å®£å¸ƒâ€˜996å·¥ä½œåˆ¶åº¦â€™\nç™½é¸¦å‘˜å·¥ï¼šâ€œè¿™æ˜¯å¹´ä¼šï¼Ÿè¿™ä¸æ˜¯çœŸçš„ã€‚æˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬â€\n\nè¿˜æ˜¯ â€˜996â€™ï¼Œé±¼æ³¡æ³¡ä¹Ÿæ˜¯ä¸‡æ¶çš„â€˜996â€™ï¼Œåæœˆä»½çš„æŸå¤©ï¼Ÿå‰ç«¯è´Ÿè´£äººçš„å£å¤´é€šçŸ¥å°±è¿™æ ·ç®€å•çš„å‘æˆ‘ä»¬å®£å¸ƒã€‚å“¦å¯¹äº†ï¼Œä»–ä¹Ÿå±¡å±¡å¼ºè°ƒäº†â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼Œæˆ‘æ˜¯ä¸æ˜¯æœ‰å¿…è¦å±•ç¤ºå‡ºâ€˜æˆ‘å¥½æ€•æ€•å“Ÿâ€™ä»¥ç¤ºå°Šé‡å‘¢ï¼Ÿ\n\n# I'm such a pain in the neck\n\nå½“ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œè™½è¯´æ˜¯å¯’å†¬ï¼Œä½†æ˜¯å› ä¸ºå„ç§åŸå› æˆ‘å½“ç„¶ä¹Ÿåœ¨å¯»æ‰¾æœºä¼šçš„å¤§å†›ä¸­\n\nä»å°åˆ°å¤§ï¼Œä»å­¦æ ¡åˆ°ç¤¾ä¼šï¼Œä»æœ‹å‹åˆ°åŒäº‹ï¼Œæˆ‘æ”¶åˆ°æ— æ•°è¯„ä»·ï¼Œæˆ–è¤’æˆ–è´¬ä½†æ— éæœ‰è¿™äº›è¯ï¼šè‡ªå¤§ã€è‡ªå‚²ã€è™šè£ã€ä¹–æˆ¾ã€è‡ªä¿¡ã€è´Ÿè´£ã€ç‹¬ç«‹...ä½†æ˜¯è¿™ä¸ªå†¬å¤©æˆ‘æ”¶åˆ°æ¥è‡ªpeterçš„ä¸€ä¸ªæ–°çš„è¯ â€˜æ— çŸ¥â€™ï¼Œç”šè‡³æœ‰ â€˜å¼•ç»æ®å…¸â€™ã€‚æˆ‘ä»”ç»†çœ‹äº†â€˜ç»â€™â€˜å…¸â€™ï¼Œä¸€å¥é€šä¿—çš„è¯ï¼šè‡ªä¿¡å¸¦æ¥çš„ä¸æ˜¯çŸ¥è¯†ï¼ˆæ½œå°è¯æ˜¯æ— çŸ¥ï¼‰ï¼Œä¸€ä¸ªåè¯ï¼šè¾¾å…‹æ•ˆåº”\n\nè¿™ä¸¤å¤©æˆ‘åœ¨ä¼‘å‡ï¼Œpeterä»–ä»¬å¯èƒ½ä¼šä»¥ä¸ºæˆ‘åœ¨å¤–é¢è¯•ï¼Œå…¶å®æ²¡æœ‰ï¼Œæˆ‘åªæ˜¯æ™®é€šçš„ç¡ç¡æ‡’è§‰ï¼Œå°±åƒä¹‹å‰å‘peterè¯·å‡è¯´çš„ï¼šæ˜å¤©æˆ‘ä¸å»äº†ï¼Œå¾ˆç´¯è¦ç¡ä¸ªæ‡’è§‰ã€‚æˆ‘çœŸçš„åªæ˜¯åœ¨åŠªåŠ›å½“ä¸€ä¸ªè‚¥å®…ï¼ˆä¸‹æ„è¯†çœ‹çœ‹è‡ªå·±é”®ç›˜ä¸Šçš„éª·é«…æ‰‹ï¼Œè‚¥ä¸èµ·æ¥å®…æ€»å¯ä»¥å“ï¼‰\n\nä»¥å‰è®¤è¯†çš„ä¸€ä¸ªè€å¤§ç§èŠæˆ‘ï¼šæœ‰æƒ³æ³•å—\n\nä¸”è¡Œä¸”çœ‹å®¹æˆ‘æƒ³ä¸€æƒ³\n\næˆ‘æ˜¯äººé—´æƒ†æ€…å®¢\n\n# last\n\nä¸‹æ„è¯†çš„è£¹ç´§äº†èº«ä¸Šçš„æ£‰æ¯›ç¡è¡£ï¼Œååœ¨ä¹¦æ¡Œå‰çœ‹äº†çœ¼èƒŒåç©ºè°ƒçš„æ˜¾ç¤ºå±ï¼Œâ€œè§é¬¼ï¼Œ28Â°Cæ€ä¹ˆè¿™ä¹ˆå†·ï¼Œâ€˜ohï¼Œshiftâ€™â€\n\nend\n","source":"_posts/humanbeings/IsThisInternetWinter.md","raw":"---\ntitle: å…³äºäº’è”ç½‘å¯’å†¬\ntags:\n  - å½“æˆ‘åœ¨æ‰¯æ·¡\ndate: 2019-02-28 19:14:00\ncategories: å½“æˆ‘åœ¨æ‰¯æ·¡\n---\n\nå½“å‘¨å›´çš„ç¨‹åºå‘˜éƒ½åœ¨è¯´å¤–é¢è¡Œæƒ…å¾ˆå·®çš„æ—¶å€™ï¼Œè²Œä¼¼è¿™ä¸ª2019å¹´å†¬å¤©çš„é£æ ¼å¤–çš„å‡›å†½\n<!-- more -->\n\nâ€œé¢äº†å¥½å¤šå®¶æ²¡æ‹¿åˆ°ä¸€ä¸ªofferâ€\nâ€œå”‰ï¼Œä¸€ç›´æ¥ä¸åˆ°é¢è¯•é‚€è¯·â€\nâ€œå¤–é¢è¡Œæƒ…æ˜¯çœŸçš„å·®å•Šï¼Œå¤§å‚éƒ½åœ¨è£å‘˜â€\n.\n.\n.\n# winter of internet\n\näº’è”ç½‘å¯’å†¬çœŸçš„æ¥äº†å—ï¼Ÿå½“å¤§å®¶éƒ½åœ¨è¿™ä¹ˆè¯´çš„æ—¶å€™å¤§æ¦‚å°±ç®—æ˜¯äº†å§ï¼Œè‡³å°‘å¯¹äºå¾ˆå¤šé¢è¯•ä¸é¡ºç”šè‡³æ¥ä¸åˆ°é¢è¯•é‚€è¯·çš„äººæ¥è¯´\n\næœ‰æ®µæ—¶é—´è¿ç»­é¢äº†å¥½å‡ ä¸ªâ€˜ç»ç†â€™ã€â€˜è´Ÿè´£äººâ€™å¤´è¡”çš„åº”è˜äººå‘˜ï¼Œæ³¨æ„äº†ä¸€ä¸‹ç«Ÿç„¶å…¨æ˜¯åŒä¸€ä¸ªå…¬å¸ï¼Œæœ‰ä¸€æ¬¡é¢è¯•æˆ‘é—®äº†ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥çŒ©ä¾¿åˆ©è£å‘˜äº†ï¼Œå½“æ—¶å¿ƒä¸­ä¸ä»¥ä¸ºæ„ï¼Œè²Œä¼¼è¿™ä¸ªä¾¿åˆ©åº—åæ°”ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå¯èƒ½æ²¡æœ‰æ‹¿åˆ°åç»­çš„èèµ„äº†å§\n\næ²¡è¿‡å¤šä¹…ä¾¿æœ‰ç½‘ä¼ é˜¿é‡Œç­‰å¤§å‚ä¸å†ç¤¾æ‹›çš„æ–°é—»ï¼Œå…¬å¸å…¬å…³è‚¯å®šæ˜¯è¦è¾Ÿè°£çš„ï¼Œæ— éæ˜¯ä¸€ç›´æ¸´æœ›äººæ‰å¼•è¿›æ€å¯ä¸å†æ‹›äººã€‚å†…å¿ƒè¿™æ—¶ä¾ç„¶æ€€ç–‘è¿™ä¸ªäº’è”ç½‘çš„æ—¶ä»£ä¼šæœ‰çœŸæ­£çš„å¯’å†¬å—ï¼Ÿå½“ç„¶ä»”ç»†æƒ³æƒ³ä¹Ÿä¼šæ˜ç™½ï¼Œå°±ç®—æ˜¯å¯’å†¬å½»åº•ä¸æ‹›äººæ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨æ‹›äººçš„æŠŠæ§ä¸Šè‚¯å®šéä¹‹å‰å¯æ¯”\n\nç„¶è€Œæ—¢ç„¶ç½‘ä¼ å¯’å†¬ï¼Œæ€èƒ½åªæœ‰è¿™ä¹ˆä¸€äº›ã€‚çŸ¥é“ç¾å›¢ç‚¹è¯„æ•´ä¸ªäº‹ä¸šéƒ¨å°†è¢«æ’¤æ‰ï¼Œç‚¹è¯„å‘˜å·¥æˆ–è½¬å²—æˆ–æ‹¿èµ”å¿çš„æ—¶å€™çªç„¶å‘è§‰å¯èƒ½è¿™ä¸ªå†¬å¤©ä¸æ˜¯åœ¨å’Œä½ å¼€ç©ç¬‘ï¼Œä¸Šæµ·è¿™åº§å—æ–¹åŸå¸‚ä¸€å®šè¦è®©ç”Ÿæ´»åœ¨è¿™ç‰‡åœŸåœ°ä¸Šçš„åŒ—æ–¹äººæ„Ÿå—ä¸€ä¸‹çœŸæ­£çš„å¯’å†·ã€‚å…¶å®è¯´åˆ°è¿™é‡Œæˆ‘çªç„¶æƒ³åˆ°é±¼æ³¡æ³¡çš„CTOæ­£æ˜¯18å¹´å¹´æœ«ä»ç‚¹è¯„ç©ºé™è¿‡æ¥ï¼Œæ˜¯åœ¨ä½è€…é•¿è¿œçš„æˆ˜ç•¥ç›®å…‰å—ï¼Ÿç•¥å¾®æœ‰ç‚¹â€˜ä¸å¯’è€Œæ —â€™ï¼Ÿ\n\näº¬ä¸œæ‰§è¡Œæœ«å°¾æ·˜æ±°æœºåˆ¶ã€‚å¦‚ä½•æ‰§è¡Œï¼Ÿè£å‘˜35%\n\nå¹´åå›åˆ°ä¸Šæµ·ï¼Œæœ‹å‹å‘Šè¯‰æˆ‘æ²ªæ±Ÿæ•™è‚²è£äº†æ•´ä¸¤å±‚æ¥¼\n\nå‰æ®µæ—¶é—´åˆå¬é—»æ»´æ»´ä¸Šæµ·åˆ†éƒ¨è¦è¢«æ’¤æ‰ï¼Œæƒ³äº†æƒ³æœ‰æœ‹å‹ä¹‹å‰åœ¨é‚£é¢å¾…è¿‡è²Œä¼¼è§„æ¨¡æœ¬èº«ä¹Ÿä¸å¤§ã€‚emmmï¼Œæˆ‘åº”è¯¥æ˜¯éº»æœ¨äº†ï¼Œåæ¥å¬è¯´æ˜¯æ»´æ»´è£å‘˜15%è¾¾2000äºº\n\næˆ‘è‚¯å®šæ˜¯éº»æœ¨äº†\n\n# added fuel to the fire\n\nè£å‘˜ï¼Ÿä¸ï¼Œæ—¢ç„¶æ˜¯å¯’å†¬ï¼Œè£å‘˜æ‰‹æ®µä¹Ÿå¤ªå•ä¸€äº†ï¼Œè¡¨é¢è£å‘˜ï¼Œå¯¹å†…å‘¢ï¼Ÿ\n\nè€æ¿ï¼šâ€œ996æ˜¯ä¸€ä¸ªå¥½è®¡åˆ’ï¼Œjust do itâ€\n\nå¤§å®¶éƒ½çŸ¥é“åä¸ºç­‰å…¬å¸è¿½æ±‚çš„ç‹¼æ€§æ–‡åŒ–ä»¥åŠä»–ä»¬æ‰€å®æ–½çš„â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼ŒèŠä¼çš„å‘˜å·¥ä¼¼ä¹ä¸ºåŠ ç­è€Œç”Ÿã€‚è¿˜æœ‰ä¸Šæµ·æ–°å…´ä¼ä¸š â€˜æ‹¼å¤•å¤•â€™ çš„ â€˜11 12 6â€™ ç”šè‡³åŠ ç­è‡³å‡Œæ™¨ä¸‰ç‚¹ã€‚å½“ç„¶é«˜ä»˜å‡ºä¹Ÿå¯¹åº”äº†é«˜å›æŠ¥ï¼Œè¿›å»çš„äººæ²¡å¿…è¦æŠ±æ€¨å¤ªå¤šæ¯•ç«Ÿæ˜¯è‡ªå·±çš„é€‰æ‹©ã€‚å¾ˆå¤šäººè¿é—¨æ§›éƒ½æ‘¸ä¸åˆ°å‘¢\n\nè¦è¯´åˆ° â€˜996â€™ ä¸€ç›´æ˜¯æœ€ä»¤ç¨‹åºå‘˜ä½œå‘•çš„ä¸€ä¸ªåè¯ï¼Œç„¶è€Œå·±äº¥æ–°å¹´ä¼Šå§‹ï¼Œæ­å·æŸâ€˜æœ‰èµâ€™å…¬å¸çš„CEOç«Ÿç„¶åœ¨å¹´ä¼šç›´æ¥å®£å¸ƒâ€˜996å·¥ä½œåˆ¶åº¦â€™\nç™½é¸¦å‘˜å·¥ï¼šâ€œè¿™æ˜¯å¹´ä¼šï¼Ÿè¿™ä¸æ˜¯çœŸçš„ã€‚æˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬â€\n\nè¿˜æ˜¯ â€˜996â€™ï¼Œé±¼æ³¡æ³¡ä¹Ÿæ˜¯ä¸‡æ¶çš„â€˜996â€™ï¼Œåæœˆä»½çš„æŸå¤©ï¼Ÿå‰ç«¯è´Ÿè´£äººçš„å£å¤´é€šçŸ¥å°±è¿™æ ·ç®€å•çš„å‘æˆ‘ä»¬å®£å¸ƒã€‚å“¦å¯¹äº†ï¼Œä»–ä¹Ÿå±¡å±¡å¼ºè°ƒäº†â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼Œæˆ‘æ˜¯ä¸æ˜¯æœ‰å¿…è¦å±•ç¤ºå‡ºâ€˜æˆ‘å¥½æ€•æ€•å“Ÿâ€™ä»¥ç¤ºå°Šé‡å‘¢ï¼Ÿ\n\n# I'm such a pain in the neck\n\nå½“ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œè™½è¯´æ˜¯å¯’å†¬ï¼Œä½†æ˜¯å› ä¸ºå„ç§åŸå› æˆ‘å½“ç„¶ä¹Ÿåœ¨å¯»æ‰¾æœºä¼šçš„å¤§å†›ä¸­\n\nä»å°åˆ°å¤§ï¼Œä»å­¦æ ¡åˆ°ç¤¾ä¼šï¼Œä»æœ‹å‹åˆ°åŒäº‹ï¼Œæˆ‘æ”¶åˆ°æ— æ•°è¯„ä»·ï¼Œæˆ–è¤’æˆ–è´¬ä½†æ— éæœ‰è¿™äº›è¯ï¼šè‡ªå¤§ã€è‡ªå‚²ã€è™šè£ã€ä¹–æˆ¾ã€è‡ªä¿¡ã€è´Ÿè´£ã€ç‹¬ç«‹...ä½†æ˜¯è¿™ä¸ªå†¬å¤©æˆ‘æ”¶åˆ°æ¥è‡ªpeterçš„ä¸€ä¸ªæ–°çš„è¯ â€˜æ— çŸ¥â€™ï¼Œç”šè‡³æœ‰ â€˜å¼•ç»æ®å…¸â€™ã€‚æˆ‘ä»”ç»†çœ‹äº†â€˜ç»â€™â€˜å…¸â€™ï¼Œä¸€å¥é€šä¿—çš„è¯ï¼šè‡ªä¿¡å¸¦æ¥çš„ä¸æ˜¯çŸ¥è¯†ï¼ˆæ½œå°è¯æ˜¯æ— çŸ¥ï¼‰ï¼Œä¸€ä¸ªåè¯ï¼šè¾¾å…‹æ•ˆåº”\n\nè¿™ä¸¤å¤©æˆ‘åœ¨ä¼‘å‡ï¼Œpeterä»–ä»¬å¯èƒ½ä¼šä»¥ä¸ºæˆ‘åœ¨å¤–é¢è¯•ï¼Œå…¶å®æ²¡æœ‰ï¼Œæˆ‘åªæ˜¯æ™®é€šçš„ç¡ç¡æ‡’è§‰ï¼Œå°±åƒä¹‹å‰å‘peterè¯·å‡è¯´çš„ï¼šæ˜å¤©æˆ‘ä¸å»äº†ï¼Œå¾ˆç´¯è¦ç¡ä¸ªæ‡’è§‰ã€‚æˆ‘çœŸçš„åªæ˜¯åœ¨åŠªåŠ›å½“ä¸€ä¸ªè‚¥å®…ï¼ˆä¸‹æ„è¯†çœ‹çœ‹è‡ªå·±é”®ç›˜ä¸Šçš„éª·é«…æ‰‹ï¼Œè‚¥ä¸èµ·æ¥å®…æ€»å¯ä»¥å“ï¼‰\n\nä»¥å‰è®¤è¯†çš„ä¸€ä¸ªè€å¤§ç§èŠæˆ‘ï¼šæœ‰æƒ³æ³•å—\n\nä¸”è¡Œä¸”çœ‹å®¹æˆ‘æƒ³ä¸€æƒ³\n\næˆ‘æ˜¯äººé—´æƒ†æ€…å®¢\n\n# last\n\nä¸‹æ„è¯†çš„è£¹ç´§äº†èº«ä¸Šçš„æ£‰æ¯›ç¡è¡£ï¼Œååœ¨ä¹¦æ¡Œå‰çœ‹äº†çœ¼èƒŒåç©ºè°ƒçš„æ˜¾ç¤ºå±ï¼Œâ€œè§é¬¼ï¼Œ28Â°Cæ€ä¹ˆè¿™ä¹ˆå†·ï¼Œâ€˜ohï¼Œshiftâ€™â€\n\nend\n","slug":"humanbeings/IsThisInternetWinter","published":1,"updated":"2019-03-04T02:26:44.941Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptwe000b7948ihd2jvew","content":"<p>å½“å‘¨å›´çš„ç¨‹åºå‘˜éƒ½åœ¨è¯´å¤–é¢è¡Œæƒ…å¾ˆå·®çš„æ—¶å€™ï¼Œè²Œä¼¼è¿™ä¸ª2019å¹´å†¬å¤©çš„é£æ ¼å¤–çš„å‡›å†½<br><a id=\"more\"></a></p>\n<p>â€œé¢äº†å¥½å¤šå®¶æ²¡æ‹¿åˆ°ä¸€ä¸ªofferâ€<br>â€œå”‰ï¼Œä¸€ç›´æ¥ä¸åˆ°é¢è¯•é‚€è¯·â€<br>â€œå¤–é¢è¡Œæƒ…æ˜¯çœŸçš„å·®å•Šï¼Œå¤§å‚éƒ½åœ¨è£å‘˜â€<br>.<br>.<br>.</p>\n<h1 id=\"winter-of-internet\"><a href=\"#winter-of-internet\" class=\"headerlink\" title=\"winter of internet\"></a>winter of internet</h1><p>äº’è”ç½‘å¯’å†¬çœŸçš„æ¥äº†å—ï¼Ÿå½“å¤§å®¶éƒ½åœ¨è¿™ä¹ˆè¯´çš„æ—¶å€™å¤§æ¦‚å°±ç®—æ˜¯äº†å§ï¼Œè‡³å°‘å¯¹äºå¾ˆå¤šé¢è¯•ä¸é¡ºç”šè‡³æ¥ä¸åˆ°é¢è¯•é‚€è¯·çš„äººæ¥è¯´</p>\n<p>æœ‰æ®µæ—¶é—´è¿ç»­é¢äº†å¥½å‡ ä¸ªâ€˜ç»ç†â€™ã€â€˜è´Ÿè´£äººâ€™å¤´è¡”çš„åº”è˜äººå‘˜ï¼Œæ³¨æ„äº†ä¸€ä¸‹ç«Ÿç„¶å…¨æ˜¯åŒä¸€ä¸ªå…¬å¸ï¼Œæœ‰ä¸€æ¬¡é¢è¯•æˆ‘é—®äº†ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥çŒ©ä¾¿åˆ©è£å‘˜äº†ï¼Œå½“æ—¶å¿ƒä¸­ä¸ä»¥ä¸ºæ„ï¼Œè²Œä¼¼è¿™ä¸ªä¾¿åˆ©åº—åæ°”ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå¯èƒ½æ²¡æœ‰æ‹¿åˆ°åç»­çš„èèµ„äº†å§</p>\n<p>æ²¡è¿‡å¤šä¹…ä¾¿æœ‰ç½‘ä¼ é˜¿é‡Œç­‰å¤§å‚ä¸å†ç¤¾æ‹›çš„æ–°é—»ï¼Œå…¬å¸å…¬å…³è‚¯å®šæ˜¯è¦è¾Ÿè°£çš„ï¼Œæ— éæ˜¯ä¸€ç›´æ¸´æœ›äººæ‰å¼•è¿›æ€å¯ä¸å†æ‹›äººã€‚å†…å¿ƒè¿™æ—¶ä¾ç„¶æ€€ç–‘è¿™ä¸ªäº’è”ç½‘çš„æ—¶ä»£ä¼šæœ‰çœŸæ­£çš„å¯’å†¬å—ï¼Ÿå½“ç„¶ä»”ç»†æƒ³æƒ³ä¹Ÿä¼šæ˜ç™½ï¼Œå°±ç®—æ˜¯å¯’å†¬å½»åº•ä¸æ‹›äººæ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨æ‹›äººçš„æŠŠæ§ä¸Šè‚¯å®šéä¹‹å‰å¯æ¯”</p>\n<p>ç„¶è€Œæ—¢ç„¶ç½‘ä¼ å¯’å†¬ï¼Œæ€èƒ½åªæœ‰è¿™ä¹ˆä¸€äº›ã€‚çŸ¥é“ç¾å›¢ç‚¹è¯„æ•´ä¸ªäº‹ä¸šéƒ¨å°†è¢«æ’¤æ‰ï¼Œç‚¹è¯„å‘˜å·¥æˆ–è½¬å²—æˆ–æ‹¿èµ”å¿çš„æ—¶å€™çªç„¶å‘è§‰å¯èƒ½è¿™ä¸ªå†¬å¤©ä¸æ˜¯åœ¨å’Œä½ å¼€ç©ç¬‘ï¼Œä¸Šæµ·è¿™åº§å—æ–¹åŸå¸‚ä¸€å®šè¦è®©ç”Ÿæ´»åœ¨è¿™ç‰‡åœŸåœ°ä¸Šçš„åŒ—æ–¹äººæ„Ÿå—ä¸€ä¸‹çœŸæ­£çš„å¯’å†·ã€‚å…¶å®è¯´åˆ°è¿™é‡Œæˆ‘çªç„¶æƒ³åˆ°é±¼æ³¡æ³¡çš„CTOæ­£æ˜¯18å¹´å¹´æœ«ä»ç‚¹è¯„ç©ºé™è¿‡æ¥ï¼Œæ˜¯åœ¨ä½è€…é•¿è¿œçš„æˆ˜ç•¥ç›®å…‰å—ï¼Ÿç•¥å¾®æœ‰ç‚¹â€˜ä¸å¯’è€Œæ —â€™ï¼Ÿ</p>\n<p>äº¬ä¸œæ‰§è¡Œæœ«å°¾æ·˜æ±°æœºåˆ¶ã€‚å¦‚ä½•æ‰§è¡Œï¼Ÿè£å‘˜35%</p>\n<p>å¹´åå›åˆ°ä¸Šæµ·ï¼Œæœ‹å‹å‘Šè¯‰æˆ‘æ²ªæ±Ÿæ•™è‚²è£äº†æ•´ä¸¤å±‚æ¥¼</p>\n<p>å‰æ®µæ—¶é—´åˆå¬é—»æ»´æ»´ä¸Šæµ·åˆ†éƒ¨è¦è¢«æ’¤æ‰ï¼Œæƒ³äº†æƒ³æœ‰æœ‹å‹ä¹‹å‰åœ¨é‚£é¢å¾…è¿‡è²Œä¼¼è§„æ¨¡æœ¬èº«ä¹Ÿä¸å¤§ã€‚emmmï¼Œæˆ‘åº”è¯¥æ˜¯éº»æœ¨äº†ï¼Œåæ¥å¬è¯´æ˜¯æ»´æ»´è£å‘˜15%è¾¾2000äºº</p>\n<p>æˆ‘è‚¯å®šæ˜¯éº»æœ¨äº†</p>\n<h1 id=\"added-fuel-to-the-fire\"><a href=\"#added-fuel-to-the-fire\" class=\"headerlink\" title=\"added fuel to the fire\"></a>added fuel to the fire</h1><p>è£å‘˜ï¼Ÿä¸ï¼Œæ—¢ç„¶æ˜¯å¯’å†¬ï¼Œè£å‘˜æ‰‹æ®µä¹Ÿå¤ªå•ä¸€äº†ï¼Œè¡¨é¢è£å‘˜ï¼Œå¯¹å†…å‘¢ï¼Ÿ</p>\n<p>è€æ¿ï¼šâ€œ996æ˜¯ä¸€ä¸ªå¥½è®¡åˆ’ï¼Œjust do itâ€</p>\n<p>å¤§å®¶éƒ½çŸ¥é“åä¸ºç­‰å…¬å¸è¿½æ±‚çš„ç‹¼æ€§æ–‡åŒ–ä»¥åŠä»–ä»¬æ‰€å®æ–½çš„â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼ŒèŠä¼çš„å‘˜å·¥ä¼¼ä¹ä¸ºåŠ ç­è€Œç”Ÿã€‚è¿˜æœ‰ä¸Šæµ·æ–°å…´ä¼ä¸š â€˜æ‹¼å¤•å¤•â€™ çš„ â€˜11 12 6â€™ ç”šè‡³åŠ ç­è‡³å‡Œæ™¨ä¸‰ç‚¹ã€‚å½“ç„¶é«˜ä»˜å‡ºä¹Ÿå¯¹åº”äº†é«˜å›æŠ¥ï¼Œè¿›å»çš„äººæ²¡å¿…è¦æŠ±æ€¨å¤ªå¤šæ¯•ç«Ÿæ˜¯è‡ªå·±çš„é€‰æ‹©ã€‚å¾ˆå¤šäººè¿é—¨æ§›éƒ½æ‘¸ä¸åˆ°å‘¢</p>\n<p>è¦è¯´åˆ° â€˜996â€™ ä¸€ç›´æ˜¯æœ€ä»¤ç¨‹åºå‘˜ä½œå‘•çš„ä¸€ä¸ªåè¯ï¼Œç„¶è€Œå·±äº¥æ–°å¹´ä¼Šå§‹ï¼Œæ­å·æŸâ€˜æœ‰èµâ€™å…¬å¸çš„CEOç«Ÿç„¶åœ¨å¹´ä¼šç›´æ¥å®£å¸ƒâ€˜996å·¥ä½œåˆ¶åº¦â€™<br>ç™½é¸¦å‘˜å·¥ï¼šâ€œè¿™æ˜¯å¹´ä¼šï¼Ÿè¿™ä¸æ˜¯çœŸçš„ã€‚æˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬â€</p>\n<p>è¿˜æ˜¯ â€˜996â€™ï¼Œé±¼æ³¡æ³¡ä¹Ÿæ˜¯ä¸‡æ¶çš„â€˜996â€™ï¼Œåæœˆä»½çš„æŸå¤©ï¼Ÿå‰ç«¯è´Ÿè´£äººçš„å£å¤´é€šçŸ¥å°±è¿™æ ·ç®€å•çš„å‘æˆ‘ä»¬å®£å¸ƒã€‚å“¦å¯¹äº†ï¼Œä»–ä¹Ÿå±¡å±¡å¼ºè°ƒäº†â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼Œæˆ‘æ˜¯ä¸æ˜¯æœ‰å¿…è¦å±•ç¤ºå‡ºâ€˜æˆ‘å¥½æ€•æ€•å“Ÿâ€™ä»¥ç¤ºå°Šé‡å‘¢ï¼Ÿ</p>\n<h1 id=\"Iâ€™m-such-a-pain-in-the-neck\"><a href=\"#Iâ€™m-such-a-pain-in-the-neck\" class=\"headerlink\" title=\"Iâ€™m such a pain in the neck\"></a>Iâ€™m such a pain in the neck</h1><p>å½“ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œè™½è¯´æ˜¯å¯’å†¬ï¼Œä½†æ˜¯å› ä¸ºå„ç§åŸå› æˆ‘å½“ç„¶ä¹Ÿåœ¨å¯»æ‰¾æœºä¼šçš„å¤§å†›ä¸­</p>\n<p>ä»å°åˆ°å¤§ï¼Œä»å­¦æ ¡åˆ°ç¤¾ä¼šï¼Œä»æœ‹å‹åˆ°åŒäº‹ï¼Œæˆ‘æ”¶åˆ°æ— æ•°è¯„ä»·ï¼Œæˆ–è¤’æˆ–è´¬ä½†æ— éæœ‰è¿™äº›è¯ï¼šè‡ªå¤§ã€è‡ªå‚²ã€è™šè£ã€ä¹–æˆ¾ã€è‡ªä¿¡ã€è´Ÿè´£ã€ç‹¬ç«‹â€¦ä½†æ˜¯è¿™ä¸ªå†¬å¤©æˆ‘æ”¶åˆ°æ¥è‡ªpeterçš„ä¸€ä¸ªæ–°çš„è¯ â€˜æ— çŸ¥â€™ï¼Œç”šè‡³æœ‰ â€˜å¼•ç»æ®å…¸â€™ã€‚æˆ‘ä»”ç»†çœ‹äº†â€˜ç»â€™â€˜å…¸â€™ï¼Œä¸€å¥é€šä¿—çš„è¯ï¼šè‡ªä¿¡å¸¦æ¥çš„ä¸æ˜¯çŸ¥è¯†ï¼ˆæ½œå°è¯æ˜¯æ— çŸ¥ï¼‰ï¼Œä¸€ä¸ªåè¯ï¼šè¾¾å…‹æ•ˆåº”</p>\n<p>è¿™ä¸¤å¤©æˆ‘åœ¨ä¼‘å‡ï¼Œpeterä»–ä»¬å¯èƒ½ä¼šä»¥ä¸ºæˆ‘åœ¨å¤–é¢è¯•ï¼Œå…¶å®æ²¡æœ‰ï¼Œæˆ‘åªæ˜¯æ™®é€šçš„ç¡ç¡æ‡’è§‰ï¼Œå°±åƒä¹‹å‰å‘peterè¯·å‡è¯´çš„ï¼šæ˜å¤©æˆ‘ä¸å»äº†ï¼Œå¾ˆç´¯è¦ç¡ä¸ªæ‡’è§‰ã€‚æˆ‘çœŸçš„åªæ˜¯åœ¨åŠªåŠ›å½“ä¸€ä¸ªè‚¥å®…ï¼ˆä¸‹æ„è¯†çœ‹çœ‹è‡ªå·±é”®ç›˜ä¸Šçš„éª·é«…æ‰‹ï¼Œè‚¥ä¸èµ·æ¥å®…æ€»å¯ä»¥å“ï¼‰</p>\n<p>ä»¥å‰è®¤è¯†çš„ä¸€ä¸ªè€å¤§ç§èŠæˆ‘ï¼šæœ‰æƒ³æ³•å—</p>\n<p>ä¸”è¡Œä¸”çœ‹å®¹æˆ‘æƒ³ä¸€æƒ³</p>\n<p>æˆ‘æ˜¯äººé—´æƒ†æ€…å®¢</p>\n<h1 id=\"last\"><a href=\"#last\" class=\"headerlink\" title=\"last\"></a>last</h1><p>ä¸‹æ„è¯†çš„è£¹ç´§äº†èº«ä¸Šçš„æ£‰æ¯›ç¡è¡£ï¼Œååœ¨ä¹¦æ¡Œå‰çœ‹äº†çœ¼èƒŒåç©ºè°ƒçš„æ˜¾ç¤ºå±ï¼Œâ€œè§é¬¼ï¼Œ28Â°Cæ€ä¹ˆè¿™ä¹ˆå†·ï¼Œâ€˜ohï¼Œshiftâ€™â€</p>\n<p>end</p>\n","site":{"data":{}},"excerpt":"<p>å½“å‘¨å›´çš„ç¨‹åºå‘˜éƒ½åœ¨è¯´å¤–é¢è¡Œæƒ…å¾ˆå·®çš„æ—¶å€™ï¼Œè²Œä¼¼è¿™ä¸ª2019å¹´å†¬å¤©çš„é£æ ¼å¤–çš„å‡›å†½<br></p>","more":"<p></p>\n<p>â€œé¢äº†å¥½å¤šå®¶æ²¡æ‹¿åˆ°ä¸€ä¸ªofferâ€<br>â€œå”‰ï¼Œä¸€ç›´æ¥ä¸åˆ°é¢è¯•é‚€è¯·â€<br>â€œå¤–é¢è¡Œæƒ…æ˜¯çœŸçš„å·®å•Šï¼Œå¤§å‚éƒ½åœ¨è£å‘˜â€<br>.<br>.<br>.</p>\n<h1 id=\"winter-of-internet\"><a href=\"#winter-of-internet\" class=\"headerlink\" title=\"winter of internet\"></a>winter of internet</h1><p>äº’è”ç½‘å¯’å†¬çœŸçš„æ¥äº†å—ï¼Ÿå½“å¤§å®¶éƒ½åœ¨è¿™ä¹ˆè¯´çš„æ—¶å€™å¤§æ¦‚å°±ç®—æ˜¯äº†å§ï¼Œè‡³å°‘å¯¹äºå¾ˆå¤šé¢è¯•ä¸é¡ºç”šè‡³æ¥ä¸åˆ°é¢è¯•é‚€è¯·çš„äººæ¥è¯´</p>\n<p>æœ‰æ®µæ—¶é—´è¿ç»­é¢äº†å¥½å‡ ä¸ªâ€˜ç»ç†â€™ã€â€˜è´Ÿè´£äººâ€™å¤´è¡”çš„åº”è˜äººå‘˜ï¼Œæ³¨æ„äº†ä¸€ä¸‹ç«Ÿç„¶å…¨æ˜¯åŒä¸€ä¸ªå…¬å¸ï¼Œæœ‰ä¸€æ¬¡é¢è¯•æˆ‘é—®äº†ä¸€ä¸‹æ‰çŸ¥é“ï¼ŒåŸæ¥çŒ©ä¾¿åˆ©è£å‘˜äº†ï¼Œå½“æ—¶å¿ƒä¸­ä¸ä»¥ä¸ºæ„ï¼Œè²Œä¼¼è¿™ä¸ªä¾¿åˆ©åº—åæ°”ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå¯èƒ½æ²¡æœ‰æ‹¿åˆ°åç»­çš„èèµ„äº†å§</p>\n<p>æ²¡è¿‡å¤šä¹…ä¾¿æœ‰ç½‘ä¼ é˜¿é‡Œç­‰å¤§å‚ä¸å†ç¤¾æ‹›çš„æ–°é—»ï¼Œå…¬å¸å…¬å…³è‚¯å®šæ˜¯è¦è¾Ÿè°£çš„ï¼Œæ— éæ˜¯ä¸€ç›´æ¸´æœ›äººæ‰å¼•è¿›æ€å¯ä¸å†æ‹›äººã€‚å†…å¿ƒè¿™æ—¶ä¾ç„¶æ€€ç–‘è¿™ä¸ªäº’è”ç½‘çš„æ—¶ä»£ä¼šæœ‰çœŸæ­£çš„å¯’å†¬å—ï¼Ÿå½“ç„¶ä»”ç»†æƒ³æƒ³ä¹Ÿä¼šæ˜ç™½ï¼Œå°±ç®—æ˜¯å¯’å†¬å½»åº•ä¸æ‹›äººæ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯åœ¨æ‹›äººçš„æŠŠæ§ä¸Šè‚¯å®šéä¹‹å‰å¯æ¯”</p>\n<p>ç„¶è€Œæ—¢ç„¶ç½‘ä¼ å¯’å†¬ï¼Œæ€èƒ½åªæœ‰è¿™ä¹ˆä¸€äº›ã€‚çŸ¥é“ç¾å›¢ç‚¹è¯„æ•´ä¸ªäº‹ä¸šéƒ¨å°†è¢«æ’¤æ‰ï¼Œç‚¹è¯„å‘˜å·¥æˆ–è½¬å²—æˆ–æ‹¿èµ”å¿çš„æ—¶å€™çªç„¶å‘è§‰å¯èƒ½è¿™ä¸ªå†¬å¤©ä¸æ˜¯åœ¨å’Œä½ å¼€ç©ç¬‘ï¼Œä¸Šæµ·è¿™åº§å—æ–¹åŸå¸‚ä¸€å®šè¦è®©ç”Ÿæ´»åœ¨è¿™ç‰‡åœŸåœ°ä¸Šçš„åŒ—æ–¹äººæ„Ÿå—ä¸€ä¸‹çœŸæ­£çš„å¯’å†·ã€‚å…¶å®è¯´åˆ°è¿™é‡Œæˆ‘çªç„¶æƒ³åˆ°é±¼æ³¡æ³¡çš„CTOæ­£æ˜¯18å¹´å¹´æœ«ä»ç‚¹è¯„ç©ºé™è¿‡æ¥ï¼Œæ˜¯åœ¨ä½è€…é•¿è¿œçš„æˆ˜ç•¥ç›®å…‰å—ï¼Ÿç•¥å¾®æœ‰ç‚¹â€˜ä¸å¯’è€Œæ —â€™ï¼Ÿ</p>\n<p>äº¬ä¸œæ‰§è¡Œæœ«å°¾æ·˜æ±°æœºåˆ¶ã€‚å¦‚ä½•æ‰§è¡Œï¼Ÿè£å‘˜35%</p>\n<p>å¹´åå›åˆ°ä¸Šæµ·ï¼Œæœ‹å‹å‘Šè¯‰æˆ‘æ²ªæ±Ÿæ•™è‚²è£äº†æ•´ä¸¤å±‚æ¥¼</p>\n<p>å‰æ®µæ—¶é—´åˆå¬é—»æ»´æ»´ä¸Šæµ·åˆ†éƒ¨è¦è¢«æ’¤æ‰ï¼Œæƒ³äº†æƒ³æœ‰æœ‹å‹ä¹‹å‰åœ¨é‚£é¢å¾…è¿‡è²Œä¼¼è§„æ¨¡æœ¬èº«ä¹Ÿä¸å¤§ã€‚emmmï¼Œæˆ‘åº”è¯¥æ˜¯éº»æœ¨äº†ï¼Œåæ¥å¬è¯´æ˜¯æ»´æ»´è£å‘˜15%è¾¾2000äºº</p>\n<p>æˆ‘è‚¯å®šæ˜¯éº»æœ¨äº†</p>\n<h1 id=\"added-fuel-to-the-fire\"><a href=\"#added-fuel-to-the-fire\" class=\"headerlink\" title=\"added fuel to the fire\"></a>added fuel to the fire</h1><p>è£å‘˜ï¼Ÿä¸ï¼Œæ—¢ç„¶æ˜¯å¯’å†¬ï¼Œè£å‘˜æ‰‹æ®µä¹Ÿå¤ªå•ä¸€äº†ï¼Œè¡¨é¢è£å‘˜ï¼Œå¯¹å†…å‘¢ï¼Ÿ</p>\n<p>è€æ¿ï¼šâ€œ996æ˜¯ä¸€ä¸ªå¥½è®¡åˆ’ï¼Œjust do itâ€</p>\n<p>å¤§å®¶éƒ½çŸ¥é“åä¸ºç­‰å…¬å¸è¿½æ±‚çš„ç‹¼æ€§æ–‡åŒ–ä»¥åŠä»–ä»¬æ‰€å®æ–½çš„â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼ŒèŠä¼çš„å‘˜å·¥ä¼¼ä¹ä¸ºåŠ ç­è€Œç”Ÿã€‚è¿˜æœ‰ä¸Šæµ·æ–°å…´ä¼ä¸š â€˜æ‹¼å¤•å¤•â€™ çš„ â€˜11 12 6â€™ ç”šè‡³åŠ ç­è‡³å‡Œæ™¨ä¸‰ç‚¹ã€‚å½“ç„¶é«˜ä»˜å‡ºä¹Ÿå¯¹åº”äº†é«˜å›æŠ¥ï¼Œè¿›å»çš„äººæ²¡å¿…è¦æŠ±æ€¨å¤ªå¤šæ¯•ç«Ÿæ˜¯è‡ªå·±çš„é€‰æ‹©ã€‚å¾ˆå¤šäººè¿é—¨æ§›éƒ½æ‘¸ä¸åˆ°å‘¢</p>\n<p>è¦è¯´åˆ° â€˜996â€™ ä¸€ç›´æ˜¯æœ€ä»¤ç¨‹åºå‘˜ä½œå‘•çš„ä¸€ä¸ªåè¯ï¼Œç„¶è€Œå·±äº¥æ–°å¹´ä¼Šå§‹ï¼Œæ­å·æŸâ€˜æœ‰èµâ€™å…¬å¸çš„CEOç«Ÿç„¶åœ¨å¹´ä¼šç›´æ¥å®£å¸ƒâ€˜996å·¥ä½œåˆ¶åº¦â€™<br>ç™½é¸¦å‘˜å·¥ï¼šâ€œè¿™æ˜¯å¹´ä¼šï¼Ÿè¿™ä¸æ˜¯çœŸçš„ã€‚æˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬ï¼Œæˆ‘ä¸å¬â€</p>\n<p>è¿˜æ˜¯ â€˜996â€™ï¼Œé±¼æ³¡æ³¡ä¹Ÿæ˜¯ä¸‡æ¶çš„â€˜996â€™ï¼Œåæœˆä»½çš„æŸå¤©ï¼Ÿå‰ç«¯è´Ÿè´£äººçš„å£å¤´é€šçŸ¥å°±è¿™æ ·ç®€å•çš„å‘æˆ‘ä»¬å®£å¸ƒã€‚å“¦å¯¹äº†ï¼Œä»–ä¹Ÿå±¡å±¡å¼ºè°ƒäº†â€˜æœ«å°¾æ·˜æ±°æœºåˆ¶â€™ï¼Œæˆ‘æ˜¯ä¸æ˜¯æœ‰å¿…è¦å±•ç¤ºå‡ºâ€˜æˆ‘å¥½æ€•æ€•å“Ÿâ€™ä»¥ç¤ºå°Šé‡å‘¢ï¼Ÿ</p>\n<h1 id=\"Iâ€™m-such-a-pain-in-the-neck\"><a href=\"#Iâ€™m-such-a-pain-in-the-neck\" class=\"headerlink\" title=\"Iâ€™m such a pain in the neck\"></a>Iâ€™m such a pain in the neck</h1><p>å½“ç„¶è¯´äº†è¿™ä¹ˆå¤šï¼Œè™½è¯´æ˜¯å¯’å†¬ï¼Œä½†æ˜¯å› ä¸ºå„ç§åŸå› æˆ‘å½“ç„¶ä¹Ÿåœ¨å¯»æ‰¾æœºä¼šçš„å¤§å†›ä¸­</p>\n<p>ä»å°åˆ°å¤§ï¼Œä»å­¦æ ¡åˆ°ç¤¾ä¼šï¼Œä»æœ‹å‹åˆ°åŒäº‹ï¼Œæˆ‘æ”¶åˆ°æ— æ•°è¯„ä»·ï¼Œæˆ–è¤’æˆ–è´¬ä½†æ— éæœ‰è¿™äº›è¯ï¼šè‡ªå¤§ã€è‡ªå‚²ã€è™šè£ã€ä¹–æˆ¾ã€è‡ªä¿¡ã€è´Ÿè´£ã€ç‹¬ç«‹â€¦ä½†æ˜¯è¿™ä¸ªå†¬å¤©æˆ‘æ”¶åˆ°æ¥è‡ªpeterçš„ä¸€ä¸ªæ–°çš„è¯ â€˜æ— çŸ¥â€™ï¼Œç”šè‡³æœ‰ â€˜å¼•ç»æ®å…¸â€™ã€‚æˆ‘ä»”ç»†çœ‹äº†â€˜ç»â€™â€˜å…¸â€™ï¼Œä¸€å¥é€šä¿—çš„è¯ï¼šè‡ªä¿¡å¸¦æ¥çš„ä¸æ˜¯çŸ¥è¯†ï¼ˆæ½œå°è¯æ˜¯æ— çŸ¥ï¼‰ï¼Œä¸€ä¸ªåè¯ï¼šè¾¾å…‹æ•ˆåº”</p>\n<p>è¿™ä¸¤å¤©æˆ‘åœ¨ä¼‘å‡ï¼Œpeterä»–ä»¬å¯èƒ½ä¼šä»¥ä¸ºæˆ‘åœ¨å¤–é¢è¯•ï¼Œå…¶å®æ²¡æœ‰ï¼Œæˆ‘åªæ˜¯æ™®é€šçš„ç¡ç¡æ‡’è§‰ï¼Œå°±åƒä¹‹å‰å‘peterè¯·å‡è¯´çš„ï¼šæ˜å¤©æˆ‘ä¸å»äº†ï¼Œå¾ˆç´¯è¦ç¡ä¸ªæ‡’è§‰ã€‚æˆ‘çœŸçš„åªæ˜¯åœ¨åŠªåŠ›å½“ä¸€ä¸ªè‚¥å®…ï¼ˆä¸‹æ„è¯†çœ‹çœ‹è‡ªå·±é”®ç›˜ä¸Šçš„éª·é«…æ‰‹ï¼Œè‚¥ä¸èµ·æ¥å®…æ€»å¯ä»¥å“ï¼‰</p>\n<p>ä»¥å‰è®¤è¯†çš„ä¸€ä¸ªè€å¤§ç§èŠæˆ‘ï¼šæœ‰æƒ³æ³•å—</p>\n<p>ä¸”è¡Œä¸”çœ‹å®¹æˆ‘æƒ³ä¸€æƒ³</p>\n<p>æˆ‘æ˜¯äººé—´æƒ†æ€…å®¢</p>\n<h1 id=\"last\"><a href=\"#last\" class=\"headerlink\" title=\"last\"></a>last</h1><p>ä¸‹æ„è¯†çš„è£¹ç´§äº†èº«ä¸Šçš„æ£‰æ¯›ç¡è¡£ï¼Œååœ¨ä¹¦æ¡Œå‰çœ‹äº†çœ¼èƒŒåç©ºè°ƒçš„æ˜¾ç¤ºå±ï¼Œâ€œè§é¬¼ï¼Œ28Â°Cæ€ä¹ˆè¿™ä¹ˆå†·ï¼Œâ€˜ohï¼Œshiftâ€™â€</p>\n<p>end</p>"},{"title":"äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢","date":"2019-01-03T16:00:00.000Z","_content":"\næˆ‘æ˜¯äººé—´æƒ†æ€…å®¢\nçŸ¥å›ä½•äº‹æ³ªçºµæ¨ª\n\n<!--more-->\n\n## åŸæ¥18å¹´å·²ç»ç»“æŸäº†\n\nå·²è‡³å·±äº¥ï¼Œæ—¶é—´å¦‚æµæ°´ï¼Œå¤§æ±Ÿä¸œå»ã€‚äº”å‘³é™ˆæ‚çš„18å¹´ï¼Œå•èº«ç¨‹åºå‘˜å¹¶ä¸æ˜¯åªæœ‰å·¥ä½œï¼Œç”Ÿæ´»ä¸‰ç•ªäº”æ¬¡ç»™æˆ‘å½“å¤´æ£’å–ã€‚ç®€å•æ€»ç»“ä¸‹å§\n\nä»é€”è™åˆ°é±¼æ³¡æ³¡\n\nç»“è¯†ä¸å°‘æ–°æœ‹å‹\n\nå’Œ [æ›¹å°‘](https://github.com/kailcc) ç»Ÿä¸€é˜µçº¿ï¼Œå½“ç„¶è¿˜æœ‰æ›´å¤šçš„å¤§éƒ½ç‚¹å¤´æ³›æ³›ä¹‹äº¤å¦‚æ— æ ¹æµ®è\n\næ„Ÿè°¢å‘¨å›´å¸®åŠ©è¿‡æˆ‘çš„åŒäº‹å’Œé™Œç”Ÿäººã€‚æˆ‘æ˜¯é‚£ç§ä¸å¯è‚†æ„å¿˜å½¢çš„äººï¼Œä¸€åˆ‡åœ¨æˆ‘èº«ä¸Šä»¿è‹¥æ˜¯å®ˆæ’çš„ï¼Œå¾—æ„ä¸ä¹…æ€»ä¼šè¿æ¥å½“å¤´æ£’å–ï¼Œåªèƒ½é—·å£°åšäº‹å—ï¼Œè¿™ä¸ªå¹´è½»äººä¹Ÿå¤ªä¸æ½‡æ´’äº†ã€‚æ—¶å€™æœªåˆ°ï¼Œé˜…å†å°šæµ…ï¼Œä¸æ˜¯æˆ‘çš„æˆ‘è¿˜æ‹¿ä¸ä½\n\nå¿ƒä¸­çš„æˆ¾æ°”ä¸€ç›´ä¸å¾—æ¶ˆå‡ï¼Œè„¾æ€§è™½ç„¶ç›¸å¯¹å­¦ç”Ÿæ—¶ä»£å·²ç»å†…æ•›å¾ˆå¤šï¼Œå¯æˆ¾æ°”ä¸€ç›´åœ¨å¿ƒä¸­ç§¯èšã€‚å¯èƒ½ä¸ªäººå†…å¿ƒæä¸ºè‡ªç§ï¼Œå¯èƒ½å¯¹ç°çŠ¶æå…¶ä¸æ»¡ï¼Œå¯æœ€ç»ˆçš„ç»“æœæ€»æ˜¯ç”±äºæˆ¾æ°”åœ¨é”™è¯¯çš„æ—¶å€™çš„æ—¶å€™åšäº†é”™è¯¯çš„äº‹\n\n\nä¾ç„¶å•èº«ï¼Œè¿™åŸå¸‚å¤ªç©º\n\nä¾æ—§ç»å¸¸èƒ¡æ€ä¹±æƒ³ï¼Œä¸Šè‡³å®‡å®™ä¸‹è‡³å¾®å°˜ï¼Œäººäº‹ç‰©æ™¯æƒ…\n\nä¹‹åå†è¡¥ä¸Šå§\n\næœ€åå¸Œæœ›19å¹´è§…å¾—çŸ¥éŸ³ï¼Œåšå¾—ä½³äººï¼Œèµšå¾—é’±è´¢ï¼Œæ‘†è„±è‹¦ç—›\n","source":"_posts/humanbeings/äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢.md","raw":"---\ntitle: äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢\ntags:\n  - å½“æˆ‘åœ¨æ‰¯æ·¡\ndate: 2019-01-04 00:00:00\ncategories: å½“æˆ‘åœ¨æ‰¯æ·¡\n---\n\næˆ‘æ˜¯äººé—´æƒ†æ€…å®¢\nçŸ¥å›ä½•äº‹æ³ªçºµæ¨ª\n\n<!--more-->\n\n## åŸæ¥18å¹´å·²ç»ç»“æŸäº†\n\nå·²è‡³å·±äº¥ï¼Œæ—¶é—´å¦‚æµæ°´ï¼Œå¤§æ±Ÿä¸œå»ã€‚äº”å‘³é™ˆæ‚çš„18å¹´ï¼Œå•èº«ç¨‹åºå‘˜å¹¶ä¸æ˜¯åªæœ‰å·¥ä½œï¼Œç”Ÿæ´»ä¸‰ç•ªäº”æ¬¡ç»™æˆ‘å½“å¤´æ£’å–ã€‚ç®€å•æ€»ç»“ä¸‹å§\n\nä»é€”è™åˆ°é±¼æ³¡æ³¡\n\nç»“è¯†ä¸å°‘æ–°æœ‹å‹\n\nå’Œ [æ›¹å°‘](https://github.com/kailcc) ç»Ÿä¸€é˜µçº¿ï¼Œå½“ç„¶è¿˜æœ‰æ›´å¤šçš„å¤§éƒ½ç‚¹å¤´æ³›æ³›ä¹‹äº¤å¦‚æ— æ ¹æµ®è\n\næ„Ÿè°¢å‘¨å›´å¸®åŠ©è¿‡æˆ‘çš„åŒäº‹å’Œé™Œç”Ÿäººã€‚æˆ‘æ˜¯é‚£ç§ä¸å¯è‚†æ„å¿˜å½¢çš„äººï¼Œä¸€åˆ‡åœ¨æˆ‘èº«ä¸Šä»¿è‹¥æ˜¯å®ˆæ’çš„ï¼Œå¾—æ„ä¸ä¹…æ€»ä¼šè¿æ¥å½“å¤´æ£’å–ï¼Œåªèƒ½é—·å£°åšäº‹å—ï¼Œè¿™ä¸ªå¹´è½»äººä¹Ÿå¤ªä¸æ½‡æ´’äº†ã€‚æ—¶å€™æœªåˆ°ï¼Œé˜…å†å°šæµ…ï¼Œä¸æ˜¯æˆ‘çš„æˆ‘è¿˜æ‹¿ä¸ä½\n\nå¿ƒä¸­çš„æˆ¾æ°”ä¸€ç›´ä¸å¾—æ¶ˆå‡ï¼Œè„¾æ€§è™½ç„¶ç›¸å¯¹å­¦ç”Ÿæ—¶ä»£å·²ç»å†…æ•›å¾ˆå¤šï¼Œå¯æˆ¾æ°”ä¸€ç›´åœ¨å¿ƒä¸­ç§¯èšã€‚å¯èƒ½ä¸ªäººå†…å¿ƒæä¸ºè‡ªç§ï¼Œå¯èƒ½å¯¹ç°çŠ¶æå…¶ä¸æ»¡ï¼Œå¯æœ€ç»ˆçš„ç»“æœæ€»æ˜¯ç”±äºæˆ¾æ°”åœ¨é”™è¯¯çš„æ—¶å€™çš„æ—¶å€™åšäº†é”™è¯¯çš„äº‹\n\n\nä¾ç„¶å•èº«ï¼Œè¿™åŸå¸‚å¤ªç©º\n\nä¾æ—§ç»å¸¸èƒ¡æ€ä¹±æƒ³ï¼Œä¸Šè‡³å®‡å®™ä¸‹è‡³å¾®å°˜ï¼Œäººäº‹ç‰©æ™¯æƒ…\n\nä¹‹åå†è¡¥ä¸Šå§\n\næœ€åå¸Œæœ›19å¹´è§…å¾—çŸ¥éŸ³ï¼Œåšå¾—ä½³äººï¼Œèµšå¾—é’±è´¢ï¼Œæ‘†è„±è‹¦ç—›\n","slug":"humanbeings/äººç”Ÿå¤©åœ°é—´ å¿½å¦‚è¿œè¡Œå®¢","published":1,"updated":"2019-02-24T02:52:53.596Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjsy0ptwf000e7948ukyo11vg","content":"<p>æˆ‘æ˜¯äººé—´æƒ†æ€…å®¢<br>çŸ¥å›ä½•äº‹æ³ªçºµæ¨ª</p>\n<a id=\"more\"></a>\n<h2 id=\"åŸæ¥18å¹´å·²ç»ç»“æŸäº†\"><a href=\"#åŸæ¥18å¹´å·²ç»ç»“æŸäº†\" class=\"headerlink\" title=\"åŸæ¥18å¹´å·²ç»ç»“æŸäº†\"></a>åŸæ¥18å¹´å·²ç»ç»“æŸäº†</h2><p>å·²è‡³å·±äº¥ï¼Œæ—¶é—´å¦‚æµæ°´ï¼Œå¤§æ±Ÿä¸œå»ã€‚äº”å‘³é™ˆæ‚çš„18å¹´ï¼Œå•èº«ç¨‹åºå‘˜å¹¶ä¸æ˜¯åªæœ‰å·¥ä½œï¼Œç”Ÿæ´»ä¸‰ç•ªäº”æ¬¡ç»™æˆ‘å½“å¤´æ£’å–ã€‚ç®€å•æ€»ç»“ä¸‹å§</p>\n<p>ä»é€”è™åˆ°é±¼æ³¡æ³¡</p>\n<p>ç»“è¯†ä¸å°‘æ–°æœ‹å‹</p>\n<p>å’Œ <a href=\"https://github.com/kailcc\" target=\"_blank\" rel=\"noopener\">æ›¹å°‘</a> ç»Ÿä¸€é˜µçº¿ï¼Œå½“ç„¶è¿˜æœ‰æ›´å¤šçš„å¤§éƒ½ç‚¹å¤´æ³›æ³›ä¹‹äº¤å¦‚æ— æ ¹æµ®è</p>\n<p>æ„Ÿè°¢å‘¨å›´å¸®åŠ©è¿‡æˆ‘çš„åŒäº‹å’Œé™Œç”Ÿäººã€‚æˆ‘æ˜¯é‚£ç§ä¸å¯è‚†æ„å¿˜å½¢çš„äººï¼Œä¸€åˆ‡åœ¨æˆ‘èº«ä¸Šä»¿è‹¥æ˜¯å®ˆæ’çš„ï¼Œå¾—æ„ä¸ä¹…æ€»ä¼šè¿æ¥å½“å¤´æ£’å–ï¼Œåªèƒ½é—·å£°åšäº‹å—ï¼Œè¿™ä¸ªå¹´è½»äººä¹Ÿå¤ªä¸æ½‡æ´’äº†ã€‚æ—¶å€™æœªåˆ°ï¼Œé˜…å†å°šæµ…ï¼Œä¸æ˜¯æˆ‘çš„æˆ‘è¿˜æ‹¿ä¸ä½</p>\n<p>å¿ƒä¸­çš„æˆ¾æ°”ä¸€ç›´ä¸å¾—æ¶ˆå‡ï¼Œè„¾æ€§è™½ç„¶ç›¸å¯¹å­¦ç”Ÿæ—¶ä»£å·²ç»å†…æ•›å¾ˆå¤šï¼Œå¯æˆ¾æ°”ä¸€ç›´åœ¨å¿ƒä¸­ç§¯èšã€‚å¯èƒ½ä¸ªäººå†…å¿ƒæä¸ºè‡ªç§ï¼Œå¯èƒ½å¯¹ç°çŠ¶æå…¶ä¸æ»¡ï¼Œå¯æœ€ç»ˆçš„ç»“æœæ€»æ˜¯ç”±äºæˆ¾æ°”åœ¨é”™è¯¯çš„æ—¶å€™çš„æ—¶å€™åšäº†é”™è¯¯çš„äº‹</p>\n<p>ä¾ç„¶å•èº«ï¼Œè¿™åŸå¸‚å¤ªç©º</p>\n<p>ä¾æ—§ç»å¸¸èƒ¡æ€ä¹±æƒ³ï¼Œä¸Šè‡³å®‡å®™ä¸‹è‡³å¾®å°˜ï¼Œäººäº‹ç‰©æ™¯æƒ…</p>\n<p>ä¹‹åå†è¡¥ä¸Šå§</p>\n<p>æœ€åå¸Œæœ›19å¹´è§…å¾—çŸ¥éŸ³ï¼Œåšå¾—ä½³äººï¼Œèµšå¾—é’±è´¢ï¼Œæ‘†è„±è‹¦ç—›</p>\n","site":{"data":{}},"excerpt":"<p>æˆ‘æ˜¯äººé—´æƒ†æ€…å®¢<br>çŸ¥å›ä½•äº‹æ³ªçºµæ¨ª</p>","more":"<h2 id=\"åŸæ¥18å¹´å·²ç»ç»“æŸäº†\"><a href=\"#åŸæ¥18å¹´å·²ç»ç»“æŸäº†\" class=\"headerlink\" title=\"åŸæ¥18å¹´å·²ç»ç»“æŸäº†\"></a>åŸæ¥18å¹´å·²ç»ç»“æŸäº†</h2><p>å·²è‡³å·±äº¥ï¼Œæ—¶é—´å¦‚æµæ°´ï¼Œå¤§æ±Ÿä¸œå»ã€‚äº”å‘³é™ˆæ‚çš„18å¹´ï¼Œå•èº«ç¨‹åºå‘˜å¹¶ä¸æ˜¯åªæœ‰å·¥ä½œï¼Œç”Ÿæ´»ä¸‰ç•ªäº”æ¬¡ç»™æˆ‘å½“å¤´æ£’å–ã€‚ç®€å•æ€»ç»“ä¸‹å§</p>\n<p>ä»é€”è™åˆ°é±¼æ³¡æ³¡</p>\n<p>ç»“è¯†ä¸å°‘æ–°æœ‹å‹</p>\n<p>å’Œ <a href=\"https://github.com/kailcc\" target=\"_blank\" rel=\"noopener\">æ›¹å°‘</a> ç»Ÿä¸€é˜µçº¿ï¼Œå½“ç„¶è¿˜æœ‰æ›´å¤šçš„å¤§éƒ½ç‚¹å¤´æ³›æ³›ä¹‹äº¤å¦‚æ— æ ¹æµ®è</p>\n<p>æ„Ÿè°¢å‘¨å›´å¸®åŠ©è¿‡æˆ‘çš„åŒäº‹å’Œé™Œç”Ÿäººã€‚æˆ‘æ˜¯é‚£ç§ä¸å¯è‚†æ„å¿˜å½¢çš„äººï¼Œä¸€åˆ‡åœ¨æˆ‘èº«ä¸Šä»¿è‹¥æ˜¯å®ˆæ’çš„ï¼Œå¾—æ„ä¸ä¹…æ€»ä¼šè¿æ¥å½“å¤´æ£’å–ï¼Œåªèƒ½é—·å£°åšäº‹å—ï¼Œè¿™ä¸ªå¹´è½»äººä¹Ÿå¤ªä¸æ½‡æ´’äº†ã€‚æ—¶å€™æœªåˆ°ï¼Œé˜…å†å°šæµ…ï¼Œä¸æ˜¯æˆ‘çš„æˆ‘è¿˜æ‹¿ä¸ä½</p>\n<p>å¿ƒä¸­çš„æˆ¾æ°”ä¸€ç›´ä¸å¾—æ¶ˆå‡ï¼Œè„¾æ€§è™½ç„¶ç›¸å¯¹å­¦ç”Ÿæ—¶ä»£å·²ç»å†…æ•›å¾ˆå¤šï¼Œå¯æˆ¾æ°”ä¸€ç›´åœ¨å¿ƒä¸­ç§¯èšã€‚å¯èƒ½ä¸ªäººå†…å¿ƒæä¸ºè‡ªç§ï¼Œå¯èƒ½å¯¹ç°çŠ¶æå…¶ä¸æ»¡ï¼Œå¯æœ€ç»ˆçš„ç»“æœæ€»æ˜¯ç”±äºæˆ¾æ°”åœ¨é”™è¯¯çš„æ—¶å€™çš„æ—¶å€™åšäº†é”™è¯¯çš„äº‹</p>\n<p>ä¾ç„¶å•èº«ï¼Œè¿™åŸå¸‚å¤ªç©º</p>\n<p>ä¾æ—§ç»å¸¸èƒ¡æ€ä¹±æƒ³ï¼Œä¸Šè‡³å®‡å®™ä¸‹è‡³å¾®å°˜ï¼Œäººäº‹ç‰©æ™¯æƒ…</p>\n<p>ä¹‹åå†è¡¥ä¸Šå§</p>\n<p>æœ€åå¸Œæœ›19å¹´è§…å¾—çŸ¥éŸ³ï¼Œåšå¾—ä½³äººï¼Œèµšå¾—é’±è´¢ï¼Œæ‘†è„±è‹¦ç—›</p>"}],"PostAsset":[{"_id":"source/_posts/writeSomething/koa2OnionModel/onion.png","slug":"onion.png","post":"cjsy0ptwd00087948o32rg548","modified":1,"renderable":0}],"PostCategory":[{"post_id":"cjsy0ptw400007948rqwudant","category_id":"cjstxryr200058348221j8r5k","_id":"cjsy0ptwb000679482jgbdodj"},{"post_id":"cjsy0ptw7000179481vyx6s6g","category_id":"cjstxryrb000d8348ni1tr5nl","_id":"cjsy0ptwd00097948hltf98q3"},{"post_id":"cjsy0ptw9000379483xs0xfpx","category_id":"cjstxryr200058348221j8r5k","_id":"cjsy0ptwf000c7948dplwk5xi"},{"post_id":"cjsy0ptwb00057948qncuinnt","category_id":"cjstxryr200058348221j8r5k","_id":"cjsy0ptwg000f7948ksdl6eup"},{"post_id":"cjsy0ptwd00087948o32rg548","category_id":"cjstxryrb000d8348ni1tr5nl","_id":"cjsy0ptwg000h7948dvfigrlb"},{"post_id":"cjsy0ptwe000b7948ihd2jvew","category_id":"cjstxryre000l8348w80sh2zu","_id":"cjsy0ptwh000j79481fswegrd"},{"post_id":"cjsy0ptwf000e7948ukyo11vg","category_id":"cjstxryre000l8348w80sh2zu","_id":"cjsy0ptwh000l7948vxv692rd"}],"PostTag":[{"post_id":"cjsy0ptw400007948rqwudant","tag_id":"cjstxryr7000b8348l4zymifh","_id":"cjsy0ptw900027948g9rb9ug7"},{"post_id":"cjsy0ptw400007948rqwudant","tag_id":"cjswmqy430001os48n9wxih4m","_id":"cjsy0ptwa00047948erej8rxu"},{"post_id":"cjsy0ptw7000179481vyx6s6g","tag_id":"cjstxryrg000s8348twgw9m1i","_id":"cjsy0ptwc00077948te7lzfhw"},{"post_id":"cjsy0ptw7000179481vyx6s6g","tag_id":"cjstxryrg000w8348jpcziill","_id":"cjsy0ptwe000a79486pcavts7"},{"post_id":"cjsy0ptw7000179481vyx6s6g","tag_id":"cjstxryrh000z8348sk7jmj06","_id":"cjsy0ptwf000d7948p86gswyk"},{"post_id":"cjsy0ptw7000179481vyx6s6g","tag_id":"cjstxryrh001083480tcjwnte","_id":"cjsy0ptwg000g79481irm8n0h"},{"post_id":"cjsy0ptw9000379483xs0xfpx","tag_id":"cjstxryr7000b8348l4zymifh","_id":"cjsy0ptwh000i7948qnu3huf7"},{"post_id":"cjsy0ptw9000379483xs0xfpx","tag_id":"cjstxryrd000k8348hut2oaua","_id":"cjsy0ptwh000k79486ij3vipl"},{"post_id":"cjsy0ptw9000379483xs0xfpx","tag_id":"cjstxryre000n8348nttjja2b","_id":"cjsy0ptwh000m7948cy1804fy"},{"post_id":"cjsy0ptw9000379483xs0xfpx","tag_id":"cjstxryrf000q8348x1kybs1m","_id":"cjsy0ptwh000n79484lq68e0c"},{"post_id":"cjsy0ptwb00057948qncuinnt","tag_id":"cjstxryr300068348p5blq3c0","_id":"cjsy0ptwh000o79480q1dkxyc"},{"post_id":"cjsy0ptwb00057948qncuinnt","tag_id":"cjstxryr7000b8348l4zymifh","_id":"cjsy0ptwh000p79483auvqzd1"},{"post_id":"cjsy0ptwd00087948o32rg548","tag_id":"cjstxryrg000s8348twgw9m1i","_id":"cjsy0ptwh000q7948tw3mauhy"},{"post_id":"cjsy0ptwd00087948o32rg548","tag_id":"cjstxryri00148348rww97t00","_id":"cjsy0ptwh000r7948laowjchg"},{"post_id":"cjsy0ptwd00087948o32rg548","tag_id":"cjstxryri00178348k1omtc8z","_id":"cjsy0ptwi000s79485y1cgnr5"},{"post_id":"cjsy0ptwe000b7948ihd2jvew","tag_id":"cjstxryri00188348h9cgzvnc","_id":"cjsy0ptwi000t79482pojslaq"},{"post_id":"cjsy0ptwf000e7948ukyo11vg","tag_id":"cjstxryri00188348h9cgzvnc","_id":"cjsy0ptwi000u7948a0sx765e"}],"Tag":[{"name":"è®¾è®¡æ¨¡å¼","_id":"cjstxryr300068348p5blq3c0"},{"name":"ç®—æ³•","_id":"cjstxryr7000b8348l4zymifh"},{"name":"åŠ¨æ€è§„åˆ’","_id":"cjstxryrd000k8348hut2oaua"},{"name":"é€’å½’","_id":"cjstxryre000n8348nttjja2b"},{"name":"å°¾é€’å½’","_id":"cjstxryrf000q8348x1kybs1m"},{"name":"å°è£…","_id":"cjstxryrg000s8348twgw9m1i"},{"name":"å¾®ä¿¡å°ç¨‹åº","_id":"cjstxryrg000w8348jpcziill"},{"name":"mpvue","_id":"cjstxryrh000z8348sk7jmj06"},{"name":"è·¯ç”±","_id":"cjstxryrh001083480tcjwnte"},{"name":"koa","_id":"cjstxryri00148348rww97t00"},{"name":"æ´‹è‘±æ¨¡å‹","_id":"cjstxryri00178348k1omtc8z"},{"name":"å½“æˆ‘åœ¨æ‰¯æ·¡","_id":"cjstxryri00188348h9cgzvnc"},{"name":"ç®—æ³•å¤æ‚åº¦","_id":"cjswmqy430001os48n9wxih4m"}]}}
